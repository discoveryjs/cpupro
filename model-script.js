var sr=Object.defineProperty;var Tl=Object.getOwnPropertyDescriptor;var Sl=Object.getOwnPropertyNames;var kl=Object.prototype.hasOwnProperty;var at=(t,e)=>()=>(t&&(e=t(t=0)),e);var P=(t,e)=>{for(var r in e)sr(t,r,{get:e[r],enumerable:!0})},El=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Sl(e))!kl.call(t,s)&&s!==r&&sr(t,s,{get:()=>e[s],enumerable:!(n=Tl(e,s))||n.enumerable});return t};var xl=t=>El(sr({},"__esModule",{value:!0}),t);var zn={};P(zn,{default:()=>Ed});function Ed(t){t.textView.define("allocation-samples-matrix",{view:"table",data:"sort(type.order() asc)",cols:[{header:"Type",content:"text:type",footer:'text:"All types"'},...kd]})}var Sd,Zi,kd,Qi=at(()=>{Sd=[{key:"total",header:"All lifespans"},{key:"alive",header:"Alive"},{key:"long-lived",header:"Long lived"},{key:"short-lived",header:"Short lived"}],Zi={view:"context",when:"sum",content:['text:sum > 999 ? sum.unit() : sum + "b"','text:` (${min != max ? min + "\u2026" : ""}${max.bytes()} \xD7 ${count})`']},kd=Sd.map(({key:t,header:e})=>({header:e,data:`$["${t}"]`,content:Zi,footer:{data:`.($["${t}"]) | { count: sum(=>count), sum(=>sum), min.min(), max.max() }`,content:Zi}}))});var qn={};P(qn,{default:()=>xd});function xd({textView:t}){t.define("duration",(e,r,n,s)=>{let{time:o,total:i}=n,a=s.data?.currentProfile?.type||"time";e.appendText(`${(o/1e3).toFixed(1)}${a==="memory"?"Kb":"ms"} (${(100*o/i).toFixed(1)}%)`)})}var ea=at(()=>{});var Jn={};P(Jn,{default:()=>wd});function wd({textView:t}){t.define("call-frame-source",{view:"source",context:"{ ..., currentProfile: #.data.currentProfile }",data:`{
            $script;
            $source: $script.source;
            $sourceSliceStart: $source.lastIndexOf('\\n', start) + 1;
            $sourceSliceEnd: $source.indexOf('\\n', end) | $ != -1 ?: $source.size();
            $sourceSlice: $source[$sourceSliceStart:$sourceSliceEnd].replace(/\\n$/, '');
            $line: line or 1;
            $start;
            $end;
            $unit: #.currentProfile.type = 'memory' ? 'Kb' : 'ms';
            $scriptFunction: #.currentProfile.codesByCallFrame[=> callFrame = @];
            $values: #.currentProfile
                | #.nonFilteredTimings
                    ? callFramePositionsTimings or callFramesTimings
                    : callFramePositionsTimingsFiltered or callFramesTimingsFiltered;

            $inlinePoints: $scriptFunction.codes
                | $[-1]
                | inlined.match(/O\\d+(?=F|$)/g).matched;
            $codePoints: $scriptFunction.codes
                | $.[tier="Ignition"][-1] or .[positions][-1]
                | positions.match(/O\\d+(?=C|$)/g).matched;

            $inlinedMarks: $scriptFunction.codes[-1].inlined.match(/O\\d+(?=F|$)/g).matched
                |? .({ offset: +$[1:] - $sourceSliceStart, content: 'text:"1"', className: 'def', prefix: 'Inline' });
            $codePointMarks: $codePoints
                |? .(+$[1:] - $sourceSliceStart | is number ? { offset: $ });

            $sampleMarkContent: {
                view: 'text',
                data: 'value[prop] | $ > 0 ? (@.prop = "selfTime" ? "self: " : "nested: ") + unit() : ""'
            };
            $sampleMarks: $values.entries
                | $[].entry.callFrame
                    ? .[entry.callFrame = @]
                    : $[=> entry = @]
                |? .($pos: entry.scriptOffset | is number and $ != -1 ? $ - $sourceSliceStart : $start - $sourceSliceStart; [
                    selfTime ? {
                        offset: $pos,
                        kind: 'self',
                        content: $sampleMarkContent,
                        value: $values.entries[entryIndex],
                        prop: 'selfTime'
                    },
                    nestedTime ? {
                        offset: $pos,
                        kind: 'nested',
                        content: $sampleMarkContent,
                        value: $values.entries[entryIndex],
                        prop: 'nestedTime'
                    },
                ]).[];

            $allMarks: {
                $sampleMarks
            };

            syntax: "js",
            source: $sourceSlice,
            lineNum: => $ + $line,
            callFrame: @,
            $allMarks,
            marks: $allMarks.values().[].()
        }`})}var ta=at(()=>{});var ra={};P(ra,{default:()=>_d});function _d(t){t.apply([zn,qn,Jn])}var na=at(()=>{Qi();ea();ta()});import Ja from"node:fs";import fo from"node:path";import{isReadable as gh,Readable as yh}from"node:stream";var po={name:"Implicit config",version:null,description:null,model:{slug:"default",name:"cpupro",version:"0.7.0",description:"A viewer for CPU profiles captured in V8 runtimes like Node.js, Deno or Chromium browsers",meta:{demos:[{runtime:"nodejs",title:"V8 CPU profile",url:"demo/nodejs.jsonxl"},{runtime:"deno",title:"V8 log (preprocessed)",url:"demo/deno.jsonxl"},{runtime:"chromium",title:"Chromium Profile",url:"demo/chromium.jsonxl"},{runtime:"edge",title:"Edge EPT",url:"demo/edge.jsonxl"}]}}};function ge(t){let e=0;for(let r=0;r<t.length;r++)e+=t[r];return e}function go(t){let e=t[0];for(let r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}function Me(t){let e=new Uint32Array(t.length);for(let r=0;r<e.length;r++)e[r]=t[r];return e}function yo(t){let e=new Int32Array(t.length);for(let r=0;r<e.length;r++)e[r]=t[r];return e}var Th=64*1024;var mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oe=new Uint8Array(256);for(let t=0;t<mo.length;t++)Oe[mo.charCodeAt(t)]=t;function bo(t){let e=t.length;for(;e>0&&t[e-1]==="=";)e--;let r=new Uint8Array(3*Math.ceil(e/4)),n=0,s=0,o=0,i=0;for(let a=0,l=0;a<e;)n=Oe[t.charCodeAt(a++)&255],s=Oe[t.charCodeAt(a++)&255],o=Oe[t.charCodeAt(a++)&255],i=Oe[t.charCodeAt(a++)&255],r[l++]=n<<2|s>>4,r[l++]=s<<4|o>>2,r[l++]=o<<6|i;return r.subarray(0,(e>>2)*3+(e%4*6>>3))}function Co(t){let e=t[t.length-1].id;if(e!==t.length)for(let r=0;r<t.length;r++)t[r].id>e&&(e=t[r].id);return e}var ho=function(){let t="(?<pkg>(?:[^/]+/)?[^/]+?)",e="(?<pkg>(?:@[^/]+/)?[^/]+?)",r="(?:@(?<version>[^/]+))?",n="(?:/(?<path>.+))?",s={specifier:e+r+n,pkg:t,atpkg:e,version:r,"/version":"(?:/(?<version>[^/]+))?",path:n},o=new RegExp(`\\[(${Object.keys(s).join("|")})\\]`,"g");return function(a){return new RegExp(`^/${a.replace(o,(l,c)=>s[c])}$`,"d")}}();function Q(...t){return t.map(e=>typeof e=="string"?{registry:e,pattern:ho("[specifier]")}:{registry:e.registry,pattern:ho(e.pattern||"[specifier]")})}var ae=!1,Ao=!0,To=!1,So=!0,ko=!1,Eh=Object.freeze([]),ir=48,Eo=new Map([["(root)","root"],["(program)","program"],["(garbage collector)","gc"],["(idle)","idle"],["(logging)","logging"],["(no samples)","no-samples"],["(parser)","parser"],["(bytecode compiler)","bytecode-compiler"],["(compiler)","compiler"],["(atomics wait)","atomics-wait"]]),ar=new Map([["(root)","root"],["(program)","program"],["(garbage collector)","gc"],["(idle)","idle"],["(logging)","logging"],["(no samples)","unknown"],["(parser)","compilation"],["(bytecode compiler)","compilation"],["(compiler)","compilation"],["(atomics wait)","blocking"]]),xo=["script","wasm","regexp","electron","deno","node","internals","program","devtools","chrome-extension","gc","compilation","blocking","root","logging","idle","unknown"],lt=["Unknown","Ignition","Sparkplug","Maglev","Turboprop","Turbofan"],ct={Unknown:"cold",Ignition:"cold",Sparkplug:"warm",Maglev:"hot",Turboprop:"hot",Turbofan:"hot"},wo={fmkadmapgofadopljbjfkapdkoienihi:"React Developer Tools",lmhkpmbekcpmknklioeibfkpmmfibljd:"Redux DevTools",nhdogjmejiglipccpnnnanhbledajbpd:"Vue.js devtools",ienfalfjdbdpebioblfackkekamfmbnh:"Angular DevTools",jdkknkkbebbapilgoeccciglkfbmbnfm:"Apollo Client Devtools",hcikjlholajopgbgfmmlbmifdfbkijdj:"Rempl",pamhglogfolfbmlpnenhpeholpnlcclo:"JsonDiscovery",jlmafbaeoofdegohdhinkhilhclaklkp:"OctoLinker",dhdgffkkebhmkfjojejmpbldmpobfkfo:"Tampermonkey"},lr={"https://jsr.io":{cdn:"jsr",endpoints:Q({registry:"jsr",pattern:"[atpkg][/version][path]"})},"https://npm.jsr.io":{cdn:"jsr",endpoints:Q("npm")},"https://deno.land":{cdn:"denoland",endpoints:Q({registry:"denoland",pattern:"(?<pkg>std)[version][path]"},{registry:"denoland",pattern:"x/[specifier]"})},"https://esm.sh":{cdn:"esmsh",endpoints:Q({registry:"github",pattern:"(v\\d+/)?gh/[pkg][version][path]"},{registry:"jsr",pattern:"jsr/[specifier]"},{registry:"npm",pattern:"(v\\d+/)?[specifier]"})},"https://cdn.jsdelivr.net":{cdn:"jsdelivr",endpoints:Q({registry:"npm",pattern:"npm/[specifier]"},{registry:"github",pattern:"gh/[pkg][version][path]"})},"https://unpkg.com":{cdn:"unpkg",endpoints:Q("npm")},"https://esm.run":{cdn:"jsdelivr",endpoints:Q("npm")},"https://ga.jspm.io":{cdn:"jspm",endpoints:Q({registry:"npm",pattern:"npm:[specifier]"})},"https://cdn.skypack.dev":{cdn:"skypack",endpoints:Q({registry:"npm",pattern:"-/[pkg][version]-[^\\/\\-]+?/[^\\/]+?,mode=(?<path>.+)"},"npm")}},ut=["alive","short-lived","long-lived"];var le={"object-shape":"#ffffffa0",object:"#fee29ca0",array:"#ffee61a0",string:"#78b362a0","concat-string":"#78b362a0","sliced-string":"#78b362a0",script:"#fee29ca0",npm:"#f98e94a0",github:"#666666a0",jsr:"#ffee61a0",denoland:"#ffffffa0",wasm:"#9481ffa0",regexp:"#8db2f8a0",electron:"#9feaf9a0",deno:"#ffffffa0",node:"#78b362a0",internals:"#fcb69aa0",program:"#edfdd1a0",devtools:"#90d7f3a0","chrome-extension":"#7dfacda0","webpack/runtime":"#888888a0",gc:"#f1b6fda0",compilation:"#fc9a9aa0",blocking:"#f2a376a0",root:"#444444a0",logging:"#c8c8c8a0",idle:"#888888a0",unknown:"#888888a0",Unknown:"#888888a0",Ignition:"#b9b9b9a0",Sparkplug:"#e3c685a0",Maglev:"#dba543a0",Turboprop:"#dba543a0",Turbofan:"#f78080a0","heap-number":"#65b4fda0",bigint:"#65b4fda0",closure:"#f2a376a0",code:"#fc9a9aa0",symbol:"#ffee61a0","wasm-object":"#9481ffa0",native:"#fcb69aa0",synthetic:"#fcb69aa0",hidden:"#888888a0","short-lived":"#fee29ca0","long-lived":"#f2a376a0",alive:"#78b362a0",new_space:"#fee29ca0",old_space:"#f2a376a0",code_space:"#fc9a9aa0",code_lo_space:"#fc9a9aa0",new_lo_space:"#fee29ca0",lo_space:"#f2a376a0",shared_space:"#fcb69aa0",shared_lo_space:"#fcb69aa0",read_only_space:"#fee29ca0"},cr=Object.fromEntries(Object.entries(le).map(([t,e])=>[t,[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)]])),_o=Object.fromEntries(Object.keys(le).map((t,e)=>[t,e+1]));function Re(t,e,r,n){let s=new Int32Array(t.length).fill(-1),o=new Int32Array(e.length).fill(-1),{firstChild:i,nextSibling:a}=Io(t),{nodes:l,parent:c}=No(i,a);for(let f=0;f<e.length;f++){let u=e[f];u!==-1&&(s[u]=f)}for(let f=0;f<t.length;f++){let u=s[l[f]];u!==-1&&(o[u]=f),l[f]=r[l[f]]}return{dictionary:n,sourceIdToNode:o,parent:c,nodes:l}}function Io(t,e=new Uint32Array(t.length),r=new Uint32Array(t.length)){for(let n=t.length-1;n>0;n--){let s=t[n];r[n]=e[s],e[s]=n}return{firstChild:e,nextSibling:r}}function wl(t,e,r,n=new Uint32Array(t.length)){let s=new Uint32Array(r);s[t[0]]=t.length+1;for(let o=1;o<t.length;o++)s[t[o]]>=o?n[o]=1:s[t[o]]=o+e[o];return n}function _l(t,e=new Uint32Array(t.length)){for(let r=t.length-1;r>0;r--)e[t[r]]+=e[r]+1;return e}function No(t,e,r=new Uint32Array(t.length),n=new Uint32Array(t.length)){let s=0,o=0;do{let i=t[s],a=e[s],l=o++;if(r[l]=s,i!==0)s=i,n[o]=l;else if(a!==0)s=a,n[o]=n[l];else for(s=0;l=n[l];)if(a=e[r[l]]){n[o]=n[l],s=a;break}}while(s!==0);return{nodes:r,parent:n}}function Pl(t,e,r,n){let s=new Uint32Array(t.length);for(let o=0;o<t.length;o++)s[r[t[o]]]=o,t[o]=n[e[t[o]]];for(let o=0;o<r.length;o++)r[o]=s[r[o]]}function Il(t,e,r,n,s,o,i){let a=new Uint32Array(s),l=new Uint32Array(s),c=new Uint32Array(s),f=new Uint32Array(s);return No(o,i,a,l),Pl(a,e,r,n),_l(l,c),wl(a,c,t,f),{nodes:a,parent:l,subtreeSize:c,nested:f}}function Nl(t,e,r,n,s,o){let i=new Uint32Array(t),a=new Uint32Array(t),l=new Uint32Array(t),c=1;for(let f=0;f<s.length;f++){let u=f,p=n[e[u]],m=u;for(let h=s[f];h!==0;){let C=n[e[h]];if(C===p){let y=s[h],d=o[h];if(r[h]=r[u],m===u?s[m]=y||d:o[m]=y||d,y){if(d){let g=y;for(;o[g]!==0;)g=o[g];o[g]=d}s[h]=0,h=y;continue}}else if(i[C]===u+1){let y=s[h],d=a[C];if(r[h]=r[d],o[m]=o[h],y){if(s[d]!==0){let b=l[C];for(;o[b]!==0;)b=o[b];o[b]=y,l[C]=b}else s[d]=y,l[C]=y;s[h]=0}}else i[C]=u+1,a[C]=h,l[C]=s[h],r[h]=c++,m=h;h=o[h]}}return c}var Po=t=>t;function Ol(t,e=Po,r){if(typeof e!="function")return{dictionary:r,sourceDictionaryMap:e};if(e===Po)return{dictionary:t,sourceDictionaryMap:Uint32Array.from(t,(o,i)=>i)};let n=new Map(r?r.map((o,i)=>[o,i]):void 0),s=Uint32Array.from(t,o=>{let i=e(o),a=n.get(i);return a===void 0&&n.set(i,a=n.size),a});return{dictionary:[...n.keys()],sourceDictionaryMap:s}}function Oo(t,e,r){let n=Date.now(),s=t.nodes,o=new Uint32Array(s.length),{firstChild:i,nextSibling:a}=Io(t.parent),l=Date.now(),c=t.dictionary,{dictionary:f,sourceDictionaryMap:u}=Ol(c,e,r),p=Date.now(),m=Nl(f.length,s,o,u,i,a),h=Date.now(),{nodes:C,parent:y,subtreeSize:d,nested:g}=Il(f.length,s,o,u,m,i,a);return{sourceNodeMap:o,sourceDictionaryMap:u,dictionary:f,nodes:C,parent:y,subtreeSize:d,nested:g,timings:{fcns:l-n,dict:p-l,rollup:h-p,finalize:Date.now()-h}}}function ye(t,e,r,n){let s=Date.now(),{sourceNodeMap:o,dictionary:i,nodes:a,parent:l,subtreeSize:c,nested:f,timings:u}=Oo(e,r,n),p=Date.now(),m=new be(i,new Int32Array(o.buffer),a,l,c,f);return ae&&console.info(`---> buildTree(${t||""})`,u.fcns,"(fc/ns) +",u.dict,"(dict) +",u.rollup,"(rollup) +",u.finalize,"(finalize) +",Date.now()-p,"(create tree) =",Date.now()-s,"ms"),m}function Ml(t,e,r,n){let s=Date.now(),o=Re(t,e.slice(),r,n);return ae&&console.log("buildTreeSource()",Date.now()-s),o}function Mo(t,e,r,n,s=null,o=t){let i=Ml(e,r,n,t.callFrames),a=s!==null?ye("callFramePositions",s):null,l=a!==null?ye("callFrames",a,p=>p.callFrame,o.callFrames):ye("callFrames",i),c=ye("modules",l,t.callFrameToModule,o.modules),f=ye("packages",c,t.moduleToPackage,o.packages),u=ye("categories",f,t.packageToCategory,o.categories);return{treeSource:i,callFramePositionsTree:a,callFramesTree:l,modulesTree:c,packagesTree:f,categoriesTree:u}}var ur=new Uint32Array;function Rl(t,e){let{dictionary:r}=t,n=typeof e=="function"?e:o=>o===e,s=new Uint8Array(r.length);for(let o=0;o<s.length;o++)n(r[o])&&(s[o]=1);return s}var be=class{dictionary;sourceIdToNode;sampleIdToNode;#e;sampleIdToNodeChanged;nodes;parent;subtreeSize;nested;entryNodes;entryNodesOffset;entryNodesCount;root;#t;#r;constructor(e,r,n,s,o,i){this.dictionary=e,this.sourceIdToNode=r,this.sampleIdToNode=ur,this.#e=ur,this.sampleIdToNodeChanged=!1,this.nodes=n,this.parent=s||new Uint32Array(n.length),this.subtreeSize=o||new Uint32Array(n.length),this.nested=i||new Uint32Array(n.length),this.#t=new Map,this.#r=new Map,Object.defineProperty(this,"root",{enumerable:!0,get:()=>this.getEntry(0)}),Object.defineProperties(this,{entryNodes:{enumerable:!0,configurable:!0,get:()=>this.#n().entryNodes},entryNodesOffset:{enumerable:!0,configurable:!0,get:()=>this.#n().entryNodesOffset},entryNodesCount:{enumerable:!0,configurable:!0,get:()=>this.#n().entryNodesCount}})}#n(){let{nodes:e,dictionary:r}=this,n=new Uint32Array(e.length),s=new Uint32Array(r.length),o=new Uint32Array(r.length);for(let i=0;i<e.length;i++)o[e[i]]++;for(let i=0,a=0;i<o.length;i++)s[i]=a,a+=o[i];for(let i=0;i<n.length;i++)n[s[e[i]]++]=i;for(let i=0;i<o.length;i++)s[i]-=o[i];return Object.defineProperties(this,{entryNodes:{value:n},entryNodesOffset:{value:s},entryNodesCount:{value:o}}),this}createEntry(e){let r={nodeIndex:e,value:this.dictionary[this.nodes[e]],parent:null,subtreeSize:this.subtreeSize[e]};return e!==0&&Object.defineProperty(r,"parent",{enumerable:!0,get:()=>this.getEntry(this.parent[e])}),this.subtreeSize[e]&&Object.defineProperty(r,"children",{enumerable:!0,get:()=>this.getChildren(e)}),r}getEntry(e){let r=this.#t.get(e),n;return(r===void 0||(n=r.deref())===void 0)&&this.#t.set(e,new WeakRef(n=this.createEntry(e))),n}getChildren(e){let r=this.#r.get(e),n;return(r===void 0||(n=r.deref())===void 0)&&this.#r.set(e,new WeakRef(n=[...this.map(this.children(e))])),n}getValueSubtreesSize(e,r=!0){let{dictionary:n,nodes:s,subtreeSize:o}=this,i=0,a=0;typeof e!="number"&&(e=n.indexOf(e));for(let l=0;l<s.length;l++)if(s[l]===e){let c=o[l];i+=c,a++,l+=c}return r?i+a:i}setSamplesConvolutionRule(e,{treeSamplesCount:r,dictSamplesCount:n,profilePresence:s}){let{parent:o,nodes:i,sampleIdToNode:a}=this,l=i.slice(),c=this.#e,f=u=>({entry:this.dictionary[i[u]],treeSamplesCount:r[u],dictSamplesCount:n[u],profilePresence:s[i[u]]});for(let u=1;u<l.length;u++){let p=o[u],m=l[p],h=f(u),C=f(p),y=m===p?C:f(m);l[u]=e(h,C,y)===!0?m:u}c===ur&&(this.#e=c=a.slice());for(let u=0;u<a.length;u++)a[u]=l[c[u]];this.sampleIdToNodeChanged=!0}*map(e){for(let r of e)yield this.getEntry(r)}*selectNodes(e,r=!1){let{dictionary:n,nested:s,entryNodes:o,entryNodesOffset:i,entryNodesCount:a}=this;typeof e!="number"&&(e=n.indexOf(e));let l=i[e],c=l+a[e];for(let f=l;f<c;f++){let u=o[f];(r||s[u]===0)&&(yield u)}}*selectBy(e,r=!1){let{nodes:n,nested:s}=this,o=Rl(this,e),i=[];for(let a=0;a<n.length;a++)o[n[a]]&&(r||s[a]===0)&&(yield a);return i}*ancestors(e,r=1/0){let{parent:n}=this,s=n[e];for(;s!==e&&(yield s,!(--r<=0));)e=s,s=n[e]}*children(e){let{subtreeSize:r}=this,n=e+r[e];for(;e<n;)yield++e,e+=r[e]}*subtree(e){let r=e+this.subtreeSize[e];for(;e<r;)yield++e}};var Ro="AGFzbQEAAAABEQJgBH9/f38AYAZ/f39/f38AAhMBB2ltcG9ydHMGbWVtb3J5AgAAAwUEAAAAAQdbBBVhY2N1bXVsYXRlU2FtcGxlQ291bnQAABFhY2N1bXVsYXRlVGltaW5ncwABEXJvbGx1cFRyZWVUaW1pbmdzAAIXcm9sbHVwRGljdGlvbmFyeVRpbWluZ3MAAwrIAgRHAQJ/IABBAnQhBAJAA0AgBEUNASAEQQRrIQQgASAEaigCAEUNACADIAIgBGooAgBBAnRqIQUgBSAFKAIAQQFqNgIADAALCwtJAQN/IABBAnQhBAJAA0AgBEUNASAEQQRrIQQgASAEaigCACIFRQ0AIAMgAiAEaigCAEECdGohBiAGIAYoAgAgBWo2AgAMAAsLC1QBA38gAUECdCEEAkADQCAEQQRMDQEgBEEEayEEIAIgBGooAgAgAyAEaigCAGoiBUUNACADIAAgBGooAgBBAnRqIQYgBiAGKAIAIAVqNgIADAALCwtfAQR/IABBAnQhBgJAA0AgBkUNASAGQQRrIQYgASAGaigCAEECdCEHIAIgB2ooAgAgAyAHaigCAGoiCEUNACAFIAQgBmooAgBBAnRqIQkgCSAJKAIAIAhqNgIADAALCws=";function vl(t,e={}){let r=bo(t),n={imports:e},s=new WebAssembly.Module(r);return new WebAssembly.Instance(s,n)}function Fo(t){let e=vl(Ro,{memory:t}),{accumulateSampleCount:r,accumulateTimings:n,rollupTreeTimings:s,rollupDictionaryTimings:o}=e.exports;return{computeTimings(i,a=!0){a&&(i.samplesCount.fill(0),i.samplesTimes.fill(0)),r(i.timeDeltas.length,i.timeDeltas.byteOffset,i.samples.byteOffset,i.samplesCount.byteOffset),n(i.timeDeltas.length,i.timeDeltas.byteOffset,i.samples.byteOffset,i.samplesTimes.byteOffset)},computeTreeTimings(i,a=!0){a&&(i.samplesCount.fill(0),i.selfTimes.fill(0),i.nestedTimes.fill(0)),n(i.sourceSamplesCount.length,i.sourceSamplesCount.byteOffset,i.sampleIdToNode.byteOffset,i.samplesCount.byteOffset),n(i.sourceSamplesTimes.length,i.sourceSamplesTimes.byteOffset,i.sampleIdToNode.byteOffset,i.selfTimes.byteOffset),s(i.parent.byteOffset,i.selfTimes.length,i.selfTimes.byteOffset,i.nestedTimes.byteOffset)},computeDictionaryTimings(i,a=!0){a&&(i.samplesCount.fill(0),i.selfTimes.fill(0),i.totalTimes.fill(0)),n(i.sourceSamplesCount.length,i.sourceSamplesCount.byteOffset,i.sampleIdToDict.byteOffset,i.samplesCount.byteOffset),n(i.sourceSamplesTimes.length,i.sourceSamplesTimes.byteOffset,i.sampleIdToDict.byteOffset,i.selfTimes.byteOffset),o(i.totalNodes.length,i.totalNodes.byteOffset,i.nodeSelfTimes.byteOffset,i.nodeNestedTimes.byteOffset,i.totalNodeToDict.byteOffset,i.totalTimes.byteOffset)}}}function vo(){function t(e,r,n){for(let s=r.length-1;s>=0;s--)e[n[s]]+=r[s]}return{computeTimings(e,r=!0){let{samples:n,timeDeltas:s,samplesCount:o,samplesTimes:i}=e,a=n.length;r&&(o.fill(0),i.fill(0)),t(i,s,n);for(let l=a-1;l>=0;l--)s[l]!==0&&o[n[l]]++},computeTreeTimings(e,r=!0){let{sourceSamplesCount:n,sourceSamplesTimes:s,sampleIdToNode:o,parent:i,samplesCount:a,selfTimes:l,nestedTimes:c}=e,f=i.length;r&&(a.fill(0),l.fill(0),c.fill(0)),t(a,n,o),t(l,s,o);for(let u=f-1;u>0;u--)c[i[u]]+=l[u]+c[u]},computeDictionaryTimings(e,r=!0){let{sourceSamplesCount:n,sourceSamplesTimes:s,nodeSelfTimes:o,nodeNestedTimes:i,sampleIdToDict:a,totalNodes:l,totalNodeToDict:c,samplesCount:f,selfTimes:u,totalTimes:p}=e,m=l.length;r&&(f.fill(0),u.fill(0),p.fill(0)),t(f,n,a),t(u,s,a);for(let h=m-1;h>=0;h--){let C=l[h],y=o[C],d=i[C];p[c[h]]+=y+d}}}}var Lo=vo(),{computeTreeTimings:Vh}=Lo;function Do(t,e){let r=0,n=t.length-1;for(;r<=n;){let s=r+n>>1,o=t[s];if(o===e)return s;o<e?r=s+1:n=s-1}return n===-1?0:n}function Dl(t,e){for(let r=1;r<t.length;r++)t[r]=e[r-1]+t[r-1]}function Bo(t,e,r=!0){t.computeTimings(e.samples,r);for(let n of e.tree)t.computeTreeTimings(n,r);for(let n of e.dict)t.computeDictionaryTimings(n,r)}var Fe=class{#e=[];subscribe(e){let r={fn:e};return this.#e.push(r),()=>{r!==null&&(this.#e=this.#e.filter(n=>n!==r),r=null)}}notify(){for(let{fn:e}of this.#e)e()}},ft=class extends Fe{samples;timeDeltas;timestamps;samplesCount;samplesTimes;constructor(e,r,n,s,o){super(),this.samples=e,this.timeDeltas=r,this.timestamps=n,this.samplesCount=s,this.samplesTimes=o}},fr=class extends ft{samplesMask;originalTimeDeltas;rangeStart=null;rangeEnd=null;rangeSamples=null;constructor(e,r,n,s,o,i){super(e,n,s,o,i),this.samplesMask=r,this.originalTimeDeltas=n}resetRange(){this.rangeStart=null,this.rangeEnd=null,this.rangeSamples=null,this.timeDeltas!==this.originalTimeDeltas&&(this.timeDeltas.set(this.originalTimeDeltas),this.originalTimeDeltas=this.timeDeltas)}setRange(e,r){let{timeDeltas:n,timestamps:s}=this,{originalTimeDeltas:o}=this;n===o&&(this.originalTimeDeltas=o=n.slice()),n.fill(0);let i=Do(s,e),a=Do(s,r);this.rangeStart=e,this.rangeEnd=r,this.rangeSamples=a-i+1,i!==a?(n[i]=o[i]-(e-s[i]),n[a]=r-s[a],i+1<a&&n.set(o.subarray(i+1,a),i+1)):n[i]=r-e}},Ce=class extends Fe{tree;samplesCount;selfTimes;nestedTimes;constructor(e,r,n,s){super(),this.tree=e,this.samplesCount=r,this.selfTimes=n,this.nestedTimes=s}getTimings(e){let r=this.samplesCount[e],n=this.selfTimes[e],s=this.nestedTimes[e];return{node:this.tree.getEntry(e),samples:r,selfTime:n,nestedTime:s,totalTime:n+s}}getValueTimings(e){let{tree:r,samplesCount:n,selfTimes:s,nestedTimes:o}=this,{nested:i}=r,a=0,l=0,c=0;for(let f of r.selectNodes(e,!0))a+=n[f],l+=s[f],i[f]===0&&(c+=o[f]);return{value:r.dictionary[e],samples:a,selfTime:l,nestedTime:c,totalTime:l+c}}};var pt=class extends Fe{entries;entriesMap;samplesCount;selfTimes;totalTimes;constructor(e,r,n,s){super(),this.samplesCount=r,this.selfTimes=n,this.totalTimes=s,this.entries=e.map((o,i)=>({entryIndex:i,entry:o,samples:r[i],selfTime:n[i],nestedTime:s[i]-n[i],totalTime:s[i]})),this.entriesMap=this.entries.reduce((o,i)=>o.set(i.entry,i),new Map)}getEntry(e){return this.entriesMap.get(e)||null}sync(){let{entries:e,samplesCount:r,selfTimes:n,totalTimes:s}=this;for(let o=0;o<e.length;o++){let i=e[o],a=n[o],l=s[o];i.samples=r[o],i.selfTime=a,i.nestedTime=l-a,i.totalTime=l}}},pr=class{entries;entriesMap;firstSeen;lastSeen;constructor(e,r,n){let{dictionary:s,nodes:o,parent:i,sampleIdToNode:a}=e,l=new Uint32Array(o.length).fill(4294967295),c=new Uint32Array(o.length),f=new Uint32Array(s.length).fill(4294967295),u=new Uint32Array(s.length);for(let p=0;p<n.length;p++){let m=a[n[p]],h=r[p];l[m]>h&&(l[m]=h),c[m]<h&&(c[m]=h)}for(let p=o.length-1;p>0;p--){let m=i[p],h=o[p],C=l[p],y=c[p];l[m]>C&&(l[m]=C),f[h]>C&&(f[h]=C),c[m]<y&&(c[m]=y),u[h]<y&&(u[h]=y)}this.firstSeen=l,this.lastSeen=c,this.entries=s.map((p,m)=>({entryIndex:m,entry:p,firstSeen:f[m],lastSeen:u[m]})),this.entriesMap=this.entries.reduce((p,m)=>p.set(m.entry,m),new Map)}};function Bl(t){let{nodes:e,nested:r,sampleIdToNode:n}=t,s=new Uint32Array(e.length),o=new Uint32Array(e.length),i=0;for(let a=0;a<e.length;a++)r[a]===0&&(o[i]=e[a],s[i]=a,i++);return{tree:t,sampleIdToDict:n.map(a=>e[a]),totalNodes:s.slice(0,i),totalNodeToDict:o.slice(0,i)}}function Ll(t,e,r,n=!0){let s=r.map(Bl),o=r[0].sampleIdToNode.length,i=2*e.length+t.length+3*o;for(let{tree:h,sampleIdToDict:C,totalNodes:y,totalNodeToDict:d}of s)i+=h.sampleIdToNode.length+h.parent.length+3*h.nodes.length,i+=C.length+y.length+d.length+3*h.dictionary.length;let a=n?new WebAssembly.Memory({initial:Math.ceil(4*i/65535)}):new Uint8Array(4*i),l=a?new Uint32Array(a.buffer):null,c=0,f={timeDeltas:p(e),timestamps:m(e.length),samples:p(t),samplesMask:m(o),samplesCount:m(o),samplesTimes:m(o)},u={memory:a,samples:f,tree:[],dict:[]};Dl(f.timestamps,f.timeDeltas);for(let{tree:h,sampleIdToDict:C,totalNodes:y,totalNodeToDict:d}of s){let g={tree:h,sourceSamplesCount:f.samplesCount,sourceSamplesTimes:f.samplesTimes,sampleIdToNode:h.sampleIdToNode=p(h.sampleIdToNode),parent:p(h.parent),samplesCount:m(h.nodes.length),selfTimes:m(h.nodes.length),nestedTimes:m(h.nodes.length)},b={dictionary:h.dictionary,sourceSamplesCount:f.samplesCount,sourceSamplesTimes:f.samplesTimes,nodeSelfTimes:g.selfTimes,nodeNestedTimes:g.nestedTimes,sampleIdToDict:p(C),totalNodes:p(y),totalNodeToDict:p(d),samplesCount:m(h.dictionary.length),selfTimes:m(h.dictionary.length),totalTimes:m(h.dictionary.length)};u.tree.push(g),u.dict.push(b)}return u;function p(h){return l===null?h:(l.set(h,c),l.subarray(c,c+=h.length))}function m(h){return l===null?new Uint32Array(h):l.subarray(c,c+=h)}}function Uo(t,e,r){let n=Ao,s=Ll(t,e,r,n),{memory:o,samples:i,tree:a,dict:l}=s,c=n&&o?Fo(o):Lo;Bo(c,s,!1);let f=new ft(t,e,i.timestamps,i.samplesCount.slice(),i.samplesTimes.slice()),u=new fr(i.samples,i.samplesMask,i.timeDeltas,i.timestamps,i.samplesCount,i.samplesTimes),p=a.map(A=>new Ce(A.tree,A.samplesCount.slice(),A.selfTimes.slice(),A.nestedTimes.slice())),m=a.map(A=>new Ce(A.tree,A.samplesCount,A.selfTimes,A.nestedTimes)),h=l.map(A=>new pt(A.dictionary,A.samplesCount.slice(),A.selfTimes.slice(),A.totalTimes.slice())),C=l.map(A=>new pt(A.dictionary,A.samplesCount,A.selfTimes,A.totalTimes)),y=a.map(A=>new pr(A.tree,i.timestamps,i.samples)),{setRange:d,resetRange:g}=u,b=[u,...m,...C],S=()=>{for(let A=0;A<l.length;A++){let{sampleIdToNode:E,tree:{nodes:T,sampleIdToNodeChanged:x}}=a[A],{sampleIdToDict:w}=l[A];if(x){for(let _=0;_<E.length;_++)w[_]=T[E[_]];a[A].tree.sampleIdToNodeChanged=!1}}Bo(c,s),C.forEach(A=>A.sync()),b.forEach(A=>A.notify())};return u.setRange=function(...A){d.call(this,...A),S()},u.resetRange=function(...A){g.call(this,...A),S()},{recomputeTimings:S,samplesTimings:f,samplesTimingsFiltered:u,treeTimings:p,treeTimestamps:y,treeTimingsFiltered:m,dictionaryTimings:h,dictionaryTimingsFiltered:C}}function Ul(t,e){let{dictionary:r}=t,n=typeof e=="function"?e:o=>o===e,s=new Uint8Array(r.length);for(let o=0;o<s.length;o++)n(r[o])&&(s[o]=1);return s}function mt(t,e){let{dictionary:r,sampleIdToNode:n,nodes:s}=t,o=typeof e=="function"?e:a=>a===e,i=new Uint8Array(n.length);for(let a=0;a<i.length;a++){let l=n[a];o(r[s[l]],a)&&(i[a]=1)}return i}var jo={tree(t,e,r=n=>n){let n=t.map(o=>({parent:null,value:o,children:[]})),s={value:null,children:[]};for(let o of n){let i=e(o.value),a=Number.isInteger(i)&&i>=0&&i<n.length?n[i]:s;a.children.push(o),o.parent=a!==s?a:null,o.value=r(o.value)}return s.children},select(t,e,...r){let n=null;if(t instanceof Ce&&(n=t,t=t.tree),t instanceof be){let s;switch(e){case"nodes":s=typeof r[0]=="function"?t.selectBy(...r):t.selectNodes(...r);break;case"children":s=t.children(...r);break;case"subtree":s=t.subtree(...r);break;case"parent":s=t.ancestors(r[0],1);break;case"ancestors":s=t.ancestors(...r);break}if(s!==void 0){if(n){let o=[];for(let i of t.map(s)){let a=n.selfTimes[i.nodeIndex],l=n.nestedTimes[i.nodeIndex];o.push({node:i,selfTime:a,nestedTime:l,totalTime:a+l})}return o}return[...t.map(s)]}}},subtreeSamples(t,e,r=!1){let n=t.sampleIdToNode,s=new Set(n),o=new Set,i=new Set,a=new Set,l=new Uint8Array(n.length),c=typeof e=="number"?e:t.dictionary.indexOf(e);for(let f of t.selectNodes(e)){r&&s.has(f)&&o.add(f);for(let u of t.subtree(f))s.has(u)&&(r||t.nodes[u]!==c)&&(o.add(u),i.add(t.dictionary[t.nodes[u]]))}for(let f=0;f<n.length;f++)o.has(n[f])&&(l[f]=1,a.add(f));return{entries:[...i],selectedSamples:a,mask:l,sampleSelector:(f,u)=>a.has(u)}},getTimings(t,e){return typeof e!="number"&&(e=t.tree.dictionary.indexOf(e)),t.getTimings(e)},getValueTimings(t,e){return t.getValueTimings(e)},nestedTimings(t,e,r){let n=t.tree,s=r||n,o=typeof e=="number"?e:s.dictionary.indexOf(e),i=new Uint32Array(n.dictionary.length),a=s.nodes,l=s.sampleIdToNode,c=new Uint32Array(s.nodes.length),f=new Set,u=[];for(let p of s.selectNodes(o))for(let m of s.subtree(p))a[m]!==o&&(c[m]=1);for(let p=0;p<l.length;p++)if(c[l[p]]){let m=n.sampleIdToNode[p];f.has(m)||(i[n.nodes[m]]+=t.selfTimes[m],f.add(m))}for(let p=0;p<i.length;p++)i[p]>0&&u.push({entry:n.dictionary[p],selfTime:i[p]});return u},selectBy(t,e){let{nodes:r}=t,n=Ul(t,e),s=[];for(let o=0;o<r.length;o++)n[r[o]]&&s.push(t.getEntry(o));return s},timestamps(t,e,r=this.context.currentProfile){let n;switch(e){case"call-frame":n=r?.callFramesTreeTimestamps.entriesMap;break;case"module":n=r?.modulesTreeTimestamps.entriesMap;break;case"package":n=r?.packagesTreeTimestamps.entriesMap;break;case"category":n=r?.categoriesTreeTimestamps.entriesMap;break}if(n)return n.get(t)}};function $o(t,e,r,n,s){let o=new Float64Array(t),i=s/t,a=i,l=0;for(let c=0,f=0;c<r.length;c++){let u=e[r[c]],p=n[c];if(f+p<a)u&&(o[l]+=p);else{if(u){let m=a-f,h=p-m,C=1;for(;h>i;)o[l+C]=i,C++,h-=i;o[l]+=m,o[l+C]=h}for(;f+p>a;)l+=1,a+=i}f+=p}return o}var Vo={binCallsFromMask(t,e=500,r=this.context.currentProfile){let{samples:n,timeDeltas:s,totalTime:o}=r,i=$o(e,t,n,s,o);return Array.from(i)},binCalls(t,e,r=500,n=this.context.currentProfile){let{samples:s,timeDeltas:o,totalTime:i}=n,a=mt(t,e),l=$o(r,a,s,o,i);return Array.from(l)},binHeapEvents(t,e="new",r=500,n=this.context.currentProfile){let{totalTime:s}=n,o=new Float64Array(r),i=s/r,a=i,l=0;for(let c=0;c<t.length;c++){let{tm:f,event:u,size:p}=t[c];if(!(f===0||u!==e)){for(;f>a;)l++,a+=i;o[l]+=p}}return o},binHeapTotal(t,e=500,r=0,n=this.context.currentProfile){let{totalTime:s}=n,o=new Float64Array(e),i=s/e,a=i,l=0,c=r||0,f=c;for(let u=0;u<t.length;u++){let{tm:p,event:m,size:h}=t[u];if(p!==0){for(;p>a;)o[l]=f,f=c,l++,a+=i;c+=m==="new"?h:-h,f=Math.max(c,f)}}return o[l]=f,l<e-1&&o.fill(c,l+1),o},binAllocations(t,e,r,n=500,s=this.context.currentProfile||this.context.data.currentProfile){let{totalTime:o}=s,i=Array.from({length:r.length},()=>new Uint32Array(n)),a=o/n,l=0,c=0;if(e)for(let f=0;f<t.length;f++){let u=i[e[f]],p=t[f];for(;l+p>=a;){let m=a-l;u[c++]+=m,p-=m,l=0}u[c]+=p,l+=p}return i.map((f,u)=>({name:r[u],color:le[r[u]],step:a,value:ge(f),total:o,bins:f}))},binScriptFunctionCodes(t,e=500,r=this.context.currentProfile){let{totalTime:n}=r,s=new Uint32Array(e),o=n/e,i=o,a=0;for(let l=0;l<t.length;l++){let{tm:c}=t[l];for(;c>i;)a++,i+=o;s[a]+=1}return a<e-1&&s.fill(s[a],a+1),s},binScriptFunctionCodesTotal(t,e=500,r=this.context.currentProfile){let{totalTime:n}=r,s=n/e,o=new Map,i=new Map,a=new Uint32Array(e),l=s,c=0;for(let f of lt)o.set(f,new Uint32Array(e));for(let f=0;f<t.length;f++){let{tm:u,tier:p,callFrameCodes:m}=t[f];for(;u>l;){c++,a[c]=a[c-1];for(let C of o.values())C[c]=C[c-1];l+=s}let h=i.get(m);h===void 0?(o.get(p)[c]++,a[c]++):p!==h&&(o.get(h)[c]--,o.get(p)[c]++),i.set(m,p)}if(c<e-1){a.fill(a[c],c+1);for(let f of o.values())f.fill(f[c],c+1)}return{byTier:[...o.entries()],fnCount:a}}};function jl(t){switch(t){case"ignition":return"Ignition";case"turbofan":case"TurboFan":return"Turbofan";case"baseline":return"Sparkplug";case"maglev":return"Maglev"}return`Unknown(${t})`}function qo(t){let{disassemble:e}=t;if(!e)return;let r=[],n=null,s="Ignition",o="INTERPRETER";if(e.startsWith("kind = ")){let i=e.split(/\n{2,}/);if(i){let a=i[0],l=Object.fromEntries(a.split(`
`).map(c=>c.split(" = ")));o=l.kind||"UNKNOWN",s=jl(l.compiler),n=zo(i[1]).content;for(let c=2;c<i.length;c++)r.push(zo(i[c]))}}else{let i=e.match(/^(.+\s+\d+\n)+/);if(i){let a=i[0].length,l=e.indexOf(`
Constant pool`,a);l!==-1&&(n=e.slice(a,l))}}return{kind:o,compiler:s,instructions:n,sections:r,raw:e.trim()}}function zo(t){let e=t.indexOf(`
`),r=t.slice(0,e!==-1?e:t.length),n=t.slice(e+1);return{header:r,content:n}}function Jo(t,e){if(!(!ko||!Array.isArray(t.ic)))return t.ic.map(r=>{let n=r.offset,s=t.source?.start??-1,o=-1;if(e!==null){let i=dt(e.positions,n);o=e.positions[i+2],s=e.positions[i+1]}return{tm:r.tm,type:r.type,inliningId:o,scriptOffset:s,oldState:r.oldState,newState:r.newState,map:r.map,key:r.key,modifier:r.modifier,slowReason:r.slowReason}})}function mr(t){switch(t){case"Ignition":case"Unopt":return"Ignition";case"Baseline":case"Sparkplug":return"Sparkplug";case"Maglev":return"Maglev";case"Builtin":case"Opt":case"Turbofan":return"Turbofan";case"Turboprop":return"Turboprop";default:return"Unknown"}}function Go(t,e,r){let n=new Map;for(let s=0;s<t.length;s++){let o=e[s],i=t[s];if(o===0||typeof i.func!="number")continue;let a=r[s],l=i.source||null,c=n.get(o);c===void 0&&n.set(o,c={callFrame:o,codes:[]}),c.codes.push({tm:i.tm||0,tier:mr(i.kind),size:i.size||0,positions:l?.positions||"",inlined:l?.inlined||"",fns:a?.fns||[],deopt:i.deopt,disassemble:qo(i),ic:Jo(i,a)})}return[...n.values()]}function ve(t){let e=[],r=!1,n=0;for(let s=1;s<t.length;s++){let o=t.charCodeAt(s);switch(o){case 67:case 70:r?e.push(n):e.push(n,-1),r=!1,n=0;break;case 79:e.push(n),n=0;break;case 73:e.push(n),r=!0,n=0;break;default:n=n*10+(o-48)}}return r?e.push(n):e.push(n,-1),e}function dt(t,e){let r=0,n=(t.length/3|0)-1;for(;r<=n;){let s=r+n>>1,o=s*3,i=t[o];if(i===e)return o;i<e?r=s+1:n=s-1}return n===-1?0:n*3}function Ho(t,e=null){return t.map(r=>{let n=r.func,s=r.source;if(n===void 0||s===void 0)return null;let o=s.positions;if(!o)return null;let i=mr(r.kind)!=="Ignition",a=ve(o),l=a[a.length-3],c=s.inlined?ve(s.inlined):null,f=c!==null&&Array.isArray(s.fns)&&s.fns.length>0?s.fns.slice():[];if(c!==null){for(let u=0;u<f.length;u++){let p=f[u];if(p===null||p<0)return console.error("Broken positions",r,{positions:a,inlined:c,fns:s.fns}),null;e!==null&&(f[u]=e[p])}for(let u=0;u<c.length;u+=3){let p=f[c[u]]??null;if(p===null||p<0)return console.error("Broken positions",r,{positions:a,inlined:c}),null;c[u]=p}}return{fistCode:a[0],lastCode:l,pcOnNextInstruction:i,positions:a,inlined:c,fns:f}})}var Ae={parsePositions(t,e=0){if(typeof t!="string"||t==="")return[];let r=ve(String(t)),n=[],s=null;for(let o=0;o<r.length;o+=3){let i=r[o],a=r[o+1],l=r[o+2];s!==null&&(s.size=i-s.code),n.push(s={index:n.length,code:i,offset:a,inline:l!==-1?l:void 0,size:-1})}return e>0&&s!==null&&(s.size=Math.max(e-s.code,-1)),n},parseInlined(t,e){if(typeof t!="string"||t==="")return[];let r=ve(t),n=[];for(let s=0;s<r.length;s+=3){let o=r[s],i=r[s+1],a=r[s+2],l={index:n.length,fn:o,offset:i,parent:a!==-1?a:void 0};n.push(l),Array.isArray(e)&&(l.callFrame=e[o]||null)}return n},inlinedPath(t,e,r){let n={callFrame:e,offset:-1,parent:null},s=[n];for(let{callFrame:o,offset:i}of t)n.offset=i,n={callFrame:o,offset:-1,parent:n},s.push(n);return n.offset=r,s},inlinedMatrix(t=[]){let e=new Map,r=[],n=[];for(let i=0;i<t.length;i++){let a=t[i],l=this.method("parseInlined",a.inlined),c=[];for(let f of l){let u=a.fns[f.fn],p=f.parent===void 0?null:c[f.parent],m=p!==null?`${f.offset}-${u.id}-${p.id}`:`${f.offset}-${u.id}`,h=e.get(m);h===void 0&&(e.set(m,h={id:e.size,value:{offset:f.offset,callFrame:u,code:a},parent:p,children:[],codePresence:Array.from(t,()=>0)}),p!==null?p.children.push(h):r.push(h)),h.codePresence[i]=1,c.push(h)}}for(let i of s(r)){let a=[];o(i,u=>{a.push(u),s(u.children)});let l=[],c=a.length,f=0;for(let u=0;u<t.length;u++){let p=Array.from(a,C=>C.codePresence[u]),m=p.join(""),h=this.method("sum",p);h!==0&&h<c&&(c=h),h>f&&(f=h),l.push({hash:m,presence:p,code:t[u]})}n.push({offset:i.value.offset,tree:i,linear:a.map(u=>u.value),min:c,max:f,snapshots:l})}return n;function s(i){return i.length>1&&i.sort((a,l)=>a.value.offset-l.value.offset),i}function o(i,a){a(i);for(let l of i.children)o(l,a)}}};function k(t,e,r){return{name:t,params:e,description:r}}var $l=[k("Abort",["abort_reason"],"Aborts execution with a runtime error."),k("Add",["src","feedback_slot"],"Adds the value in register `src` to the accumulator using feedback in `feedback_slot`."),k("AddSmi",["imm","feedback_slot"],"Adds the immediate value `imm` to the accumulator using feedback in `feedback_slot`."),k("BitwiseAnd",["src","feedback_slot"],"Performs a bitwise AND of the accumulator and register `src` using feedback in `feedback_slot`."),k("BitwiseAndSmi",["imm","feedback_slot"],"Performs a bitwise AND of the accumulator and immediate value `imm` using feedback in `feedback_slot`."),k("BitwiseNot",[],"Performs a bitwise NOT on the accumulator."),k("BitwiseOr",["src","feedback_slot"],"Performs a bitwise OR of the accumulator and register `src` using feedback in `feedback_slot`."),k("BitwiseOrSmi",["imm","feedback_slot"],"Performs a bitwise OR of the accumulator and immediate value `imm` using feedback in `feedback_slot`."),k("BitwiseXor",["src","feedback_slot"],"Performs a bitwise XOR of the accumulator and register `src` using feedback in `feedback_slot`."),k("BitwiseXorSmi",["imm","feedback_slot"],"Performs a bitwise XOR of the accumulator and immediate value `imm` using feedback in `feedback_slot`."),k("Call",["callable","receiver","arg_count","feedback_slot"],"Calls the JSFunction or Callable in register `callable` with receiver in register `receiver` and `arg_count` arguments in subsequent registers. Collects feedback in `feedback_slot`."),k("CallAnyReceiver",["callable","receiver","arg_count","feedback_slot"],"Calls a JSFunction or Callable in register `callable` with receiver in register `receiver` and `arg_count` arguments in subsequent registers. Collects feedback in `feedback_slot`."),k("CallJSRuntime",["context_index","receiver","arg_count"],"Calls the JS runtime function specified by `context_index` with receiver in register `receiver` and `arg_count` arguments in subsequent registers."),k("CallProperty",["receiver","arg_count","feedback_slot"],"Calls a property function on `receiver` with `arg_count` arguments in subsequent registers. Collects feedback in `feedback_slot`."),k("CallProperty0",["receiver","feedback_slot"],"Calls a property function on `receiver` with no arguments. Collects feedback in `feedback_slot`."),k("CallProperty1",["receiver","arg0","feedback_slot"],"Calls a property function on `receiver` with one argument `arg0`. Collects feedback in `feedback_slot`."),k("CallProperty2",["receiver","arg0","arg1","feedback_slot"],"Calls a property function on `receiver` with two arguments: `arg0` and `arg1`. Collects feedback in `feedback_slot`."),k("CallRuntime",["function_id","first_arg","arg_count"],"Calls the runtime function `function_id` with arguments starting at register `first_arg` (`arg_count` arguments)."),k("CallRuntimeForPair",["function_id","first_arg","arg_count","first_return"],"Calls the runtime function `function_id` returning a pair, with arguments starting at `first_arg` (`arg_count` arguments). Stores results in `first_return` and `first_return + 1`."),k("CallUndefinedReceiver",["callable","arg_count","feedback_slot"],"Calls the JSFunction or Callable in register `callable` with undefined as receiver and `arg_count` arguments in subsequent registers. Collects feedback in `feedback_slot`."),k("CallUndefinedReceiver0",["callable","feedback_slot"],"Calls the JSFunction or Callable in register `callable` with undefined as receiver and no arguments. Collects feedback in `feedback_slot`."),k("CallUndefinedReceiver1",["callable","arg0","feedback_slot"],"Calls the JSFunction or Callable in register `callable` with undefined as receiver and one argument `arg0`. Collects feedback in `feedback_slot`."),k("CallUndefinedReceiver2",["callable","arg0","arg1","feedback_slot"],"Calls the JSFunction or Callable in register `callable` with undefined as receiver and two arguments: `arg0`, `arg1`. Collects feedback in `feedback_slot`."),k("CallWithSpread",["callable","first_arg","arg_count","feedback_slot"],"Calls the JSFunction or Callable in register `callable` with receiver in `first_arg` and `arg_count - 1` arguments in subsequent registers. The last argument is always a spread. Collects feedback in `feedback_slot`."),k("CloneObject",["source_idx","flags","feedback_slot"],"Allocates a new JSObject, copying enumerable own properties from the object in constant pool at `source_idx`. Feedback collected in `feedback_slot`."),k("Construct",["constructor","first_arg","arg_count","feedback_slot"],"Invokes the constructor in register `constructor` with the first argument in `first_arg` and `arg_count` arguments in subsequent registers. The new.target is in the accumulator. Collects feedback in `feedback_slot`."),k("ConstructForwardAllArgs",["constructor","feedback_slot"],"Invokes the constructor in register `constructor` with arguments implicitly forwarded from the caller. The new.target is in the accumulator. Collects feedback in `feedback_slot`."),k("ConstructWithSpread",["constructor","first_arg","arg_count","feedback_slot"],"Invokes the constructor in register `constructor` with the first argument in `first_arg` and `arg_count` arguments in subsequent registers. The last argument is always a spread. The new.target is in the accumulator. Collects feedback in `feedback_slot`."),k("CreateArrayFromIterable",[],"Spreads the iterable from the accumulator into a new JSArray."),k("CreateArrayLiteral",["element_idx","literal_idx","flags"],"Creates an array literal for literal index `literal_idx` with flags `flags` and constant elements in `element_idx`."),k("CreateBlockContext",["index"],"Creates a new block context with the scope info constant at `index`."),k("CreateCatchContext",["exception","scope_info_idx"],"Creates a new catch block context with `exception` in a register and scope info at `scope_info_idx`."),k("CreateClosure",["index","slot","flags"],"Creates a new closure for SharedFunctionInfo at constant pool position `index` with pretenuring controlled by `flags`."),k("CreateEmptyArrayLiteral",["literal_idx"],"Creates an empty JSArray literal for literal index `literal_idx`."),k("CreateEmptyObjectLiteral",[],"Creates an empty JSObject literal."),k("CreateEvalContext",["scope_info_idx","slots"],"Creates a new context for an eval closure, with scope info at `scope_info_idx` and `slots` variables."),k("CreateFunctionContext",["scope_info_idx","slots"],"Creates a new context for a function closure, with scope info at `scope_info_idx` and `slots` variables."),k("CreateMappedArguments",[],"Creates a new mapped arguments object."),k("CreateObjectLiteral",["element_idx","literal_idx","flags"],"Creates an object literal for literal index `literal_idx` with flags `flags` and constant elements in `element_idx`."),k("CreateRegExpLiteral",["pattern_idx","literal_idx","flags"],"Creates a regular expression literal for literal index `literal_idx` with pattern at `pattern_idx` and flags `flags`."),k("CreateRestParameter",[],"Creates a new rest parameter array."),k("CreateUnmappedArguments",[],"Creates a new unmapped arguments object."),k("CreateWithContext",["object","scope_info_idx"],"Creates a new context for a with-statement using the object in register `object` and scope info at `scope_info_idx`."),...Array.from({length:7},(t,e)=>k("DebugBreak"+e,[],`Inserts a debug break with ${e||"zero"} operand slot${e!==1?"s":""}. Used for debugging.`)),k("DebugBreakExtraWide",[],"Inserts a debug break with extra-wide (32-bit) operand support. Used for debugging."),k("DebugBreakWide",[],"Inserts a debug break with wide (16-bit) operand support. Used for debugging."),k("Debugger",[],"Calls the runtime to handle a debugger statement."),k("Dec",["feedback_slot"],"Decrements the accumulator by one using feedback in `feedback_slot`."),k("DefineKeyedOwnProperty",["object","key","flags","feedback_slot"],"Defines an own property on `object` with key `key` and value from the accumulator. Flags in `flags`. Uses feedback in `feedback_slot`."),k("DefineKeyedOwnPropertyInLiteral",["object","name","flags","feedback_slot"],"Defines a property `name` in `object` with value from the accumulator. Property attributes and set_function_name flag in `flags`. Feedback in `feedback_slot`."),k("DefineNamedOwnProperty",["object","name_index","feedback_slot"],"Defines an own property on `object` with name from constant pool entry `name_index` and value from the accumulator. Feedback in `feedback_slot`."),k("DeletePropertySloppy",["object"],"Deletes the property specified in the accumulator from `object` using sloppy mode semantics."),k("DeletePropertyStrict",["object"],"Deletes the property specified in the accumulator from `object` using strict mode semantics."),k("Div",["src","feedback_slot"],"Divides the accumulator by the value in register `src` using feedback in `feedback_slot`."),k("DivSmi",["imm","feedback_slot"],"Divides the accumulator by the immediate value `imm` using feedback in `feedback_slot`."),k("Exp",["src","feedback_slot"],"Raises the accumulator to the power of the value in register `src` using feedback in `feedback_slot`."),k("ExpSmi",["imm","feedback_slot"],"Raises the accumulator to the power of the immediate value `imm` using feedback in `feedback_slot`."),k("ExtraWide",[],"Prefix bytecode indicating the next bytecode has extra-wide (32-bit) operands."),k("FindNonDefaultConstructorOrConstruct",["this_function","new_target","output"],"Walks the prototype chain from `this_function`'s super constructor, storing results in `output`."),k("ForInContinue",["index","cache_length"],"Returns false if the end of the enumerable properties has been reached."),k("ForInEnumerate",["receiver"],"Enumerates enumerable keys of `receiver` and stores keys to enumerate in the accumulator."),k("ForInNext",["receiver","index","cache_info_pair","feedback_slot"],"Returns the next enumerable property in the accumulator."),k("ForInPrepare",["cache_info_triple"],"Prepares state for for..in loop execution, writing results into registers starting at `cache_info_triple`."),k("ForInStep",["index"],"Increments the loop counter in register `index` and stores the result in the accumulator."),k("GetEnumeratedKeyedProperty",["receiver","index","feedback_slot"],"Loads the property at index `index` from `receiver` into the accumulator using feedback in `feedback_slot`. Used for enumerator-based property access."),k("GetIterator",["object"],"Retrieves and calls object[Symbol.iterator], storing the result in the accumulator. Throws if result is not a JSReceiver."),k("GetKeyedProperty",["object","feedback_slot"],"Loads a property from `object` with the key in the accumulator, using feedback in `feedback_slot`."),k("GetNamedProperty",["object","name_index","feedback_slot"],"Loads a property from `object` with the name from constant pool entry `name_index`, using feedback in `feedback_slot`."),k("GetNamedPropertyFromSuper",["receiver","name_index","feedback_slot"],"Loads a property from the prototype of `receiver` (super), name from constant pool entry `name_index`, using feedback in `feedback_slot`."),k("GetSuperConstructor",[],"Gets the super constructor from the object referenced by the accumulator."),k("GetTemplateObject",["descriptor_idx","literal_idx"],"Creates and returns the template object for tagged templates, using descriptor at `descriptor_idx` and literal at `literal_idx`."),k("Illegal",[],"Invalid bytecode; aborts execution if dispatched."),k("Inc",["feedback_slot"],"Increments the accumulator by one using feedback in `feedback_slot`."),k("IncBlockCounter",["slot"],"Increments the execution count for the given slot (used for code coverage)."),k("InvokeIntrinsic",["function_id","first_arg","arg_count"],"Calls the intrinsic function `function_id` with arguments starting at `first_arg` (`arg_count` arguments)."),k("Jump",["imm"],"Jumps by the number of bytes specified by the immediate operand `imm`."),k("JumpConstant",["idx"],"Jumps by the number of bytes from the Smi at constant pool entry `idx`."),k("JumpIfFalse",["imm"],"Jumps by the immediate offset if the accumulator is false (requires a boolean)."),k("JumpIfFalseConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry `idx` if the accumulator is false (requires a boolean)."),k("JumpIfForInDone",["imm","index","cache_length"],"Jumps by the immediate offset `imm` if the value in register `index` is greater than or equal to the end index for ForIn enumeration."),k("JumpIfForInDoneConstant",["idx","index","cache_length"],"Jumps by the number of bytes in the Smi at constant pool entry `idx` if the value in register `index` is greater than or equal to the end index for ForIn enumeration."),k("JumpIfJSReceiver",["imm"],"Jumps by the immediate offset if the accumulator is a JSReceiver."),k("JumpIfJSReceiverConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry `idx` if the accumulator is a JSReceiver."),k("JumpIfNotNull",["imm"],"Jumps by the immediate offset if the accumulator is not null."),k("JumpIfNotNullConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry `idx` if the accumulator is not null."),k("JumpIfNotUndefined",["imm"],"Jumps by the immediate offset if the accumulator is not undefined."),k("JumpIfNotUndefinedConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry `idx` if the accumulator is not undefined."),k("JumpIfNull",["imm"],"Jumps by the immediate offset if the accumulator is null."),k("JumpIfNullConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry `idx` if the accumulator is null."),k("JumpIfToBooleanFalse",["imm"],"Jumps by the immediate offset if the accumulator coerces to false."),k("JumpIfToBooleanFalseConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry idx if the accumulator coerces to false."),k("JumpIfToBooleanTrue",["imm"],"Jumps by the immediate offset if the accumulator coerces to true."),k("JumpIfToBooleanTrueConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry idx if the accumulator coerces to true."),k("JumpIfTrue",["imm"],"Jumps by the immediate offset if the accumulator is true (requires a boolean)."),k("JumpIfTrueConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry idx if the accumulator is true (requires a boolean)."),k("JumpIfUndefined",["imm"],"Jumps by the immediate offset if the accumulator is undefined."),k("JumpIfUndefinedConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry idx if the accumulator is undefined."),k("JumpIfUndefinedOrNull",["imm"],"Jumps by the immediate offset if the accumulator is undefined or null."),k("JumpIfUndefinedOrNullConstant",["idx"],"Jumps by the offset from the Smi at constant pool entry idx if the accumulator is undefined or null."),k("JumpLoop",["imm","loop_depth","feedback_slot"],"Performs a backward jump by offset imm, performing loop nesting and stack checks. May trigger OSR."),k("LdaConstant",["idx"],"Loads the constant literal at constant pool entry `idx` into the accumulator."),k("LdaContextSlot",["context","slot_index","depth"],"Loads the value from context `context`, slot `slot_index`, at depth `depth` into the accumulator."),k("LdaCurrentContextSlot",["slot_index"],"Loads the value from the current context slot `slot_index` into the accumulator."),k("LdaCurrentScriptContextSlot",["slot_index"],"Loads the value from the current script context slot `slot_index` into the accumulator."),k("LdaFalse",[],"Loads the boolean value `false` into the accumulator."),k("LdaGlobal",["name_index","feedback_slot"],"Loads the global variable with name from constant pool entry `name_index` into the accumulator, using feedback in `feedback_slot` (outside typeof)."),k("LdaGlobalInsideTypeof",["name_index","feedback_slot"],"Loads the global variable with name from constant pool entry `name_index` into the accumulator, using feedback in `feedback_slot` (inside typeof)."),k("LdaImmutableContextSlot",["context","slot_index","depth"],"Loads the immutable value from context `context`, slot `slot_index`, at depth `depth` into the accumulator."),k("LdaImmutableCurrentContextSlot",["slot_index"],"Loads the immutable value from the current context slot `slot_index` into the accumulator."),k("LdaLookupContextSlot",["name_index"],"Dynamically looks up the variable with name from constant pool entry `name_index` in the context chain and loads it into the accumulator."),k("LdaLookupContextSlotInsideTypeof",["name_index"],"Dynamically looks up the variable with name from constant pool entry `name_index` in the context chain and loads it into the accumulator, suppressing ReferenceError (inside typeof)."),k("LdaLookupGlobalSlot",["name_index","feedback_slot","depth"],"Dynamically looks up the global variable with name from constant pool entry `name_index` at context chain depth `depth`, using feedback in `feedback_slot`, and loads it into the accumulator."),k("LdaLookupGlobalSlotInsideTypeof",["name_index","feedback_slot","depth"],"Dynamically looks up the global variable with name from constant pool entry `name_index` at context chain depth `depth`, using feedback in `feedback_slot`, and loads it into the accumulator, suppressing ReferenceError (inside typeof)."),k("LdaLookupScriptContextSlot",["name_index"],"Dynamically looks up the variable with name from constant pool entry `name_index` in the script context and loads it into the accumulator."),k("LdaLookupScriptContextSlotInsideTypeof",["name_index"],"Dynamically looks up the variable with name from constant pool entry `name_index` in the script context and loads it into the accumulator, suppressing ReferenceError (inside typeof)."),k("LdaLookupSlot",["name_index"],"Dynamically looks up the variable with name from constant pool entry `name_index` and loads it into the accumulator."),k("LdaLookupSlotInsideTypeof",["name_index"],"Dynamically looks up the variable with name from constant pool entry `name_index` and loads it into the accumulator, suppressing ReferenceError (inside typeof)."),k("LdaModuleVariable",["cell_index","depth"],"Loads the contents of a module variable identified by `cell_index` at context depth `depth` into the accumulator."),k("LdaNull",[],"Loads the value `null` into the accumulator."),k("LdaScriptContextSlot",["context_index","slot_index"],"Loads the value from script context identified by `context_index` and slot `slot_index` into the accumulator."),k("LdaSmi",["imm"],"Loads the immediate Smi value `imm` into the accumulator."),k("LdaTheHole",[],"Loads the special value TheHole into the accumulator."),k("LdaTrue",[],"Loads the boolean value `true` into the accumulator."),k("LdaUndefined",[],"Loads the value `undefined` into the accumulator."),k("LdaZero",[],"Loads the Smi value `0` into the accumulator."),k("Ldar",["src"],"Loads the value from register `src` into the accumulator."),k("LogicalNot",[],"Performs logical NOT on the accumulator (expects a boolean)."),k("Mod",["src","feedback_slot"],"Computes the remainder of the accumulator divided by the value in register `src`, using feedback in `feedback_slot`."),k("ModSmi",["imm","feedback_slot"],"Computes the remainder of the accumulator divided by the immediate value `imm`, using feedback in `feedback_slot`."),k("Mov",["src","dst"],"Copies the value from register `src` to register `dst`."),k("Mul",["src","feedback_slot"],"Multiplies the accumulator by the value in register `src`, using feedback in `feedback_slot`."),k("MulSmi",["imm","feedback_slot"],"Multiplies the accumulator by the immediate value `imm`, using feedback in `feedback_slot`."),k("Negate",["feedback_slot"],"Negates the value in the accumulator using feedback in `feedback_slot`."),k("PopContext",["context"],"Pops the current context and sets `context` as the new context."),k("PushContext",["context"],"Pushes the value in the accumulator as the new current context, saving the previous context in `context`."),k("ReThrow",[],"Re-throws the exception in the accumulator."),k("ResumeGenerator",["generator","first_output_register","register_count"],"Imports the register file stored in the generator, writing `register_count` registers to the frame starting at `first_output_register`, and marks the generator as executing."),k("Return",[],"Returns the value in the accumulator."),k("SetKeyedProperty",["object","key","feedback_slot"],"Stores the value in the accumulator as a property of `object` with key `key`, using feedback in `feedback_slot`."),k("SetNamedProperty",["object","name_index","feedback_slot"],"Stores the value in the accumulator as a property of `object` with name from constant pool entry `name_index`, using feedback in `feedback_slot`."),k("SetPendingMessage",[],"Sets the pending message to the value in the accumulator, returning the previous pending message in the accumulator."),k("ShiftLeft",["src","feedback_slot"],"Shifts the value in register `src` to the left by the count in the accumulator, using feedback in `feedback_slot`."),k("ShiftLeftSmi",["imm","feedback_slot"],"Shifts the accumulator to the left by the immediate value `imm`, using feedback in `feedback_slot`."),k("ShiftRight",["src","feedback_slot"],"Arithmetic right shift of register `src` by the count in the accumulator, using feedback in `feedback_slot`."),k("ShiftRightLogical",["src","feedback_slot"],"Logical right shift of register `src` by the count in the accumulator, using feedback in `feedback_slot`."),k("ShiftRightLogicalSmi",["imm","feedback_slot"],"Logical right shift of the accumulator by the immediate value `imm`, using feedback in `feedback_slot`."),k("ShiftRightSmi",["imm","feedback_slot"],"Arithmetic right shift of the accumulator by the immediate value `imm`, using feedback in `feedback_slot`."),k("StaContextSlot",["context","slot_index","depth"],"Stores the value in the accumulator into context `context`, slot `slot_index`, at depth `depth`."),k("StaCurrentContextSlot",["slot_index"],"Stores the value in the accumulator into the current context slot `slot_index`."),k("StaCurrentScriptContextSlot",["slot_index"],"Stores the value in the accumulator into the current script context slot `slot_index`."),k("StaGlobal",["name_index","feedback_slot"],"Stores the value in the accumulator into the global variable with name from constant pool entry `name_index`, using feedback in `feedback_slot`."),k("StaInArrayLiteral",["array","index","feedback_slot"],"Stores the value in the accumulator into `array` at `index`, using feedback in `feedback_slot`."),k("StaLookupSlot",["name_index","flags"],"Stores the value in the accumulator into the variable with name from constant pool entry `name_index`, with flags `flags`."),k("StaModuleVariable",["cell_index","depth"],"Stores the value in the accumulator into the module variable identified by `cell_index` at context depth `depth`."),k("StaScriptContextSlot",["context_index","slot_index"],"Stores the value in the accumulator into script context `context_index`, slot `slot_index`."),k("Star",["dst"],"Stores the value in the accumulator into register `dst`."),...Array.from({length:16},(t,e)=>k(`Star${e}`,[],`Stores the value in the accumulator into register \`r${e}\``)),k("Sub",["src","feedback_slot"],"Subtracts the value in register `src` from the accumulator, using feedback in `feedback_slot`."),k("SubSmi",["imm","feedback_slot"],"Subtracts the immediate value `imm` from the accumulator, using feedback in `feedback_slot`."),k("SuspendGenerator",["generator","first_input_register","register_count","suspend_id"],"Stores parameters and the register file in the generator, along with the current context, `suspend_id`, and bytecode offset. Returns the value in the accumulator."),k("SwitchOnGeneratorState",["generator","table_start","table_length"],"If `generator` is undefined, falls through. Otherwise, dispatches on the generator's state using a jump table in the constant pool, starting at `table_start`, with `table_length` entries."),k("SwitchOnSmiNoFeedback",["table_start","table_length","case_value_base"],"Jumps using a Smi jump table in the constant pool, indexed by (accumulator - `case_value_base`). Table starts at `table_start` with `table_length` entries."),k("TestEqual",["src","feedback_slot"],"Tests if the value in register `src` equals the accumulator, using feedback in `feedback_slot`."),k("TestEqualStrict",["src","feedback_slot"],"Tests if the value in register `src` is strictly equal to the accumulator, using feedback in `feedback_slot`."),k("TestGreaterThan",["src","feedback_slot"],"Tests if the value in register `src` is greater than the accumulator, using feedback in `feedback_slot`."),k("TestGreaterThanOrEqual",["src","feedback_slot"],"Tests if the value in register `src` is greater than or equal to the accumulator, using feedback in `feedback_slot`."),k("TestIn",["src","feedback_slot"],"Tests if the value in register `src` is a property in the object in the accumulator, using feedback in `feedback_slot`."),k("TestInstanceOf",["src","feedback_slot"],"Tests if the value in register `src` is an instance of the constructor in the accumulator, using feedback in `feedback_slot`."),k("TestLessThan",["src","feedback_slot"],"Tests if the value in register `src` is less than the accumulator, using feedback in `feedback_slot`."),k("TestLessThanOrEqual",["src","feedback_slot"],"Tests if the value in register `src` is less than or equal to the accumulator, using feedback in `feedback_slot`."),k("TestNull",[],"Tests if the value in the accumulator is null."),k("TestReferenceEqual",["src"],"Tests if the value in register `src` is reference-equal to the accumulator (simple reference or Smi equality)."),k("TestTypeOf",["literal_flag"],"Tests if the value in the accumulator has typeof equal to the literal represented by `literal_flag`."),k("TestUndefined",[],"Tests if the value in the accumulator is undefined."),k("TestUndetectable",[],"Tests if the value in the accumulator is undetectable (e.g., null, undefined, or document.all)."),k("Throw",[],"Throws the exception in the accumulator."),k("ThrowIfNotSuperConstructor",["constructor"],"Throws an exception if the value in `constructor` is not a constructor."),k("ThrowReferenceErrorIfHole",["variable_name"],"Throws a ReferenceError if the value in the accumulator is TheHole."),k("ThrowSuperAlreadyCalledIfNotHole",[],"Throws a SuperAlreadyCalled exception if the value in the accumulator is not TheHole."),k("ThrowSuperNotCalledIfHole",[],"Throws an exception if the value in the accumulator is TheHole."),k("ToBoolean",[],"Converts the value in the accumulator to a boolean."),k("ToBooleanLogicalNot",[],"Performs logical NOT on the accumulator, first converting it to boolean if needed."),k("ToName",["dst"],"Converts the value in the accumulator to a Name, storing the result in register `dst`."),k("ToNumber",["feedback_slot"],"Converts the value in the accumulator to a number, using feedback in `feedback_slot`."),k("ToNumeric",["feedback_slot"],"Converts the value in the accumulator to a numeric value, using feedback in `feedback_slot`."),k("ToObject",["dst"],"Converts the value in the accumulator to a JSReceiver, storing the result in register `dst`."),k("ToString",["feedback_slot"],"Converts the value in the accumulator to a String, using feedback in `feedback_slot`."),k("TypeOf",[],"Loads the type name of the value in the accumulator as a string."),k("Wide",[],"Prefix bytecode indicating the next bytecode has wide (16-bit) operand)")],dr=Object.fromEntries($l.map(t=>[t.name,t]));var Vl=new TextDecoder,[cg,zl]=(()=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(64),r=new Uint8Array(256);for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);r[s]=n,e[n]=s}return[e,r]})();function Wo(t){return Vl.decode(ql(t))}function ql(t){let e=t.length;for(;e>0&&t[e-1]==="=";)e--;let r=new Uint8Array(3*Math.ceil(e/4)),n=0,s=0,o=0;for(let i=0;i<e;i++)if(s=s<<6|zl[t.charCodeAt(i)&255],o+=6,o>8){let a=s>>(o-=8);r[n++]=a,s-=a<<o}return o!==0&&(r[n++]=s),r.subarray(0,(e>>2)*3+(e%4*6>>3))}var{toString:Gl,hasOwnProperty:Hl}=Object.prototype,De=t=>Gl.call(t),D=Object.hasOwn||((t,e)=>Hl.call(t,e));function hr(t,e,r=Object.is){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;for(let n in t)if(D(t,n)&&(!D(e,n)||!r(t[n],e[n])))return!1;for(let n in e)if(D(e,n)&&!D(t,n))return!1;return!0}var Ko=/^data:image\/([a-z\+]+?(?:;base64)?),/,Wl=/^([a-z\-]+:|\.{0,2}\/)/i;function Yo(t){return t.includes("http://www.w3.org/2000/svg")?/(?:<|%3[cC])svg[:\s]/.test(t):!1}function ht(t){return typeof t=="string"&&Ko.test(t)}function gt(t){let e=Be(t);if(e!==null)return`data:image/${e.type},${e.content}`}function yt(t){return typeof t=="string"&&Wl.test(t)&&(ht(t)||!bt(t))}function gr(t){if(typeof t=="string")return yt(t)?t:gt(t)}function bt(t){return Be(t)!==null}function Be(t){if(typeof t=="string"&&t.length>100){let e=null,r=null;switch(t.charCodeAt(0)){case 47:t.startsWith("/9j/")&&(e="jpeg;base64",r=t);break;case 37:case 60:Yo(t)&&(e="svg+xml",r=t);break;case 65:(t.startsWith("AAAB")||t.startsWith("AAAC"))&&(e="ico;base64",r=t);break;case 80:(t.startsWith("PD94bWwg")||t.startsWith("PHN2"))&&Yo(Wo(t))&&(e="svg+xml;base64",r=t);break;case 82:(t.startsWith("R0lGODdh")||t.startsWith("R0lGODlh"))&&(e="gif;base64",r=t);break;case 100:if(t.startsWith("data:image/")){let n=t.match(Ko);n!==null&&(e=n[1],r=t.slice(n[0].length))}break;case 105:if(t.startsWith("iVBORw0KGg"))e="png;base64",r=t;else if(t.startsWith("image/")){let n=t.match(/^image\/([a-z\+]+?(;base64)?),/);n!==null&&(e=n[1],r=t.slice(n[0].length))}break}if(e!==null&&r!==null)return{type:e,content:r}}return null}function Qo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function yr(t){return Array.isArray(t)||Qo(t)}function br(t){return De(t)==="[object Set]"}var Yl=typeof Symbol.toStringTag=="symbol",Xo=Error,Zo=globalThis.DOMError,Cr=typeof Xo.isError=="function"?Xo.isError:Kl;function Kl(t){if(!t||typeof t!="object"&&typeof t!="function")return!1;if(!Yl||!(Symbol.toStringTag in t)){let e=De(t);return e==="[object Error]"||e==="[object DOMException]"||e==="[object DOMError]"||e==="[object Exception]"}return typeof Zo<"u"&&t instanceof Zo?!0:t instanceof Error}function Ar(t){return typeof t=="object"&&t!==null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}function Tr(t,e,r,n){switch(r&&typeof r.toJSON=="function"&&(r=r.toJSON()),n!==null&&(r=n.call(t,String(e),r)),typeof r){case"function":case"symbol":r=void 0;break;case"object":if(r!==null){let s=r.constructor;(s===String||s===Number||s===Boolean)&&(r=r.valueOf())}break}return r}function Xl(t){return typeof t=="function"?t:Array.isArray(t)?[...new Set(t.map(r=>{let n=r&&r.constructor;return n===String||n===Number?String(r):null}).filter(r=>typeof r=="string"))]:null}function Zl(t){return typeof t=="number"?!Number.isFinite(t)||t<1?!1:" ".repeat(Math.min(t,10)):typeof t=="string"&&t.slice(0,10)||!1}function Sr(t,e){(t===null||Array.isArray(t)||typeof t!="object")&&(t={replacer:t,space:e});let r=Xl(t.replacer),n=Object.keys;if(Array.isArray(r)){let s=r;n=()=>s,r=null}return{...t,replacer:r,getKeys:n,space:Zl(t.space)}}var Le=1,Ql=2,ec=new TextDecoder;function tc(t,e){return t.name==="SyntaxError"&&e.jsonParseOffset&&(t.message=t.message.replace(/at position (\d+)/,(r,n)=>"at position "+(Number(n)+e.jsonParseOffset))),t}function rc(t,e){let r=t.length;t.length+=e.length;for(let n=0;n<e.length;n++)t[r+n]=e[n]}async function Ct(t){let e=typeof t=="function"?t():t;if(Ar(e)){let r=new kr;try{for await(let n of e){if(typeof n!="string"&&!ArrayBuffer.isView(n))throw new TypeError("Invalid chunk: Expected string, TypedArray or Buffer");r.push(n)}return r.finish()}catch(n){throw tc(n,r)}}throw new TypeError("Invalid chunk emitter: Expected an Iterable, AsyncIterable, generator, async generator, or a function returning an Iterable or AsyncIterable")}var kr=class{constructor(){this.value=void 0,this.valueStack=null,this.stack=new Array(100),this.lastFlushDepth=0,this.flushDepth=0,this.stateString=!1,this.stateStringEscape=!1,this.pendingByteSeq=null,this.pendingChunk=null,this.chunkOffset=0,this.jsonParseOffset=0}parseAndAppend(e,r){this.stack[this.lastFlushDepth-1]===Le?(r&&(this.jsonParseOffset--,e="{"+e+"}"),Object.assign(this.valueStack.value,JSON.parse(e))):(r&&(this.jsonParseOffset--,e="["+e+"]"),rc(this.valueStack.value,JSON.parse(e)))}prepareAddition(e){let{value:r}=this.valueStack;if(Array.isArray(r)?r.length!==0:Object.keys(r).length!==0){if(e[0]===",")return this.jsonParseOffset++,e.slice(1);if(e[0]!=="}"&&e[0]!=="]")return this.jsonParseOffset-=3,"[[]"+e}return e}flush(e,r,n){let s=e.slice(r,n);if(this.jsonParseOffset=this.chunkOffset+r,this.pendingChunk!==null&&(s=this.pendingChunk+s,this.jsonParseOffset-=this.pendingChunk.length,this.pendingChunk=null),this.flushDepth===this.lastFlushDepth)this.flushDepth>0?this.parseAndAppend(this.prepareAddition(s),!0):(this.value=JSON.parse(s),this.valueStack={value:this.value,prev:null});else if(this.flushDepth>this.lastFlushDepth){for(let o=this.flushDepth-1;o>=this.lastFlushDepth;o--)s+=this.stack[o]===Le?"}":"]";this.lastFlushDepth===0?(this.value=JSON.parse(s),this.valueStack={value:this.value,prev:null}):this.parseAndAppend(this.prepareAddition(s),!0);for(let o=this.lastFlushDepth||1;o<this.flushDepth;o++){let i=this.valueStack.value;if(this.stack[o-1]===Le){let a;for(a in i);i=i[a]}else i=i[i.length-1];this.valueStack={value:i,prev:this.valueStack}}}else{s=this.prepareAddition(s);for(let o=this.lastFlushDepth-1;o>=this.flushDepth;o--)this.jsonParseOffset--,s=(this.stack[o]===Le?"{":"[")+s;this.parseAndAppend(s,!1);for(let o=this.lastFlushDepth-1;o>=this.flushDepth;o--)this.valueStack=this.valueStack.prev}this.lastFlushDepth=this.flushDepth}push(e){if(typeof e!="string"){if(this.pendingByteSeq!==null){let o=e;e=new Uint8Array(this.pendingByteSeq.length+o.length),e.set(this.pendingByteSeq),e.set(o,this.pendingByteSeq.length),this.pendingByteSeq=null}if(e[e.length-1]>127)for(let o=0;o<e.length;o++){let i=e[e.length-1-o];if(i>>6===3){o++,(o!==4&&i>>3===30||o!==3&&i>>4===14||o!==2&&i>>5===6)&&(this.pendingByteSeq=e.slice(e.length-o),e=e.slice(0,-o));break}}e=ec.decode(e)}let r=e.length,n=0,s=0;e:for(let o=0;o<r;o++){if(this.stateString){for(;o<r;o++)if(this.stateStringEscape)this.stateStringEscape=!1;else switch(e.charCodeAt(o)){case 34:this.stateString=!1;continue e;case 92:this.stateStringEscape=!0}break}switch(e.charCodeAt(o)){case 34:this.stateString=!0,this.stateStringEscape=!1;break;case 44:s=o;break;case 123:s=o+1,this.stack[this.flushDepth++]=Le;break;case 91:s=o+1,this.stack[this.flushDepth++]=Ql;break;case 93:case 125:s=o+1,this.flushDepth--,this.flushDepth<this.lastFlushDepth&&(this.flush(e,n,s),n=s);break;case 9:case 10:case 13:case 32:n===o&&n++,s===o&&s++;break}}s>n&&this.flush(e,n,s),s<r&&(this.pendingChunk!==null?this.pendingChunk+=e:this.pendingChunk=e.slice(s,r)),this.chunkOffset+=r}finish(){return this.pendingChunk!==null&&(this.flush("",0,0),this.pendingChunk=null),this.value}};var nc=typeof Object.hasOwn=="function"?Object.hasOwn:(t,e)=>Object.hasOwnProperty.call(t,e),oc={8:"\\b",9:"\\t",10:"\\n",12:"\\f",13:"\\r",34:'\\"',92:"\\\\"},sc=Uint8Array.from({length:2048},(t,e)=>nc(oc,e)?2:e<32?6:e<128?1:2);function ic(t){return t>=55296&&t<=56319}function ac(t){return t>=56320&&t<=57343}function es(t){if(!/[^\x20\x21\x23-\x5B\x5D-\x7F]/.test(t))return t.length+2;let e=0,r=!1;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<2048)e+=sc[s];else if(ic(s)){e+=6,r=!0;continue}else ac(s)?e=r?e-2:e+6:e+=3;r=!1}return e+2}function lc(t){let e=0;return t<0&&(e=1,t=-t),t>=1e9&&(e+=9,t=(t-t%1e9)/1e9),t>=1e4?t>=1e6?e+(t>=1e8?9:t>=1e7?8:7):e+(t>=1e5?6:5):e+(t>=100?t>=1e3?4:3:t>=10?2:1)}function cc(t){switch(typeof t){case"string":return es(t);case"number":return Number.isFinite(t)?Number.isInteger(t)?lc(t):String(t).length:4;case"boolean":return t?4:5;case"undefined":case"object":return 4;default:return 0}}function Ue(t,...e){let{replacer:r,getKeys:n,...s}=Sr(...e),o=!!s.continueOnCircular,i=s.space?.length||0,a=new Map,l=new Map,c=new Set,f=[],u={"":t},p=!1,m=0,h=0,C=0;return y(u,"",t),m===0&&(m+=9),{bytes:isNaN(m)?1/0:m+h,spaceBytes:i>0&&isNaN(m)?1/0:h,circular:[...c]};function y(d,g,b){if(!p)if(b=Tr(d,g,b,r),b===null||typeof b!="object")(b!==void 0||Array.isArray(d))&&(m+=cc(b));else{if(f.includes(b)){c.add(b),m+=4,o||(p=!0);return}if(l.has(b)){m+=l.get(b);return}C++;let S=C,A=m,E=0;if(f.push(b),Array.isArray(b)){E=b.length;for(let T=0;T<E;T++)y(b,T,b[T])}else{let T=m;for(let x of n(b))if(y(b,x,b[x]),T!==m){let w=a.get(x);w===void 0&&a.set(x,w=es(x)+1),m+=w,E++,T=m}}m+=E===0?2:1+E,i>0&&E>0&&(h+=(Array.isArray(b)?0:E)+(1+f.length*i)*(E+1)-i),f.pop(),S!==C&&l.set(b,m-A)}}}function Er(...t){try{return JSON.parse(...t)}catch(e){return e}}function xr(...t){try{return JSON.stringify(...t)??"null"}catch(e){return String(e)}}var re=class{subscriber;value;constructor(e,r){this.subscriber=null,this.value=e,this.shouldUpdate=typeof r=="function"?r:this.shouldUpdate}get readonly(){let e=this;return{subscribe:this.subscribe.bind(this),subscribeSync:this.subscribeSync.bind(this),unsubscribe:this.unsubscribe.bind(this),get value(){return e.value}}}subscribe(e){return this.subscriber={callback:e,subscriber:this.subscriber},()=>this.unsubscribe(e)}subscribeSync(e){let r=this.subscribe(e);return e(this.value,r),r}unsubscribe(e){let r=this,n=this.subscriber;for(;n!==null;){if(n.callback===e){n.callback=null,r.subscriber=n.subscriber;break}r=n,n=n.subscriber}}shouldUpdate(e,r){return e!==r}set(e){return this.#e(e)!==!1}asyncSet(e){let r=this.#e(e);return r===!1?Promise.resolve(!1):Promise.all(r).then(()=>!0)}#e(e){if(!this.shouldUpdate(e,this.value))return!1;let r=[],n=this.subscriber;for(this.value=e;n!==null;){let{callback:s}=n;s!==null&&r.push(s(e,()=>this.unsubscribe(s))),n=n.subscriber}return r}};function fc(t){if(!t||typeof t!="object")return"value is not an object";let{name:e,test:r,decode:n}=t;return typeof e!="string"?"missed name":typeof r!="function"?"missed test function":typeof n!="function"?"missed decode function":!1}function pc(t){let e=fc(t);if(e)throw new Error(`Bad encoding config${t?.name?` "${t.name}"`:""}: ${e}`);let{name:r,test:n,streaming:s,decode:o}=t;return Object.freeze(s?{name:r||"unknown",test:n,streaming:!0,decode:o}:{name:r||"unknown",test:n,streaming:!1,decode:o})}function At(t){if(!t)return[];if(!Array.isArray(t))throw new Error("Encodings must be an array");return t.map(pc)}var wr=Object.freeze({name:"json",test:()=>!0,streaming:!0,decode:Ct});var mc=new Uint8Array([0,0,74,83,79,78,88,76]),os=9,dc=268435455,hc=4294967295,Tt=2,je=4,_r=8,Ve=16,St=32,kt=64,Te=128,gc=0,yc=1,bc=2,Cc=3,Ac=4,Tc=5,Sc=6,kc=8,Ec=9,xc=10,wc=11,_c=12,Pc=224,Ic=7936,ss=0,Pr=1,Nc=2,Oc=3,Mc=4,Rc=5,is=6,as=7,Fc=8,ts=16,rs=32,Jg=~Ve,vc=Tt|St|kt,ls=new Uint8Array(256).map((t,e)=>{for(let r=0;r<8;r++)t+=e>>r&1;return t});function Dc(t,e,r,n=new Array(r)){let s=e&15,o=e&48,i=r,a=0,l=0;switch(o){case ts:{a=n[0]=t.readIntVar(),i--,l=1;break}case rs:{a=t.readIntVar();break}}switch(s){case Nc:{for(let c=0;c<i;c++)n[l+c]=t.readVlq();break}case Oc:{for(let c=0;c<i;c++)n[l+c]=t.readIntVar();break}case Mc:{let c=t.readBytes(Math.ceil(i/2));for(let f=0,u=0;f<i;f++)u=f&1?u>>4:c[f>>1],n[l+f]=u&8?t.readVlq()*8+(u&7):u&7;break}case Rc:{let c=t.readBytes(Math.ceil(i/2));for(let f=0,u=0;f<i;f++){u=f&1?u>>4:c[f>>1];let p=u&4?-1:1;n[l+f]=u&8?p*(t.readVlq()*4+(u&3)):p*(u&3)}break}case is:{let c=e>>8,f=(1<<c)-1,u=t.readBytes(Math.ceil(i*c/8)),p=0,m=0,h=0;for(let C=0;C<i;C++){for(;m<c;)h|=u[p++]<<m,m+=8;n[l+C]=h&f,h>>=c,m-=c}break}case as:{let c=e>>8,f=(1<<c)-1,u=t.readBytes(Math.ceil(i*c/8)),p=0,m=0,h=0;for(let C=0;C<i;C++){for(;m<c;)h|=u[p++]<<m,m+=8;n[l+C]=h&1?-((h&f)>>1):(h&f)>>1,h>>=c,m-=c}break}case Fc:{let c=n[0]=t.readIntVar(),f=t.readIntVar();for(let u=1;u<r;u++)n[u]=c+=f;break}case ss:case Pr:{let c=s===Pr,f=e>>8,u=c?e&Ic|f&Pc:f;if(ls[f]>1){let p=t.readTypeIndex(i,u);for(let m=0;m<i;m++)n[l+m]=t.readNumber(p[m])}else{let p=31-Math.clz32(u);for(let m=0;m<i;m++)n[l+m]=t.readNumber(p)}break}default:throw new Error(`Unknown numeric array encoding method: ${s}`)}switch(o){case ts:{n[0]=a;for(let c=1;c<r;c++)n[c]+=n[c-1];break}case rs:{for(let c=0;c<r;c++)n[c]+=a;break}}return n}var $e=12;function Bc(t){return t===os||t===9}function cs(t){try{let{version:e}=us(t);if(Bc(e))return!0;throw new Error(`Unsupported jsonxl version "${e}", expected "${os}"`)}catch{return!1}}function us(t){if(t.byteLength<$e)throw new Error(`Header length must be at least ${$e} bytes`);let e=new Uint8Array(t.buffer,t.byteOffset,$e);if(e.subarray(0,8).some((o,i)=>o!==mc[i]))throw new Error("Bad magic number");let r=new DataView(e.buffer,e.byteOffset,$e),n=r.getUint16(8,!0),s=r.getUint16(10,!0);return{version:n,flags:s,headerSize:$e}}var Lc=new TextDecoder("utf8",{ignoreBOM:!0});function Uc(t){let e=Lc.decode(t.readBytes(t.readVlq())),r=t.readNumericArray(),n=t.readNumericArray(),s=t.readNumericArray(),o=new Array(r);for(let i=0,a=0,l=0,c=0,f="";i<r.length;i++){let u=r[i],p=e.slice(a,a+=u>>2);u&2&&(p=f.slice(0,n[l++])+p),u&1&&(p=p+f.slice(-s[c++])),o[i]=p,f=p}return o}var jc=class{constructor(t,e){this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.bytes=t,this.pos=0,typeof e=="function"&&e(this),this.consumeHeader(),this.loadStrings(),this.loadArrayLengths(),this.loadArrayHeaders(),this.loadObjectEntries()}consumeHeader(){let{version:t,flags:e,headerSize:r}=us(this.view);return this.pos+=r,{version:t,flags:e}}loadStrings(){this.strings=Uc(this),this.stringRefs=this.readNumericArray(),this.stringRefsCursor=0}loadArrayHeaders(){this.arrayHeaders=this.readNumericArray(),this.arrayHeaderRefs=this.readNumericArray(),this.arrayHeaderRefsCursor=0}loadArrayLengths(){this.arrayLengths=this.readNumericArray(),this.arrayLengthsCursor=0}loadObjectEntries(){let t=this.readVlq(),e=this.readVlq();this.objectEntries=new Array(t),this.objectKeys=e?this.stringRefs.slice(-e).map(r=>this.strings[r]):[];for(let r=0;r<t;r++)this.objectEntries[r]={dict:this.readNumericArray(),refs:this.readNumericArray(),cursor:0}}readString(){return this.strings[this.stringRefs[this.stringRefsCursor++]]}readArrayHeader(){return this.arrayHeaders[this.arrayHeaderRefs[this.arrayHeaderRefsCursor++]]}readArrayLength(){return this.arrayLengths[this.arrayLengthsCursor++]}readObjectEntry(t){let e=this.objectEntries[t],r=e.refs[e.cursor++],n=e.dict[r];return n===0?null:{key:this.objectKeys[n>>8],type:n&255}}readBytes(t){return this.bytes.subarray(this.pos,this.pos+=t)}readTypeIndex(t,e,r){let n=0,s=0,o=0;for(;e>0;)e&1&&(n|=o<<(s++<<2)),o++,e>>=1;let i=new Uint8Array(t),a=32-Math.clz32(s-1),l=(1<<a)-1,c=this.readBytes(Math.ceil(a*t/8)),f=0,u=0,p=0;for(let m=0;m<t;m++){p<a&&(u|=c[f++]<<p,p+=8);let h=n>>((u&l)<<2)&15;i[m]=r?1<<h:h,u>>=a,p-=a}return i}readVlq(){let t=this.view.getUint8(this.pos);if(!(t&1))t=t>>1,this.pos+=1;else if(!(t&2))t=this.view.getUint8(this.pos+1)<<6|t>>2,this.pos+=2;else if(!(t&4))t=this.view.getUint16(this.pos+1,!0)<<5|t>>3,this.pos+=3;else{let e=this.view.getUint32(this.pos,!0);t=e>>>3&dc,this.pos+=4,e>>>31&&(t+=this.readUintVar()*(1<<28))}return t}readUintVar(){let t=this.view.getUint8(this.pos++),e=t&127,r=128;for(;t&128;)t=this.view.getUint8(this.pos++),e+=(t&127)*r,r*=128;return e}readIntVar(){let t=this.readUintVar();return t&1?-(t-1)/2:t<=hc?t>>>1:t/2}readUint8(){let t=this.view.getUint8(this.pos);return this.pos++,t}readInt8(){let t=this.view.getInt8(this.pos);return this.pos++,t}readUint16(){let t=this.view.getUint16(this.pos,!0);return this.pos+=2,t}readInt16(){let t=this.view.getInt16(this.pos,!0);return this.pos+=2,t}readUint24(){let t=this.view.getUint16(this.pos,!0)|this.view.getUint8(this.pos+2)<<16;return this.pos+=3,t}readInt24(){let t=this.view.getUint16(this.pos,!0),e=this.view.getUint8(this.pos+2),r=e&128?(e<<16|t)-16777216:e<<16|t;return this.pos+=3,r}readUint32(){let t=this.view.getUint32(this.pos,!0);return this.pos+=4,t}readInt32(){let t=this.view.getInt32(this.pos,!0);return this.pos+=4,t}readFloat32(){let t=this.view.getFloat32(this.pos,!0);return this.pos+=4,t}readFloat64(){let t=this.view.getFloat64(this.pos,!0);return this.pos+=8,t}readNumber(t){switch(t){case gc:return this.readUint8();case yc:return this.readUint16();case bc:return this.readUint24();case Cc:return this.readUint32();case Ac:return this.readUintVar();case kc:return this.readInt8();case Ec:return this.readInt16();case xc:return this.readInt24();case wc:return this.readInt32();case _c:return this.readIntVar();case Tc:return this.readFloat32();case Sc:return this.readFloat64()}}readNumericArrayEncoding(){let t=this.readUint8();switch(t&15){case ss:case Pr:case is:case as:t|=this.readUint8()<<8;break}return t}readNumericArray(t=this.readVlq()){if(t===0)return[];let e=this.readNumericArrayEncoding();return this.readNumbers(e,t)}readNumbers(t,e,r){return Dc(this,t,e,r)}};function ns(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function fs(t,e){function r(a={}){let l=0,c;for(;c=o.readObjectEntry(l++);)a[c.key]=s(c.type);return a}function n(a=o.readArrayLength()){if(a===0)return[];let l=o.readArrayHeader(),c=l>>16,f=l&65535,u=c&1,p=c>>5&1,m=c>>9&1,h=c>>1&255|(c&1)<<4,C=new Array(a),y=ls[h]>1?o.readTypeIndex(a,h,!0):null;if(h&vc)if(y===null)switch(h){case Tt:C.fill(null);break;case St:C.fill(!0);break;case kt:C.fill(!1);break}else for(let d=0;d<a;d++)switch(y[d]){case Tt:C[d]=null;break;case St:C[d]=!0;break;case kt:C[d]=!1;break}if(h&_r)for(let d=0;d<a;d++)(y===null||y[d]===_r)&&(C[d]=o.readString());if(h&je)if(h===je)o.readNumbers(f,a,C);else{let d=ns(y,je),g=o.readNumbers(f,d);for(let b=0,S=0;b<a;b++)y[b]===je&&(C[b]=g[S++])}if(h&Te)if(m){let d=h===Te?a:ns(y,Te),g=o.readNumericArray(d),b=n();for(let S=0,A=0,E=0;S<a;S++)(y===null||y[S]===Te)&&(C[S]=b.slice(E,E+=g[A++]))}else for(let d=0;d<a;d++)(y===null||y[d]===Te)&&(C[d]=n());if(h&Ve){let d=h===Ve?C:[];for(let g=0,b=0;g<a;g++)(y===null||y[g]===Ve)&&(C[g]=d[b++]={});if(p){let g=o.readVlq(),b=new Array(g);for(let S=0;S<g;S++)b[S]=o.readString();for(let S=0;S<g;S++){let A=b[S],E=n(d.length);for(let T=0;T<d.length;T++)E[T]!==void 0&&(d[T][A]=E[T])}}if(u)for(let g=0;g<d.length;g++)r(d[g])}return C}function s(a){switch(1<<(a&7)){case Tt:return null;case _r:return o.readString();case je:return o.readNumber(a>>3);case Ve:return r();case St:return!0;case kt:return!1;case Te:return n()}}let o=new jc(t,e),i=s(o.readUint8());if(o.pos!==t.byteLength)throw new Error("End of input is not reached");return i}var Et=Object.freeze({name:"jsonxl/snapshot9",test:cs,streaming:!1,decode:fs});var ps=[{name:"gzip",test:t=>t[0]===31&&t[1]===139&&t[2]===8,createTransformStream:()=>new DecompressionStream("gzip")},{name:"zlib",test:t=>(t[0]&15)===8&&t[0]>>4<=7&&(t[0]<<8|t[1])%31===0,createTransformStream:()=>new DecompressionStream("deflate")}];function Vc(t){return t.reduce((e,r)=>e+r.byteLength,0)}function zc(t,e){switch(t.length){case 0:return;case 1:return t[0];default:{let r=new Uint8Array(e||Vc(t)),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}}}async function ms(t){let e=[],r=0;for await(let n of t)e.push(n),r+=n.byteLength;return zc(e,r)}function qc(t,e){if(typeof t!="string"){for(let r of e)if(r.test(t))return r}return null}var xt=class{#e;#t;#r;#n;constructor(e,r){this.#e=e,this.#t=r,this.#r=null,this.#n=null}transform(e,r){if(this.#n===null){let n=qc(e,this.#e);if(n===null)this.#n=Promise.resolve();else{let{readable:s,writable:o}=n.createTransformStream();this.#r=o.getWriter(),this.#n=s.pipeTo(new WritableStream({write(i){r.enqueue(i)},close(){r.terminate()},abort(i){r.error(i)}})),typeof this.#t=="function"&&this.#t(n.name)}}if(this.#r!==null)return this.#r.write(e);r.enqueue(e)}async flush(){this.#r!==null&&(this.#r.close(),this.#r=null),this.#n!==null&&(await this.#n,this.#n=null)}},Jc=1024*1024/4,wt=class{#e;#t;#r;constructor(e,r=Jc){this.#e=e,this.#t="",this.#r=r}async transform(e,r){if(typeof this.#t!="string"&&await this.#o(r),typeof e=="string"){if(this.#t+=e,this.#n>=this.#r)return this.#o(r)}else this.#t=e,await this.#o(r)}async flush(e){await this.#o(e),await this.#e(!0)}get#n(){return this.#t.length}async#o(e){let r=this.#t;if(this.#n!==0){this.#t="";for(let n=0;n<r.length;){let s=n===0&&r.length-n<this.#r*1.5?r:r.slice(n,n+this.#r);e.enqueue(s),n+=s.length,await this.#e(!1,s.length)}}}};function Gc(t){try{return new URL(t,location.origin).origin===location.origin}catch{return!1}}function Hc(t){return t.ok}function Wc(t){return t.headers.get("x-file-encoded-size")||t.headers.get("content-length")}function Yc(t){return t.headers.get("x-file-size")||(Gc(t.url)&&!t.headers.get("content-encoding")?t.headers.get("content-length"):void 0)}function Kc(t){return t.headers.get("x-file-created-at")||t.headers.get("last-modified")||void 0}function Xc(t){let e=t?Object.keys(t):[],r=["name","createdAt","elapsedTime","data"];return!(e.length!==4||e.some(n=>!r.includes(n)))}function Zc(t,e,{size:r,compression:n,encoding:s}){let o=null;if(Xc(t)){let{data:y,...d}=t;t=y,e={...e,createdAt:y.createdAt},o=d}let i=t,a=o||{},{type:l,name:c,encoding:f,size:u,encodedSize:p,createdAt:m,...h}=e||{};return{resource:{type:l||"unknown",name:c||"unknown",compression:n,encoding:s,...Number.isFinite(r)?{size:r}:null,...Number.isFinite(p)?{encodedSize:p}:null,createdAt:new Date((typeof m=="string"?Date.parse(m):m)||Date.now()),...h},meta:a,data:i}}async function Qc(t,e,r,n){let s=Date.now(),o=[...At(e),Et,wr],i=0,a=!1,l="unknown",c=0;await n("receiving",p(!1));let u=t.pipeThrough(new TransformStream(new wt(m))).pipeThrough(new TransformStream(new xt(ps,y=>a=y))).getReader();try{let y=await u.read(),{value:d,done:g}=y;if(g)throw new Error("Empty payload");for(let{name:b,test:S,streaming:A,decode:E}of o)if(S(d)){l=b;let T=h(u,y);return{data:await(A?E(T):ms(T).then(C(E))),compression:a,encoding:l,size:c,decodingTime:i}}throw new Error("No matched encoding found for the payload")}finally{u.releaseLock()}function p(y){return{done:y,elapsed:Date.now()-s,units:"bytes",completed:c,total:r}}async function m(y,d=0){c+=d,await n("receiving",p(y))}async function*h(y,d){for(;;){let{value:g,done:b}=d||await y.read();if(d=void 0,b)break;let S=performance.now();yield g,i+=performance.now()-S}}function C(y){return async d=>{await n("decoding",void 0,l);let g=performance.now();try{return await y(d)}finally{i=performance.now()-g}}}}async function eu(t,e){try{await e.asyncSet({stage:"request"});let r=new Date,{method:n,stream:s,resource:o,options:i,data:a}=await t(),l=new Date,c=o?.size,{encodings:f}=i||{},{data:u,compression:p=!1,encoding:m="unknown",size:h=void 0,decodingTime:C=0}=a?{data:a}:await Qc(s,f,Number(c)||0,(E,T,x)=>e.asyncSet({stage:E,progress:T,step:x}));await e.asyncSet({stage:"received"});let{data:y,resource:d,meta:g}=Zc(u,o,{size:h,compression:p,encoding:m}),b=new Date,S=Number(b)-Number(r),A=Math.round(C||0);return{loadMethod:n,resource:d,meta:g,data:y,timings:{time:S,start:r,end:b,loadingTime:S-A,decodingTime:A,requestTime:Number(l)-Number(r),requestStart:r,requestEnd:l,responseTime:Number(b)-Number(l),responseStart:l,responseEnd:b}}}catch(r){throw console.error("[Discovery] Error loading data:",r),await e.asyncSet({stage:"error",error:r}),r}}function Ir(t,e){let r=new re({stage:"inited"});return{state:r,dataset:t(r),...e}}function Nr(t){return e=>eu(t,e)}function ds(t,e){return Ir(Nr(()=>({method:"stream",stream:t,resource:e?.resource,options:e})))}function Or(t,e){let r=ys(t);return Ir(Nr(()=>({method:"file",stream:t.stream(),resource:e?.resource||r,options:e})),{title:"Load data from file: "+(r?.name||"unknown")})}function hs(t,e){let n=(t.dataTransfer||t.clipboardData||t.target)?.files?.[0];if(t.stopPropagation(),t.preventDefault(),!n)throw new Error("Can't extract a file from an event object");return Or(n,e)}function gs(t,e){return e=e||{},Ir(Nr(async()=>{let r=await fetch(t,e.fetch),n=ys(r,e);if(n&&r.body)return{method:"fetch",stream:r.body,resource:e.resource||n,options:e};let s=r.headers.get("content-type")||"",o=await r.text();if(s.toLowerCase().startsWith("application/json"))try{let i=JSON.parse(o);o=i.error||i}catch{}throw o=new Error(o),o.isFetchError=!0,o.status=r.status,o.statusText=r.statusText,o.stack=null,o}),{title:`Load data from url: ${t}`})}function ys(t,e){if(t instanceof Response){let r=e?.isResponseOk||Hc,n=e?.getContentSize||Yc,s=e?.getContentEncodedSize||Wc,o=e?.getContentCreatedAt||Kc;if(r(t))return{type:"url",name:t.url,size:Number(n(t))||null,encodedSize:Number(s(t)),createdAt:o(t)}}if(t instanceof File)return{type:"file",name:t.name,size:t.size,createdAt:t.lastModified};if(t instanceof Blob)return{size:t.size};if(ArrayBuffer.isView(t))return{size:t.byteLength};if(typeof t=="string")return{size:t.length}}var tu=new Proxy({},{get:()=>()=>{}}),_t=["silent","error","warn","info","perf","debug"],ru={error:["error","error"],warn:["warn","warn"],info:["info","info"],perf:["log","perf"],log:["log","any"],debug:["debug","debug"]},ze=class{#e;#t;#r;error;warn;info;perf;debug;log;constructor(e="",r="debug",n=console){this.#t=e,this.#r=n||tu,this.logLevel=r}shouldLogLevel(e){let r=_t.indexOf(e);return this.#e!=="silent"&&r!==-1&&r<=_t.indexOf(this.#e)}get logLevel(){return this.#e}set logLevel(e){if(_t.indexOf(e)===-1&&console.error(this.#t,`Bad log level "${e}", supported: ${_t.join(", ")}`),e!==this.#e){let n=this.#r,s=this.#t,o=a=>Function.prototype.bind.call(this.#r[a],this.#r,...this.#t?[this.#t]:[]),i=(a,l)=>(c,f)=>{n[l?"groupCollapsed":"group"](`${s} ${c}`);let p=typeof f=="function"?f():f;if(Array.isArray(p))for(let m of p)n[a](...Array.isArray(m)?m:[m]);n.groupEnd()};this.#e=e;for(let[a,[l,c]]of Object.entries(ru))c==="any"||this.shouldLogLevel(c)?this[a]=Object.assign(o(l),{group:i(l,!1),groupCollapsed:i(l,!0)}):this[a]=Object.assign(()=>{},{group:()=>()=>{},groupCollapsed:()=>()=>{}})}}};var sy=Symbol("stop-match");var{documentElement:Vy,compatMode:zy}=document;var bs=/^(\s*\d+\s+[SE]>)?(\s+0[x0][a-f0-9]+\s+)(@\s*\d+\s*:)((?:\s+[a-f0-9]{2})+\s+)(\S+)((?:\s+[\[#<a-z]\S+\s*,)*\s*[\[#<a-z]\S+)?(\s*\([^)]+\))?(\s*;;;.+)?/i,lu=/^(\s*0[x0][a-f0-9]+\s+)([a-f0-9]+\s+)([a-f0-9]+\s+)(REX\.\S+\s+)?(\S+(?: pool begin)?)((?:\s+(?:[#<a-z\d]\S+(?:\s+#[a-f0-9]+)?|\[[^\]]+(?:,\s*\S+)?\]!?)\s*,)*\s*(?:[#<a-z\d]\S+(?:\s+#[a-f0-9]+)?|\[[^\]]+(?:,\s*\S+)?\]!?))?(\s*\(addr [^)]+\))?(\s*(?:\(root \([^)]+\)\)|\([^)]+\)|<\S+>))?(\s*;;.+)?/i;function As(t){return D(dr,t)?dr[t]:t.endsWith(".Wide")||t.endsWith(".ExtraWide")?As(t.slice(0,t.indexOf("."))):null}function cu(t,e,r=1/0){let n=0;for(let s=Math.min(t.length,e.length,r);n<s&&t[n]===e[n];n++);return n}function Cs(t,e=0,r=t.length){for(;e<r&&t[e]===" ";e++);for(;r>e&&t[r-1]===" ";r--);return{start:e,end:r}}function uu(t){let e=[];for(let r of Ae.parseInlined(t.inlined))e.push(r.parent!==void 0?e[r.parent]:r.offset);return e}var Ts={commonPrefixMap(t,e=2){let r={},n=t[0],s=n.length-Math.max(e,1);r[n]=s;for(let o=1;o<t.length;o++){let i=t[o];s=cu(n,i,s),r[i]=s,n=i}return r},disassembleBlocksAndRanges:`{
        $blocks: disassembleBlocks().({
            block: $,
            ranges: instructions.disassembleRanges()
        });
        $pcToBlockMap: $blocks.disassemblePcToBlockMap();
        $commonAddressPrefixMap: $pcToBlockMap.keys().commonPrefixMap(2);

        code: @,
        warnings: [
            not hasSource() ? 'Mapping to source code is not available, because the call frame has **no source code**',
            no positions and tier != 'Ignition' ? 'Mapping to source code is not available, because the call frame has **no position table**'
        ].[],
        $blocks.({
            block,
            ranges: ranges + ranges.(
                $source;
                $start: range[0];
                $end: range[1];

                type = 'pc' ? (
                    { type: 'pc-common', $source, range: [$start, $start + $commonAddressPrefixMap[source[$start:$end]]] }
                ) :
                type = 'hint' ? (
                    (source[$start:$end].match(/^\\((\\S+)\\s*@\\s*(\\d+)\\)$/) |? (
                        $maybePc: matched[1];
                        $maybePc in $commonAddressPrefixMap ? [
                            { type: 'pc', $source, range: [$start + 1, $start + 1 + $maybePc.size()] },
                            { type: 'pc-common', $source, range: [$start + 1, $start + 1 + $commonAddressPrefixMap[$maybePc]] },
                            { $offset: matched[2]; type: 'offset', $source, range: [$end - 1 - $offset.size(), $end - 1] },
                            { type: 'block-ref', $source, range: [$start + 1, $start + 1], marker: $pcToBlockMap[$maybePc].id }
                        ]
                    )) or
                    (source[$start:$end].match(/^\\(addr\\s+(\\S+?)\\)$/) |? (
                        $maybePc: matched[1];
                        $maybePcZ: $maybePc.replace(/0x0+/, '0x');
                        $s: $end - $maybePc.size() - 1;
                        $maybePc in $commonAddressPrefixMap or $maybePcZ in $commonAddressPrefixMap ? (
                            $end_: $s + ($maybePc in $commonAddressPrefixMap
                                ? $commonAddressPrefixMap[$maybePc]
                                : $commonAddressPrefixMap[$maybePcZ] + ($maybePc.size() - $maybePcZ.size())
                            );
                            [
                                { type: 'pc', $source, range: [$s, $end - 1] },
                                { type: 'pc-common', $source, range: [$s, $end_] },
                                { type: 'block-ref', $source, range: [$s, $s], marker: $pcToBlockMap[$maybePc] or $pcToBlockMap[$maybePcZ] | id }
                            ]
                        )
                    ))
                ) :
                type = 'param' ? (
                    $value: source[$start:$end];
                    $value in $commonAddressPrefixMap ? [
                        { type: 'pc', $source, range: [$start, $start + $value.size()] },
                        { type: 'pc-common', $source, range: [$start, $start + $commonAddressPrefixMap[$value]] },
                        { type: 'block-ref', $source, range: [$start, $start], marker: $pcToBlockMap[$value].id }
                    ] :
                    $value ~= /^ls[lr] / ? (
                        { type: 'command', $source, range: [$start, $start + 3] }
                    )
                )
            )
        })
    }`,disassembleRanges(t){let e=[],r=(o,i,a=0,l=i?.length)=>{if(typeof i!="string"||!i)return;let{start:c,end:f}=Cs(i,a,l),u={type:o,source:t,range:[s+c,s+f]};return e.push(u),s+=i.length,u},n=0,s=0;if(bs.test(t))for(let o of t.match(/.*(\n|$)/g)||[]){s=n;let i=o.match(bs);if(i){let[,a,l,c,f,u,p,m,h]=i,C=As(u);if(r("label",a),r("pc",l),r("offset",c,1,c.length-1),r("ops",f),u){let y=r("command",u);y&&(y.command=C)}if(p){let y=p.split(",");for(let d=0;d<y.length;d++){d!==0&&s++;let g=r("param",y[d]);g&&(g.command=C,g.param=C?.params[d])}}r("hint",m),r("comment",h)}n+=o.length}else for(let o of t.match(/.*(\n|$)/g)||[]){s=n;let i=o.match(lu);if(i){let[,a,l,c,f,u,p,m,h,C]=i;if(r("pc",a),r("offset",l),r("ops",c),r("prefix",f),r("command",u),p){let y=p.split(",");for(let d=0;d<y.length;d++){d!==0&&s++;let g=y[d];if(d!==y.length-1){let{start:b,end:S}=Cs(g);if(g[b]==="["&&g[S-1]!=="]"){let A=y[d+1];(A.endsWith("]")||A.endsWith("]!"))&&(g+=","+A,d++)}}r("param",g)}}r("hint",m),r("hint",h),r("comment",C)}else/^\s+;;/.test(o)&&r("comment",o);n+=o.length}return e},disassembleBlocks(t){if(!t?.disassemble?.instructions)return;let e=[],r=(n,s,o,i=o,a=-1,l=`B${e.length}`)=>e.push({id:l,code:t,compiler:t.tier,originCallFrame:s,originOffset:o,offset:i,inlineId:a,instructions:n});if(t.tier==="Ignition")for(let n of t.disassemble.instructions.split(/\n(?=\s*\d+\s+[SE]>)/))r(n,t.callFrame,Number(n.match(/^\s*(\d+)\s/)?.[1]||t.callFrame.start||-1));else{let n=t.disassemble.instructions.split(/\r\n?|\n/),s=Ae.parsePositions(t.positions).reduce((m,h)=>m.set(h.code,h),new Map),o=uu(t),i=t.fns,a=[],l=t.callFrame,c=l.start??-1,f=-1,u,p=()=>{a.length>0&&(r(a.join(`
`),l,c,f!==-1?o[f]:c,f,u),a=[])};for(let m of n){let h=parseInt(m.match(/^0[x0]\S+\s+(\S+)/)?.[1]||"-1",16),C=s.get(h);if(C!==void 0)p(),c=C.offset,f=C.inline??-1,l=f!==-1?i[f]:t.callFrame;else{let y=u===void 0&&m.indexOf("constant pool begin")!==-1||u==="constants"&&m.indexOf("constant")===-1,d=!y&&u!=="deopts"&&m.indexOf(";; debug: deopt position")!==-1;(y||d)&&(p(),f=-1,l=t.callFrame,c=l.start??-1,d||y&&u==="constants"?u="deopts":y&&u!=="constants"&&(u="constants"))}a.push(m)}p()}return e},disassemblePcToBlockMap(t){let e={};for(let r=0;r<t.length;r++){let{block:n,ranges:s}=t[r];for(let o of s)if(o.type==="pc"){let i=o.source.slice(o.range[0],o.range[1]);e[i]=n}}return e},disassembleBlockTree(t,e,r){if(!e||!Array.isArray(e.fns)||!e.fns.length)return t;let n=[],s=Ae.parseInlined(e.inlined,e.fns),o=[];for(let i of t){let a=r(i);if(a.inlineId==-1){n.push(i),o=[];continue}let l=[],c=s[a.inlineId]??null;for(;c!=null;)l.unshift(c),c=c.parent!==void 0?s[c.parent]:null;for(let f=0,u=n,p=e.callFrame;f<l.length;f++){let m=l[f],h=f<o.length&&o[f].inline===m?o[f]:void 0;h===void 0&&(u.push(h=o[f]={location:{callFrame:p,offset:m.offset},inline:m,children:[]}),f<o.length-1&&o.splice(f+1)),u=h.children,p=h.inline.callFrame}o[o.length-1].children.push(i)}return n}};function Ss(t,e,r,n=!1){let s=new Uint32Array(t),o=r/t,i=o,a=0;for(let l=0,c=0;l<e.length;l++)if(s[a]++,c+=e[l],c>=i&&(a=Math.min(t,Math.floor(c/o)),i=(a+1)*o,n)){for(let f=Math.floor((c-e[l])/o);f<a;f++)s[f]++;c!==a*o&&s[a]++}return s}var ks={countSamples(t=500,e=this.context.currentProfile){let{timeDeltas:r,totalTime:n}=e;return Ss(t,r,n,!0)},countSamplesDiscrete(t=500,e=this.context.currentProfile){let{timeDeltas:r,totalTime:n}=e;return Ss(t,r,n)},sampleXBins(t=500,e=this.context.currentProfile){let{timeDeltas:r}=e,n=1500,s=n/t,o=new Uint32Array(t);for(let i of r){let a=Math.min(Math.floor(i/s),t-1);o[a]++}return{max:n,bins:o}}};var Es={hasSource:`
        $sourceDefined: => is string and size() > 0;
        callFrame
            | $ or @
            | is object and marker('call-frame').object
            ? regexp is string or (script.source is $sourceDefined and (end - start) > 0)
            : (script
                | $ or @
                | is object and marker('script').object
                | source is $sourceDefined)
    `,offsetToLineColumn(t,e,r){let n=0,s=0,o=0;if(e&&typeof e!="string"&&!r&&typeof e.script?.source=="string"&&Number.isFinite(e.start)&&Number.isFinite(e.line)&&Number.isFinite(e.end)&&(r=e,e=e.script.source),typeof e!="string")return null;t<0?t=0:t>e.length&&(t=e.length),r&&Number.isFinite(r.start)&&r.start>=0&&(n=r.start,s=r.line,o=r.column,r.end>=r.start&&t>r.end&&(t=r.end));let i=/\r\n?|\n/g;for(i.lastIndex=n;i.exec(e)!==null;){if(i.lastIndex>t){o+=t-n;break}n=i.lastIndex,s++,o=0}return{line:s,column:o}},sourceFragment:`
        $source: @ or '';
        $limitStart: $$.limitStart or $$.limit or 50;
        $limitEnd: $$.limitEnd or $$.limit or 50;
        $hasSource: $source.bool();
        $sourceOffset: $$.scriptOffset or $$.offset | $hasSource and $ > 0 ? $ : 0;
        $lineStart: $source.lastIndexOf('\\n', $sourceOffset - 1) + 1;
        $lineEnd: $source.indexOf('\\n', $sourceOffset) | $ != -1 ? $source[$ - 1] != '\\r' ?: $ - 1 : $source.size();
        $line: $source[$lineStart:$lineEnd];
        $lineRelStart: $line.match(/^\\s*/).matched[].size();
        $lineRelEnd: $lineEnd - $lineStart;
        $lineRelOffset: $sourceOffset - $lineStart;
        $lineSliceStart: [$lineRelStart, $lineRelOffset - $limitStart - ($lineRelEnd - $lineRelOffset | $ >= $limitEnd ? 0 : $limitEnd - $)].max();
        $lineSliceEnd: [$lineRelEnd, $lineRelOffset + $limitEnd + ($lineRelOffset - $lineSliceStart | $ >= $limitStart ? 0 : $limitStart - $)].min();
        $sliceStart: $lineSliceStart + $lineStart;
        $sliceEnd: $lineSliceEnd + $lineStart;
        $lineNum: $source[0:$sourceOffset].match(/\\r\\n?|\\n/g).size() + 1;
        $prefix: $sliceStart != $lineStart + $lineRelStart ? '\u2026' : '';
        $offsetCorrection: $sliceStart - $prefix.size();

        { $hasSource, $source, $sourceOffset, $lineNum, $lineStart, $lineEnd, $sliceStart, $sliceEnd, $offsetCorrection, slice: $hasSource
            ? [
                $prefix,
                $source[$sliceStart:$sliceEnd],
                $sliceEnd != $lineEnd ? '\u2026' : ''
              ].join('')
            : '(source is unavailable)'
        }
    `};function Rr(t,e){return String(t).padStart(e,"0")}function Fr(t,e,r=!1){t=Math.round(t);let n=Math.floor(t/(60*1e3*1e3)),s=Math.floor(t/(1e3*1e3))%60,o=Math.floor(t/1e3)%1e3;switch(!0){case e<1e5:return`${(t/1e3).toFixed(1)}ms`;case e<1e6:return`${Math.floor(t/1e3)}ms`;case e<6e7:{let i=`${s}.${Rr(o,3)}s`;return r?i:i.replace(/(\.000|0+)s/,"s")}default:{let i=`${n}:${Rr(s,2)}.${Rr(o,3)}`;return r?i:i.replace(/(\.000|0+)$/,"")}}}var fu=new Map,pu=new Map,mu={Ignition:"Ig",Sparkplug:"Sp",Maglev:"Ml",Turboprop:"Tp",Turbofan:"Tf",Turboshaft:"Ts",Unknown:"??"};function xs(t,e,r=1e3){let n=0;for(;t>r&&n<e.length-1;)t/=r,n++;return(n===0?t:t<100?t.toFixed(1).replace(/\.0/,""):Math.round(t))+e[n]}var du={...Vo,...jo,...Ts,...Ae,...ks,...Es,order(t){return _o[t]||100},color(t,e){let r=e?cr:le;return r[t]||r.unknown},colorRand(t,e){let r=e?cr:le,n=e?fu:pu;if(!n.has(t)){let s=Object.keys(r);n.set(t,r[s[Math.floor(Math.random()*s.length)]])}return n.get(t)},abbr(t){return mu[t]||t},hotness(t){return ct[t]||"unknown"},toFixed(t,e=2){return Number(t).toFixed(e)},percent(t,e=2){return(100*t).toFixed(e)+"%"},totalPercent(t,e=2){let r=(this.context.context||this.context)?.data?.totalTime,n=100*t/r,s=1/Math.pow(10,e||1);return n>=s?n.toFixed(e||1)+"%":n!==0?"<"+s+"%":"0%"},duration(t){let e=(this.context.context||this.context)?.data?.totalTime,r=100*t/e;return(t/1e3).toFixed(1)+"ms"+(r>=.01?" / "+r.toFixed(2)+"%":"")},ms(t){return(t/1e3).toFixed(1)+"ms"},kb(t){return(t/1e3).toFixed(1)+"Kb"},unit(t,e=this.context.currentProfile?.type){return(t/1e3).toFixed(1)+(e==="memory"?"Kb":"ms")},bytes(t,e="b",r=1e3){return xs(t,[e||"","Kb","Mb","Gb"],r)},shortNum(t){return xs(t,["","K","M","G"])},formatMicrosecondsTime:Fr,formatMicrosecondsTimeFixed(t,e){return Fr(t,e,!0)},zip(t,e=s=>s,r,n=s=>s){let s=new Map(t.map(o=>[e(o),{left:o,right:null}]));for(let o of r){let i=s.get(n(o));i!==void 0&&(i.right=o)}return[...s.values()]},getEntry(t,e){if(typeof t?.getEntry=="function")return t.getEntry(e)},allocationsMatrix(t,e,r,n=this.context.data.currentProfile){let{_memoryGc:s,_memoryType:o,_memoryTypeNames:i}=n,{samples:a,timeDeltas:l}=e,c=ut.length,f=i.length,u=new Uint32Array(c*f),p=new Uint32Array(c*f),m=new Uint32Array(c*f),h=new Uint32Array(c*f),C=mt(t,r),y=[];for(let d=0;d<a.length;d++)if(C[a[d]]!==0){let g=l[d];if(g!==0){let b=o[d]*c+s[d];u[b]++,p[b]+=g,m[b]=m[b]?Math.min(m[b],g):g,h[b]=Math.max(h[b],g)}}for(let d=0;d<i.length;d++){let g={type:i[d],total:{count:0,sum:0,min:1/0,max:0}};for(let b=0;b<ut.length;b++){let S=d*c+b;u[S]>0&&(g.total.count+=u[S],g.total.sum+=p[S],g.total.min=Math.min(g.total.min,m[S]),g.total.max=Math.max(g.total.max,h[S])),g[ut[b]]={count:u[S],sum:p[S],min:m[S],max:h[S]}}g.total.count&&y.push(g)}return y}},ws=du;var _s={0:"read_only_space",1:"new_space",2:"old_space",3:"code_space",4:"shared_space",5:"new_lo_space",6:"lo_space",7:"code_lo_space",8:"shared_lo_space"},Ps={0:"alive",1:"short-lived",2:"long-lived"},Is={0:"INTERNALIZED_STRING",2:"EXTERNAL_INTERNALIZED_STRING",8:"ONE_BYTE_INTERNALIZED_STRING",10:"EXTERNAL_ONE_BYTE_INTERNALIZED_STRING",18:"UNCACHED_EXTERNAL_INTERNALIZED_STRING",26:"UNCACHED_EXTERNAL_ONE_BYTE_INTERNALIZED_STRING",32:"STRING",33:"CONS_STRING",34:"EXTERNAL_STRING",35:"SLICED_STRING",37:"THIN_STRING",40:"ONE_BYTE_STRING",41:"CONS_ONE_BYTE_STRING",42:"EXTERNAL_ONE_BYTE_STRING",43:"SLICED_ONE_BYTE_STRING",50:"UNCACHED_EXTERNAL_STRING",58:"UNCACHED_EXTERNAL_ONE_BYTE_STRING",96:"SHARED_STRING",98:"SHARED_EXTERNAL_STRING",104:"SHARED_ONE_BYTE_STRING",106:"SHARED_EXTERNAL_ONE_BYTE_STRING",114:"SHARED_UNCACHED_EXTERNAL_STRING",122:"SHARED_UNCACHED_EXTERNAL_ONE_BYTE_STRING",128:"SYMBOL",129:"BIG_INT_BASE",130:"HEAP_NUMBER",131:"ODDBALL",132:"PROMISE_FULFILL_REACTION_JOB_TASK",133:"PROMISE_REJECT_REACTION_JOB_TASK",134:"CALLABLE_TASK",135:"CALLBACK_TASK",136:"PROMISE_RESOLVE_THENABLE_JOB_TASK",137:"LOAD_HANDLER",138:"STORE_HANDLER",139:"FUNCTION_TEMPLATE_INFO",140:"OBJECT_TEMPLATE_INFO",141:"ACCESS_CHECK_INFO",142:"ACCESSOR_PAIR",143:"ALIASED_ARGUMENTS_ENTRY",144:"ALLOCATION_MEMENTO",145:"ALLOCATION_SITE",146:"ARRAY_BOILERPLATE_DESCRIPTION",147:"ASM_WASM_DATA",148:"ASYNC_GENERATOR_REQUEST",149:"BREAK_POINT",150:"BREAK_POINT_INFO",151:"CALL_SITE_INFO",152:"CLASS_POSITIONS",153:"DEBUG_INFO",154:"ENUM_CACHE",155:"ERROR_STACK_DATA",156:"FEEDBACK_CELL",157:"FUNCTION_TEMPLATE_RARE_DATA",158:"INTERCEPTOR_INFO",159:"INTERPRETER_DATA",160:"MODULE_REQUEST",161:"PROMISE_CAPABILITY",162:"PROMISE_ON_STACK",163:"PROMISE_REACTION",164:"PROPERTY_DESCRIPTOR_OBJECT",165:"PROTOTYPE_INFO",166:"REG_EXP_BOILERPLATE_DESCRIPTION",167:"SCRIPT",168:"SCRIPT_OR_MODULE",169:"SOURCE_TEXT_MODULE_INFO_ENTRY",170:"STACK_FRAME_INFO",171:"TEMPLATE_OBJECT_DESCRIPTION",172:"TUPLE2",173:"WASM_EXCEPTION_TAG",174:"WASM_INDIRECT_FUNCTION_TABLE",175:"FIXED_ARRAY",176:"HASH_TABLE",177:"EPHEMERON_HASH_TABLE",178:"GLOBAL_DICTIONARY",179:"NAME_DICTIONARY",180:"NAME_TO_INDEX_HASH_TABLE",181:"NUMBER_DICTIONARY",182:"ORDERED_HASH_MAP",183:"ORDERED_HASH_SET",184:"ORDERED_NAME_DICTIONARY",185:"REGISTERED_SYMBOL_TABLE",186:"SIMPLE_NUMBER_DICTIONARY",187:"CLOSURE_FEEDBACK_CELL_ARRAY",188:"OBJECT_BOILERPLATE_DESCRIPTION",189:"SCRIPT_CONTEXT_TABLE",190:"BYTE_ARRAY",191:"BYTECODE_ARRAY",192:"FIXED_DOUBLE_ARRAY",193:"INTERNAL_CLASS_WITH_SMI_ELEMENTS",194:"SLOPPY_ARGUMENTS_ELEMENTS",195:"TURBOSHAFT_FLOAT64_TYPE",196:"TURBOSHAFT_FLOAT64_RANGE_TYPE",197:"TURBOSHAFT_FLOAT64_SET_TYPE",198:"TURBOSHAFT_WORD32_TYPE",199:"TURBOSHAFT_WORD32_RANGE_TYPE",200:"TURBOSHAFT_WORD32_SET_TYPE",201:"TURBOSHAFT_WORD64_TYPE",202:"TURBOSHAFT_WORD64_RANGE_TYPE",203:"TURBOSHAFT_WORD64_SET_TYPE",204:"FOREIGN",205:"AWAIT_CONTEXT",206:"BLOCK_CONTEXT",207:"CATCH_CONTEXT",208:"DEBUG_EVALUATE_CONTEXT",209:"EVAL_CONTEXT",210:"FUNCTION_CONTEXT",211:"MODULE_CONTEXT",212:"NATIVE_CONTEXT",213:"SCRIPT_CONTEXT",214:"WITH_CONTEXT",215:"TURBOFAN_BITSET_TYPE",216:"TURBOFAN_HEAP_CONSTANT_TYPE",217:"TURBOFAN_OTHER_NUMBER_CONSTANT_TYPE",218:"TURBOFAN_RANGE_TYPE",219:"TURBOFAN_UNION_TYPE",220:"UNCOMPILED_DATA_WITH_PREPARSE_DATA",221:"UNCOMPILED_DATA_WITH_PREPARSE_DATA_AND_JOB",222:"UNCOMPILED_DATA_WITHOUT_PREPARSE_DATA",223:"UNCOMPILED_DATA_WITHOUT_PREPARSE_DATA_WITH_JOB",224:"WASM_FUNCTION_DATA",225:"WASM_CAPI_FUNCTION_DATA",226:"WASM_EXPORTED_FUNCTION_DATA",227:"WASM_JS_FUNCTION_DATA",228:"EXPORTED_SUB_CLASS_BASE",229:"EXPORTED_SUB_CLASS",230:"EXPORTED_SUB_CLASS2",231:"SMALL_ORDERED_HASH_MAP",232:"SMALL_ORDERED_HASH_SET",233:"SMALL_ORDERED_NAME_DICTIONARY",234:"ABSTRACT_INTERNAL_CLASS_SUBCLASS1",235:"ABSTRACT_INTERNAL_CLASS_SUBCLASS2",236:"DESCRIPTOR_ARRAY",237:"STRONG_DESCRIPTOR_ARRAY",238:"SOURCE_TEXT_MODULE",239:"SYNTHETIC_MODULE",240:"WEAK_FIXED_ARRAY",241:"TRANSITION_ARRAY",242:"ACCESSOR_INFO",243:"CALL_HANDLER_INFO",244:"CELL",245:"CODE",246:"COVERAGE_INFO",247:"EMBEDDER_DATA_ARRAY",248:"FEEDBACK_METADATA",249:"FEEDBACK_VECTOR",250:"FILLER",251:"FREE_SPACE",252:"INSTRUCTION_STREAM",253:"INTERNAL_CLASS",254:"INTERNAL_CLASS_WITH_STRUCT_ELEMENTS",255:"MAP",256:"MEGA_DOM_HANDLER",257:"ON_HEAP_BASIC_BLOCK_PROFILER_DATA",258:"PREPARSE_DATA",259:"PROPERTY_ARRAY",260:"PROPERTY_CELL",261:"SCOPE_INFO",262:"SHARED_FUNCTION_INFO",263:"SMI_BOX",264:"SMI_PAIR",265:"SORT_STATE",266:"SWISS_NAME_DICTIONARY",267:"WASM_API_FUNCTION_REF",268:"WASM_CONTINUATION_OBJECT",269:"WASM_INTERNAL_FUNCTION",270:"WASM_NULL",271:"WASM_RESUME_DATA",272:"WASM_STRING_VIEW_ITER",273:"WASM_TYPE_INFO",274:"WEAK_ARRAY_LIST",275:"WEAK_CELL",276:"WASM_ARRAY",277:"WASM_STRUCT",278:"JS_PROXY",1057:"JS_OBJECT",279:"JS_GLOBAL_OBJECT",280:"JS_GLOBAL_PROXY",281:"JS_MODULE_NAMESPACE",1040:"JS_SPECIAL_API_OBJECT",1041:"JS_PRIMITIVE_WRAPPER",1058:"JS_API_OBJECT",2058:"JS_LAST_DUMMY_API_OBJECT",2059:"JS_DATA_VIEW",2060:"JS_RAB_GSAB_DATA_VIEW",2061:"JS_TYPED_ARRAY",2062:"JS_ARRAY_BUFFER",2063:"JS_PROMISE",2064:"JS_BOUND_FUNCTION",2065:"JS_WRAPPED_FUNCTION",2066:"JS_FUNCTION",2067:"BIGINT64_TYPED_ARRAY_CONSTRUCTOR",2068:"BIGUINT64_TYPED_ARRAY_CONSTRUCTOR",2069:"FLOAT32_TYPED_ARRAY_CONSTRUCTOR",2070:"FLOAT64_TYPED_ARRAY_CONSTRUCTOR",2071:"INT16_TYPED_ARRAY_CONSTRUCTOR",2072:"INT32_TYPED_ARRAY_CONSTRUCTOR",2073:"INT8_TYPED_ARRAY_CONSTRUCTOR",2074:"UINT16_TYPED_ARRAY_CONSTRUCTOR",2075:"UINT32_TYPED_ARRAY_CONSTRUCTOR",2076:"UINT8_CLAMPED_TYPED_ARRAY_CONSTRUCTOR",2077:"UINT8_TYPED_ARRAY_CONSTRUCTOR",2078:"JS_ARRAY_CONSTRUCTOR",2079:"JS_PROMISE_CONSTRUCTOR",2080:"JS_REG_EXP_CONSTRUCTOR",2081:"JS_CLASS_CONSTRUCTOR",2082:"JS_ARRAY_ITERATOR_PROTOTYPE",2083:"JS_ITERATOR_PROTOTYPE",2084:"JS_MAP_ITERATOR_PROTOTYPE",2085:"JS_OBJECT_PROTOTYPE",2086:"JS_PROMISE_PROTOTYPE",2087:"JS_REG_EXP_PROTOTYPE",2088:"JS_SET_ITERATOR_PROTOTYPE",2089:"JS_SET_PROTOTYPE",2090:"JS_STRING_ITERATOR_PROTOTYPE",2091:"JS_TYPED_ARRAY_PROTOTYPE",2092:"JS_MAP_KEY_ITERATOR",2093:"JS_MAP_KEY_VALUE_ITERATOR",2094:"JS_MAP_VALUE_ITERATOR",2095:"JS_SET_KEY_VALUE_ITERATOR",2096:"JS_SET_VALUE_ITERATOR",2097:"JS_ATOMICS_CONDITION",2098:"JS_ATOMICS_MUTEX",2099:"JS_SHARED_ARRAY",2100:"JS_SHARED_STRUCT",2101:"JS_ITERATOR_DROP_HELPER",2102:"JS_ITERATOR_FILTER_HELPER",2103:"JS_ITERATOR_MAP_HELPER",2104:"JS_ITERATOR_TAKE_HELPER",2105:"JS_GENERATOR_OBJECT",2106:"JS_ASYNC_FUNCTION_OBJECT",2107:"JS_ASYNC_GENERATOR_OBJECT",2108:"JS_MAP",2109:"JS_SET",2110:"JS_WEAK_MAP",2111:"JS_WEAK_SET",2112:"JS_ARGUMENTS_OBJECT",2113:"JS_ARRAY",2114:"JS_ARRAY_ITERATOR",2115:"JS_ASYNC_FROM_SYNC_ITERATOR",2116:"JS_COLLATOR",2117:"JS_CONTEXT_EXTENSION_OBJECT",2118:"JS_DATE",2119:"JS_DATE_TIME_FORMAT",2120:"JS_DISPLAY_NAMES",2121:"JS_DURATION_FORMAT",2122:"JS_ERROR",2123:"JS_EXTERNAL_OBJECT",2124:"JS_FINALIZATION_REGISTRY",2125:"JS_LIST_FORMAT",2126:"JS_LOCALE",2127:"JS_MESSAGE_OBJECT",2128:"JS_NUMBER_FORMAT",2129:"JS_PLURAL_RULES",2130:"JS_RAW_JSON",2131:"JS_REG_EXP",2132:"JS_REG_EXP_STRING_ITERATOR",2133:"JS_RELATIVE_TIME_FORMAT",2134:"JS_SEGMENT_ITERATOR",2135:"JS_SEGMENTER",2136:"JS_SEGMENTS",2137:"JS_SHADOW_REALM",2138:"JS_STRING_ITERATOR",2139:"JS_TEMPORAL_CALENDAR",2140:"JS_TEMPORAL_DURATION",2141:"JS_TEMPORAL_INSTANT",2142:"JS_TEMPORAL_PLAIN_DATE",2143:"JS_TEMPORAL_PLAIN_DATE_TIME",2144:"JS_TEMPORAL_PLAIN_MONTH_DAY",2145:"JS_TEMPORAL_PLAIN_TIME",2146:"JS_TEMPORAL_PLAIN_YEAR_MONTH",2147:"JS_TEMPORAL_TIME_ZONE",2148:"JS_TEMPORAL_ZONED_DATE_TIME",2149:"JS_V8_BREAK_ITERATOR",2150:"JS_VALID_ITERATOR_WRAPPER",2151:"JS_WEAK_REF",2152:"WASM_EXCEPTION_PACKAGE",2153:"WASM_GLOBAL_OBJECT",2154:"WASM_INSTANCE_OBJECT",2155:"WASM_MEMORY_OBJECT",2156:"WASM_MODULE_OBJECT",2157:"WASM_SUSPENDER_OBJECT",2158:"WASM_TABLE_OBJECT",2159:"WASM_TAG_OBJECT",2160:"WASM_VALUE_OBJECT"};function Dr(t){return typeof t=="object"&&t!==null}function Ns(t){let e=t;if(!Dr(e)||typeof e.id!="number"||!Dr(e.callFrame))return!1;let r=e.callFrame.scriptId;return!(typeof r!="string"&&(typeof r!="number"||!Number.isInteger(r)))}function Br(t){return!Array.isArray(t)||ArrayBuffer.isView(t)?!1:t.length>0?Number.isInteger(t[0])&&(t.length===1||Number.isInteger(t[1])):!0}function Os(t,e){return Array.isArray(t)?t.length>0?e(t[0])&&(t.length===1||e(t[1])):!0:!1}function hu(t){return Os(t,e=>typeof e=="object"&&e!==null&&"size"in e&&typeof e.size=="number")}function Pt(t){let e=t;return!(!Dr(e)||!Os(e.nodes,Ns)&&!("head"in e&&Ns(e.head))||!hu(e.samples)&&(!Br(e.samples)||!Br(e.timeDeltas)))}function Ms(t){let e=t.nodes;if(e.length<2||typeof e[0].parent!="number"&&typeof e[1].parent!="number")return;let r=new Map;for(let n of t.nodes)(!Array.isArray(n.children)||n.children.length===0)&&r.set(n.id,n);if(r.size>0){for(let n of e)if(typeof n.parent=="number"){let s=r.get(n.parent);s!==void 0&&(Array.isArray(s.children)?s.children.push(n.id):s.children=[n.id])}}}function Rs(t,e=[]){let r=t.children;if(Array.isArray(r)){e.push({...t,children:r.map(n=>n.id)});for(let n of r)Rs(n,e)}return e}function Fs(t){let e=t.head;return e?{...t,nodes:Rs(e)}:t}function vs(t,e){if(t.length>0&&e in t[0])return t.map(r=>r[e])}function vr(t,e,r,n=!1){let s=vs(t,e),o=[];if(s!==void 0){let i=new Map([...new Set(s)].map((a,l)=>[a,l]));s=s.map(a=>i.get(a)||0),o=[...i.keys()].map(a=>n||!Object.hasOwn(r,a)?`(${a}) ${r[a]||"unknown"}`:r[a]||"unknown")}return{vector:s,names:o}}function Ds(t){if(Br(t.samples))return t;let e=t.samples;e=e.slice().sort((l,c)=>l.ordinal-c.ordinal);let{vector:r,names:n}=vr(e,"type",Is,!0),{vector:s,names:o}=vr(e,"space",_s),{vector:i,names:a}=vr(e,"gc",Ps);return{...t,_type:"memory",_memoryGc:i,_memoryGcNames:a,_memoryType:r,_memoryTypeNames:n,_memorySpace:s,_memorySpaceNames:o,_samplePositions:vs(e,"pos"),_scripts:t._scripts||t.scripts||void 0,samples:e.map(l=>l.nodeId),timeDeltas:e.map(l=>l.size)}}function Bs(t){let{meta:e}=t;return!!(e&&e.fileDocumentType==="x-msedge-session-log"&&e.type==="performance")}function Ls(t){let e=[],r=[];for(let s of t.scripts||[])s.sourceText&&e.push({id:Number(s.scriptId),url:s.url,source:s.sourceText});for(let s of t.executionContexts||[])s.name&&r.push({origin:s.origin,name:s.name});return{...t.payload,runtime:"edge",executionContexts:r,scripts:e}}function Lr(t){if(!Array.isArray(t))return typeof t=="object"&&t!==null&&"traceEvents"in t?Lr(t.traceEvents):!1;if(t.length===0)return!0;let e=t[0];return"pid"in e&&"tid"in e&&"ph"in e&&"cat"in e}function Us(t){let e=new Map,r=new Map,n=new Map;"traceEvents"in t&&(t=t.traceEvents),t=t.filter(i=>i.name==="CpuProfile"||i.name==="Profile"||i.name==="ProfileChunk"||i.name==="process_name"||i.name==="thread_name").sort((i,a)=>i.ts-a.ts);for(let i of t){if(i.name==="CpuProfile"){let a=`${i.pid}:0x1`,l=i.args.data.cpuProfile;e.set(a,l)}if(i.name==="Profile"){let a=`${i.pid}:${i.id}`,l={_name:n.get(i.tid)||null,startTime:0,endTime:0,nodes:[],samples:[],timeDeltas:[],...i.args.data};e.set(a,l)}if(i.name==="thread_name"&&n.set(i.tid,i.args.name),i.name==="process_name"&&r.set(i.pid,i.args.name),i.name==="ProfileChunk"){let a=`${i.pid}:${i.id}`,l=e.get(a),c=i.args.data;if(!l){console.warn(`Ignoring ProfileChunk for undeclared Profile with id ${a}`);continue}if(c.cpuProfile){let{nodes:f,samples:u}=c.cpuProfile;Array.isArray(f)&&f.length>0&&l.nodes.push(...f),u&&l.samples.push(...u)}c.timeDeltas&&l.timeDeltas.push(...c.timeDeltas),c.startTime!=null&&(l.startTime=c.startTime),c.endTime!=null&&(l.endTime=c.endTime)}}if(e.size===0)throw new Error("Could not find CPU profile in Timeline");let s=[],o=-1;for(let[i,a]of e)(r.get(parseInt(i))||"Unknown")==="CrRendererMain"&&(o=s.length),s.push(a);return o===-1&&(o=s.reduce((i,a,l,c)=>c[i].nodes.length<a.nodes.length?l:i,0)),{indexToView:o,profiles:s}}var js="1.0.0-beta.15";var $=Object.hasOwn||((t,e)=>Object.hasOwnProperty.call(t,e)),gu=Object.prototype.toString;function Se(t,e){return e!==void 0&&(M(e)?e.forEach(r=>t.add(r)):t.add(e)),t}function It(t,e,r){t.has(e)?t.get(e).add(r):t.set(e,new Set([r]))}function $s(t,e){return t&&$(t,e)?t[e]:void 0}function X(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function ne(t){return gu.call(t)==="[object RegExp]"}function te(t){return t&&(M(t)||$(t,"length")&&isFinite(t.length))}function M(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function ce(t,e=0){let r=parseInt(t,10);return isNaN(r)?e:r}function H(t){if(M(t))return t.length>0;if(X(t)){for(let e in t)if($(t,e))return!0;return!1}return!!t}var yu=function(){return{yy:{},options:{ranges:!0},rules:[/^(?:\/\/.*?(?:\n|\r\n?|\u2028|\u2029|$)|\/\*(?:.|\s)*?(?:\*\/|$))/,/^\s+/,/^\//,/^<(?!=)/,/^/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*\(?)/,/^/,(e,r)=>{if(e[0]!==(r==="template"?"}":"`"))return null;for(let n=1;n<e.length;n++){if(e[n]==="`")return n+1;if(e[n]==="$"&&e[n+1]==="{")return n+2;e[n]==="\\"&&n++}return null},(e,r)=>{if(e[0]!==(r==="template"?"}":"`"))return null;for(let n=1;n<e.length;n++){if(e[n]==="`")return n+1;if(e[n]==="$"&&e[n+1]==="{")return n+2;e[n]==="\\"&&n++}return null},/^/,/^\(/,/^\)/,/^\[/,/^\]/,/^\{/,/^\}/,/^(?:(true|false|null|undefined|Infinity|NaN)\b)/,/^and\b/,/^or\b/,/^is\b/,/^has\s+no\b/,/^has\b/,/^in\b/,/^not\s+in\b/,/^not\b/,/^no\b/,/^(?:(asc|desc)(NA?|AN?)?\b)/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*\()/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*\()/,/^(?:(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^(?:\$(?:[a-zA-Z_]|\\u[0-9a-fA-F]{4})(?:[a-zA-Z_$0-9]|\\u[0-9a-fA-F]{4})*)/,/^(?:[_\d]*\.)?[_\d]+(?:[eE][-+]?[_\d]+)?\b/,/^(?:\d*\.)?\d+(?:[eE][-+]?\d+)?\b/,/^0[xX][_0-9a-fA-F]+/,/^0[xX][0-9a-fA-F]+/,/^(?:"(?:\\[\\"]|[^"])*")/,/^(?:'(?:\\[\\']|[^'])*')/,/^(?:\/(?:\\.|[^/])+\/[gimsu]*)/,/^@/,/^#/,/^\$\$/,/^\$/,/^=>/,/^=/,/^!=/,/^~=/,/^>=/,/^<=/,/^</,/^>/,/^\.\.\(/,/^\.\(/,/^\.\[/,/^\.\.\./,/^\.\./,/^\./,/^\?\?/,/^\?/,/^,/,/^:/,/^;/,/^\-/,/^\+/,/^\*/,/^\//,/^\%/,/^(?:\|)/,/^./,/^$/],conditions:{preventPrimitive:{rules:[0,1,2,3,4,7,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68],inclusive:!0},preventKeyword:{rules:[5,6],inclusive:!1},template:{rules:[8,9],inclusive:!1},INITIAL:{rules:[0,1,7,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68],inclusive:!0}},performAction(e,r,n,s){let o=s;switch(n){case 0:{e.commentRanges.push(r.yylloc.range);break}case 1:break;case 2:{return this.popState(),40;break}case 3:{return this.popState(),44;break}case 4:{this.done=!1,this.popState();break}case 5:{if(this.popState(),r.yytext.endsWith("(")){this.unput(r.yytext);return}return e.pps(),14;break}case 6:{this.done=!1,this.popState();break}case 7:{let i=r.yytext.endsWith("`")?"TEMPLATE":"TPL_START";return r.yytext=this.toStringLiteral(r.yytext,!0,1+ +(i!=="TEMPLATE")),i==="TEMPLATE"&&e.pps(),i;break}case 8:{let i=r.yytext.endsWith("`")?"TPL_END":"TPL_CONTINUE";return r.yytext=this.toStringLiteral(r.yytext,!0,1+ +(i!=="TPL_END")),this.popState(),i==="TPL_END"&&e.pps(),i;break}case 9:{this.parseError("Unexpected end of input");break}case 10:return 21;case 11:{return e.pps(),22;break}case 12:return 61;case 13:{return e.pps(),63;break}case 14:return 84;case 15:{if(this.bracketStack[this.bracketStack.length-1]!=="TPL_END")return e.pps(),85;this.unput("}"),this.begin("template");break}case 16:{return r.yytext=this.toLiteral(r.yytext),57;break}case 17:return 36;case 18:return 37;case 19:return 30;case 20:return 35;case 21:return 33;case 22:return 32;case 23:return 34;case 24:return 25;case 25:return 26;case 26:return 95;case 27:{return r.yytext=r.yytext.slice(0,-1),70;break}case 28:{return r.yytext=r.yytext.slice(1,-1),72;break}case 29:{return e.pps(),14;break}case 30:{return e.pps(),r.yytext=r.yytext.slice(1),15;break}case 31:{return e.pps(),r.yytext=this.toNumberLiteral(r.yytext,!0),55;break}case 32:{return e.pps(),r.yytext=this.toNumberLiteral(r.yytext),55;break}case 33:{return e.pps(),r.yytext=this.toNumberLiteral(r.yytext,!0,!0),55;break}case 34:{return e.pps(),r.yytext=this.toNumberLiteral(r.yytext,!1,!0),55;break}case 35:{return e.pps(),r.yytext=this.toStringLiteral(r.yytext),54;break}case 36:{return e.pps(),r.yytext=this.toStringLiteral(r.yytext),54;break}case 37:{return e.pps(),r.yytext=this.toRegExp(r.yytext),56;break}case 38:{return e.pps(),51;break}case 39:{return e.pps(),52;break}case 40:{return e.pps(),53;break}case 41:{return e.pps(),9;break}case 42:return 20;case 43:return 42;case 44:return 43;case 45:return 48;case 46:return 47;case 47:return 45;case 48:return 44;case 49:return 46;case 50:return 69;case 51:return 66;case 52:return 67;case 53:return 89;case 54:{return e.pps(),e.pks(),68;break}case 55:{return e.pps(),e.pks(),65;break}case 56:return 38;case 57:return 17;case 58:return 73;case 59:return 11;case 60:return 10;case 61:return 27;case 62:return 28;case 63:return 39;case 64:return 40;case 65:return 41;case 66:return 29;case 67:{this.parseError(`Bad input on line ${r.yylloc.first_line} column ${r.yylloc.first_column}
`+this.showPosition(),{text:r.yytext,token:"BAD_TOKEN"});break}case 68:return 5}},setInput(e,r){return this.yy=r||this.yy||{},this._input=e,this._more=!1,this._backtrack=!1,this.done=!1,this.currentCondition="INITIAL",this.conditionStack=["INITIAL"],this.offset=0,this.yytext=this.match="",this.yyleng=0,this.yylineno=0,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.yylloc.range=[0,0],this},parseError(e,r){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,r)},input(){let e=this._input[this.offset],r=/\n|\r\n?|\u2028|\u2029/g.test(e);return this.offset++,this.yyleng++,this.yytext=this.match=this.yytext+e,r?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,e},lineColumnForOffset(e=this.offset,r=this._input,n=1,s=0){let o=/\n|\r\n?|\u2028|\u2029/g,i=n,a=s,l=0,c;for(;(c=o.exec(r))!==null;)if(c.index<e)i++,a=0,l=c.index+c[0].length;else{a+=e-l,l=-1;break}return l!==-1&&(a+=e-l),{line:i,column:a}},setMatch(e,r){let n=this._input.slice(e,r),s=e!==this.offset?this.lineColumnForOffset(e):{line:this.yylloc.last_line,column:this.yylloc.last_column},o=e!==r?this.lineColumnForOffset(r-e,n,s.line,s.column):s;this.yytext=this.match=n,this.yyleng=r-e,this.offset=r,this.yylineno=o.line-1,this.yylloc={first_line:s.line,first_column:s.column,last_line:o.line,last_column:o.column},this.yylloc.range=[e,r]},less(e){let r=this.offset-this.match.length;this.setMatch(r,r+e)},unput(e){let r=this.match.length-e.length;if(!this.match.startsWith(e,r))throw new Error("Lexer#unput() should receive a part of matched text only");this.less(r)},more(){this._more=!0},reject(){throw new Error("reject() is allowed only when options.backtrack_lexer = true")},showPosition(e=this.offset-this.match.length){let r=this._input,n=Math.max(e-20,0),s=Math.min(e+20,r.length),o=(n===0?"":"...")+r.slice(n,e).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n"),i=r.slice(e,s).replace(/\n|\r\n?|\u2028|\u2029/g,"\\n")+(s===r.length?"":"...");return o+i+`
${"-".repeat(o.length)}^`},test_match(e,r){let n;this._more=!1,this._backtrack=!1,this.setMatch(this.offset,this.offset+e[0].length),this.matches=e;let s=this.performAction.call(this,this.yy,this,r,this.conditionStack[this.conditionStack.length-1]);return!s&&this._backtrack?(Object.assign(this,n),!1):(this.eof()||(this.done=!1),typeof s=="number"&&this.yy.parser?this.yy.parser.terminals_[s]:s||!1)},eof(){return this.offset===this._input.length},next(){if(this.done)return 1;this.eof()&&(this.done=!0),this._more||(this.yytext="",this.match="");let e,r;for(let n of this.conditions[this.currentCondition].rules){let s=this.rules[n],o=this._input.slice(this.offset),i;if(typeof s=="function"){let a=s(o,this.currentCondition);switch(typeof a){case"string":i=[a];break;case"number":i=[o.slice(0,a)];break;default:i=a}}else i=o.match(s);if(i&&(!e||i[0].length>e[0].length)){e=i,r=n;break}}if(e)return this.test_match(e,r);if(this.eof())return 1;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex(){let e;for(;!e;)e=this.next();return e},begin(e){this.currentCondition=e,this.conditionStack.push(e)},pushState(e){this.begin(e)},popState(){return this.conditionStack.pop(),this.currentCondition=this.conditionStack.length?this.conditionStack[this.conditionStack.length-1]:"INITIAL"},topState(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},stateStackSize(){return this.conditionStack.length}}}();function Ur(){this.yy={}}Ur.prototype={Parser:Ur,lexer:yu,symbols_:{error:2,root:3,block:4,EOF:5,definitions:6,e:7,def:8,$:9,";":10,":":11,$ident:12,ident:13,IDENT:14,$IDENT:15,condConsequent:16,"?":17,condAlternate:18,query:19,"=>":20,"(":21,")":22,functionArgs:23,compareFunction:24,NOT:25,NO:26,"-":27,"+":28,"|":29,IS:30,assertion:31,IN:32,HAS:33,NOTIN:34,HASNO:35,AND:36,OR:37,"??":38,"*":39,"/":40,"%":41,"=":42,"!=":43,"<":44,"<=":45,">":46,">=":47,"~=":48,queryRoot:49,relativePath:50,"@":51,"#":52,$$:53,STRING:54,NUMBER:55,REGEXP:56,LITERAL:57,template:58,object:59,array:60,"[":61,sliceNotation:62,"]":63,"method()":64,".":65,".(":66,".[":67,"..":68,"..(":69,"METHOD(":70,arguments:71,"$METHOD(":72,",":73,functionArg:74,templateString:75,templateStart:76,templateTail:77,templateEnd:78,templateContinue:79,TEMPLATE:80,TPL_START:81,TPL_CONTINUE:82,TPL_END:83,"{":84,"}":85,objectEntries:86,objectEntry:87,objectEntryKeyLiteral:88,"...":89,arrayElements:90,arrayElement:91,assertionTerm:92,assertionList:93,compareExpr:94,ORDER:95,sliceNotationComponent:96,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"$",10:";",11:":",14:"IDENT",15:"$IDENT",17:"?",20:"=>",21:"(",22:")",25:"NOT",26:"NO",27:"-",28:"+",29:"|",30:"IS",32:"IN",33:"HAS",34:"NOTIN",35:"HASNO",36:"AND",37:"OR",38:"??",39:"*",40:"/",41:"%",42:"=",43:"!=",44:"<",45:"<=",46:">",47:">=",48:"~=",51:"@",52:"#",53:"$$",54:"STRING",55:"NUMBER",56:"REGEXP",57:"LITERAL",61:"[",63:"]",65:".",66:".(",67:".[",68:"..",69:"..(",70:"METHOD(",72:"$METHOD(",73:",",80:"TEMPLATE",81:"TPL_START",82:"TPL_CONTINUE",83:"TPL_END",84:"{",85:"}",89:"...",95:"ORDER"},productions_:[0,[3,2],[4,2],[4,1],[4,1],[4,0],[6,1],[6,2],[8,2],[8,4],[8,2],[8,4],[13,1],[12,1],[16,2],[16,1],[18,2],[18,1],[18,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,1],[7,2],[7,2],[7,2],[7,2],[7,3],[7,4],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[7,3],[19,1],[19,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,1],[49,3],[49,2],[49,2],[49,1],[49,1],[49,3],[49,4],[49,2],[49,2],[49,3],[49,3],[49,2],[49,2],[49,3],[49,2],[49,3],[50,3],[50,4],[50,4],[50,3],[50,3],[50,4],[50,4],[50,3],[50,3],[50,4],[64,2],[64,3],[64,2],[64,3],[71,1],[71,3],[74,1],[23,1],[23,3],[58,1],[58,2],[77,1],[77,2],[77,2],[77,3],[75,1],[76,1],[79,1],[78,1],[59,2],[59,3],[59,4],[59,3],[59,4],[59,5],[86,1],[86,3],[88,1],[88,1],[88,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,3],[87,3],[87,3],[87,2],[87,2],[87,2],[87,5],[87,1],[87,2],[90,1],[90,3],[91,1],[91,1],[91,2],[60,2],[60,3],[60,4],[31,1],[31,2],[31,3],[31,4],[92,1],[92,1],[92,1],[92,1],[93,1],[93,3],[93,3],[24,1],[24,3],[94,2],[62,1],[62,2],[62,2],[62,3],[96,1],[96,2]],table:function(e){function r(p){let m=p.match(/[\x20-\x2f]/g),h=m?Math.max(...m.map(C=>C.charCodeAt()-32)):-1;for(let C=h;C>=0;C--){let y=(32+C).toString(16),d;p=p.replace(new RegExp("\\[\\x"+y+"(.+?)\\]"),(g,b)=>d=b).replace(new RegExp("\\x"+y,"g"),d)}return p=p.replace(/<([^>]+?)>/g,(C,y)=>{let d=o[y[0]],g=1;return d>>5===1&&(d=d&31|o[y[1]]<<5,g=2),y.slice(g).repeat(d)}),p}function n(p){let m=[];for(let h=0;h<p.length;h++){let C=o[p[h]];if(C&32){let y=o[p[++h]];m.push(C&31|y<<5)}else m.push(C)}return m}let o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789~|=".split("").reduce((p,m,h)=>(p[m]=h,p),Object.create(null)),[i,a,...l]=e.split("=").map(r),c=a.split(";").map(p=>{let m=[];for(let h=0;h<p.length;h++)for(let C=0,y=o[p[h]];C<3;C++)m.push(y>>C*2&3);return m}),f=l.map(n),u=n(i).map(p=>{let m=c[p],h=Object.create(null);for(let C=0;C<m.length;C++){let y=m[C];if(y!==0){let d=f[y-1].shift();h[C]=y===1?d:[y-1,d]}}return h});for(let p=0;p<f[3].length;p+=2)u[f[3][p]][f[3][p+1]]=[3];return u}(`ABCDEFGHIJKHHHHLL<NM>NOPMMQRSQRTMUVWXYYMZaEFTO<TH>PMbQRSQRcMMHdefgBhBiBHj[ BjBkBk]BFHFHlBMmBnBoBpBqBrBMMsBtBMMMMXMWMMuB[!lBMMuB]vBgBMMwBUMZMxByBzB0B1B2B3B4BH5<DB6>BvBXe7BXevBgBM<E8B>9B~ <DB|>BgCgC<EhC>gCMMiC<C!>cHdjCMfMkClClCMMmCnCnBoCpCMtBqCrCvBMMMvBMUMMsCMxBHtCHtCtCHuCvCTXHXvB<FM>cHhBhBMFFMpBpCnCqCMOOMMzBzB2BMsCwCtCtCxC7BcMrCrCHMHtCtC=A1[ V[!C["lmkCpqC]]]<FA>[#[$[%[&['UqqWJkq]K]C][([)FgCCAAE];]]A];Ag;AwU[*ClmkOpqC]<FA>[+[,U[-qqWJnqK]]C(A]wAA[.A[/kAMAqi]]<Fq>CAAAAD<JA>g;AwADwzwP8|D<GA>||DMz|PDAwDPw;AwA8AwAMA|z<F|>DAAAIjqCMAA8MAAw;AAE!<FA>#wA8AwgMA|z<F|>DAAAMz|DMAA8MAAw;AAVClmkapqC<FA>&S(AwA8AwAMA|z<F|>DAAAMz|DIAA8MAAw;AwAoAwAMA|z<F|>DAAAMz|DMAA8MAAw;AwA8AwAMA|z<F|>DAAAMz|DMAA8MAAw;AAEi"<FA>UqqWZmqKCFgCCgFEB;AAAChCACIAE<IA>C<KA>Q;AwAsAwBMA|z<F|>DAAAMz|DMAA8MAAw;AAAAk<QA>EAIC;AEV*<FA>#E <FA>+A <FA>#AE!<FA>%VlqCAAE;AARClC<MA>KCIEAICAAAYl;AwE~lmkOp6y<F|>X-OFg~OAA0;AwA|wzwP8|z<F|>D||DMz|PPAw|PAAw;AAEClmkKpqC<FA>'aC(AAADwzwD8|D<GA>||DMw|PDAw|D;M;AAEi"<FA>UqqWZmqKC)B;AwA8.<Fq>CAAAMz|DMAA8MAA<Cg;AAAAAA>AI<QA>I;<FA>kAIAqi<Fq>C<OA>g;AAU!<FA>$<HA>M<QA>M;AAA8AwgMA|z<F|>DAAAMw|DM<GA>w;AwA8A0AMA6jq|qqqCAAAMz|DMAA8MAAw;AwA8A0AMA|z||q||DAAAMz|DMAA8MAAw<C;AAAAAAAAAAAAAAAAAAAAAC>AAI;AAAg<RA>D<KA>B;AAAgAkAAAqi<Fq>CAAAADAAM<GA>gB;<VA>DAAM;AAEy"<FA>+AE!<FA>,O(AAAChCACA<KA>C<KA>Q;AAAChCACIAE<IA>C<KA>QB;<HA>I;AwA8AkAMA6i<Fq>CAAAMz|DMAA8MAAw;<FA>kAAAqi<Fq>C<JA>FoAAAg;<YA>IAAAI;AAQClC<MA>KCIEAICAAAYl;<YA>MAAAM;AAAo<UA>MAAAM;AAEq"<FA>&OFgCOAAE;AAEi"<FA>&OFgCOAAE;AAE!<FA>&OFgCOAAE;AAAg<UA>MAAAM;AAAClmECAgC<FA>&OFgCO;AAAw<UA>MAAAM;<FA>/<Fq>C<HA>M<GA>g;AwA8A0AMA6z||qqqCAAAMz|DMAA8MAAw;AwA8A0AMA6jqvqqqCAAAMz|DMAA8MAAw;AwA8A0AMA6jquqqqCAAAMz|DMAA8MAAw;AwA8A0AMA|z<F|>DAAAMz|DMAA8MAAw;AwA8A0AMA6z||qvqDAAAMz|DMAA8MAAw;AwA8A0AMA6z||q||DAAAMz|DMAA8MAAw;AAAgAkAAAqi<Fq><CCAAAA><FA>gB;<FA>C<SA>Q;<FA>kAAAqi<Fq>C<OA>g;AAAIAkAAAqi<Fq>C<OA>g;AAE!<FA>UqqWJmqKCFgCCgEE;<VA>D;AAAwAkAAAqi<Fq>CAAAAD<JA>g;<FA>kAAAqi<Fq>CAAAADAAM<GA>g;<HA>IAAAAK;<HA>MAAAAP;AAAClC<MA>KCIEAICAAAIl;<FA>kAAAqi<Fq>C<HA>MAAAMAAg;<FA>kAAAqi<Fq><CCAAAA><FA>g;<UA>IgqCMAAAM;AAAIAkAAAqi<Fq>C<HA>MAAAMAAg;AAAg=BC[ D[!E["[#F[$QhBgBG]][%[&['[(KRSbcd]iB]pBqB]T]]]]zB[)0B$%qC]y[*C[[,+[-0ChBgB]]G%]]5C4C#3C'6CpBqBT9*~*|*gD+pD-G(lD[.iBpBqB]nDqDToDzDtDuD2D4D5D6D 7D 8D9D~D gE|D"jE-G&hEiEkETpEF[/sEtEuE]oEqEvE1E+4E-G'3EpBqBT4E-G'6EpBqBTqC8E7!zD9EuD~E+|E+gF+hF+iF+jF+kF+lF+mF+nF+oF+pF+qF+rF+sF+tF+uF+vF+wF+xFzF-G(0F.ToD1F2F3F 4F 5F6F7F qC8F+qChG0B$%jG-G&iG<EqC>kG+lG+pGqCqGrG+sG+zDtGzDwGuDvGxG+qC1G)2G3GjE-G&4GiEkET0B/8GqEvE~G+gH+hH+jH,kHRSbcd.qCqCqCpH0B$%<UqC>qGqCvH+xH<EqC>4H-G&3HT5HqCqCzDwGuD6HqCqCjE-G&~HiEkETiItEuEgIvElI+qCmI+qCqCnI+qC5C4C"pI+qCqCqI+qCzDsIuDzDtIuD~G+iItEuEgIvE<FqC>xI+yI+qCqC=[ [!["P[#[$[%[&['tBIsBHJ]LMNO][(oB[)fUVWXYZae]]][*jBkBlBmBnBuBvBwBxB]]r]]B]y][+B[,![-[.sB|B~B][/1B2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC]]]rC]sCtCuCvCwCxCzC#B1CPtB7CsBHJ2CLMNO(*rB8C<EzC#B>hDiDjDkDzCrD%mD*rBsDyDxD1DwDvD0D3D<CtBuBvB!!>zC$mElErBrEtB1DyEzE0EwEuBvBnExEzC&)*rBzC'2ELMNO(*rBzC'5ELMNO(*rB-rC DxD1DwDvD0D<TzC#B>3DzCrD%yF*rBtBuBv<CB">BtBuBv+zC#B9F~F|FsBgG|B~B/rC!1CzC#B<C|B~B3B4B5B6BgChCiCjCkClCmCnCoCpC><CgChCiC><CzC#B>mGnGoGrDrD-rC<CzC#B>yDxD1DuG0DyDxD1DwDvD0DzC&)*rByGzG0G.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC,mElErCzC$mElErB6G5GrEtB1DyEzE0EwEuBvB7GxEhDiDzCjD9G#BzC|G#BzC#BiHzC#BzCtB1DsBlH(*rB.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpCmHnH-rCoHnH.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC!<E|B~BgChCiCjCkClCmCnCoCpC>|B~B3B4B5B6B9BgChCiCjCkClCmCnCoCpC|B~B3B4B5B6B7B9BgChCiCjCkClCmCnCoCpC|B~B3B4B5B6BgChCiCjCkClCmCnCoCp<CCgChCi><CC|B~BgChCiClCmCnCo><FC|B~BgChCi>ClCmCnCoCrD-qHrCrHsHtHuH-rCzC#BwHyHsBzH|B~B/rC-rC0H-rC1H-rCzC%2H*rBsDrD<C-rC>yDxD1DwDvD0D7H8H9H<C.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC>zC$mElErBhItB1DyEzE0EwEuBvB|HxEkIjI<CzC#B-rC>-rCzC#B-oIrCsCtCuCvCwCxC!zC#B.2B3B4B5B6B7B8B9BgChCiCjCkClCmCnCoCpC-rCzC#B-rCrI8H9H<CyDxD1DwDvD0D>zCuI#BhItB1DyEzE0EwEuBvBvIxE1H<D-rC>wI<C-rC><CzC#B><C-rC>=FDDDEEE<jBG><gBT><mBN><lBY><kB4B><kB6B><mB0B><mB1B><mB7E><mB2B><mB3B><mB5B><mB7B><mB8B><mB9B><mB~B><mB|B><mBgC><mBhC><lBS><mBlC><mBmC>FFF<mBlD><cP><5BM><mBrD><gBsD>BCCC<jBH><lBS><mB9E>FFF<PU><mB4B><mB6B>jDjDNNNiD<bN>iDN<WZ><Wa><jBb><jBc><jBI><jBK><mBtE>~EqEqEoEoEiFiFrErE<mBjC><mBwE><mB0E><mB1E><mB2E><mB3E><5BN><mBkC><cR><mBpC><mBqC><mBtC><mBuC><RwC><mBmD><mBnD><mBuD><gBtD><mBvD>1D1[ D6D6D7D7D]8D8D9D9D~D~DmEmE<D3D><D4D><D5D><RO><5B8C>gDgD<5B~C><Rd><mBf><agB><ahB><aiB><ajB><VkB><UlB><WmB><jBnB><jBoB><mBpB><mBqB><mBrB><dsB><dtB><hBuB><hBvB><hBwB><hBxB><dyB><mBzB><mByC><mB1C><mB2C><mB5C><mB6C><PV><mBnC><mB8E><mBiC><mBuE>|EgFjFjFsEsE<mBxE><D4E><RQ><mBrC><mBsC><mBvC><RxC><mBoD><mBpD><mBwD><mByD>iEiEjEjEkEkEnEnE<5B9C><5B|C><Re><mBzC><mB0C><mB3C><mB4C><mB7C><PW>kDkDiDiD<mBoC><jBJ><jBL><mBvE>pEpEqEqEhF<mByE><mBqD><mBxD>2D2 <mBzD>hEhE|D|DgEgEhDhD<PX><mBzE><D5E><D6E><mB0D>hEhElElE=BB`),defaultActions:{50:[2,1],201:[2,159],249:[2,161]},performAction(t,e,r,n,s,o,i){let a=o.length-1;switch(s){case 1:return n.buildResult(o[a-1]);case 2:this.$={type:"Block",definitions:o[a-1],body:o[a],range:this._$.range};break;case 3:this.$={type:"Block",definitions:o[a],body:{type:"Placeholder",range:[i[a].range[1],i[a].range[1]]},range:this._$.range};break;case 4:this.$={type:"Block",definitions:[],body:o[a],range:this._$.range};break;case 5:this.$={type:"Block",definitions:[],body:{type:"Placeholder",range:[i[a].range[1],i[a].range[1]]},range:this._$.range};break;case 6:case 96:case 99:case 101:case 117:case 136:case 152:case 155:this.$=[o[a]];break;case 7:o[a-1].push(o[a]);break;case 8:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:i[a-1].range},value:null,range:this._$.range};break;case 9:this.$={type:"Definition",declarator:{type:"Declarator",name:null,range:i[a-3].range},value:o[a-1],range:this._$.range};break;case 10:this.$={type:"Definition",declarator:{type:"Declarator",name:o[a-1].name,range:i[a-1].range},value:null,range:this._$.range};break;case 11:this.$={type:"Definition",declarator:{type:"Declarator",name:o[a-3].name,range:i[a-3].range},value:o[a-1],range:this._$.range};break;case 12:case 13:case 98:case 148:case 149:this.$={type:"Identifier",name:o[a],range:this._$.range};break;case 14:case 16:case 163:this.$=o[a];break;case 15:case 17:this.$={type:"Placeholder",range:[i[a].range[1],i[a].range[1]]};break;case 18:case 162:this.$=null;break;case 19:case 52:case 53:case 64:case 65:case 138:break;case 20:case 22:this.$={type:"Function",arguments:[],body:o[a],range:this._$.range};break;case 21:this.$={type:"Function",arguments:[{type:"Identifier",name:o[a-2],range:i[a-2].range}],body:o[a],range:this._$.range};break;case 23:this.$={type:"Function",arguments:o[a-3],body:o[a],range:this._$.range};break;case 24:this.$={type:"CompareFunction",compares:o[a],range:this._$.range};break;case 25:case 26:case 27:case 28:case 67:this.$={type:"Prefix",operator:o[a-1],argument:o[a],range:this._$.range};break;case 29:this.$={type:"Pipeline",left:o[a-2],right:o[a],range:this._$.range};break;case 30:this.$={type:"Pipeline",left:o[a-3],right:{type:"Block",definitions:o[a-1],body:o[a]},range:this._$.range};break;case 31:this.$={type:"Postfix",operator:o[a],argument:o[a-2],range:this._$.range};break;case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:this.$={type:"Binary",operator:o[a-1],left:o[a-2],right:o[a],range:this._$.range};break;case 51:this.$={type:"Conditional",test:o[a-2],consequent:o[a-1],alternate:o[a],range:this._$.range};break;case 54:this.$={type:"Data",range:this._$.range};break;case 55:this.$={type:"Context",range:this._$.range};break;case 56:this.$={type:"Current",range:this._$.range};break;case 57:this.$={type:"Arg1",range:this._$.range};break;case 58:this.$={type:"Reference",name:o[a],range:this._$.range};break;case 59:case 60:case 61:case 62:case 107:case 108:case 109:case 110:case 119:case 120:case 121:this.$={type:"Literal",value:o[a],range:this._$.range};break;case 63:this.$={type:"Template",values:o[a],range:this._$.range};break;case 66:this.$={type:"SliceNotation",value:null,arguments:o[a-1],range:this._$.range};break;case 68:this.$={type:"Conditional",test:null,consequent:o[a-1],alternate:o[a],range:this._$.range};break;case 69:case 73:this.$={type:"GetProperty",value:null,property:o[a],range:this._$.range};break;case 70:case 74:this.$={type:"MethodCall",value:null,method:o[a],range:this._$.range};break;case 71:this.$={type:"Parentheses",body:o[a-1],range:this._$.range};break;case 72:this.$={type:"Parentheses",body:{type:"Block",definitions:o[a-2],body:o[a-1]},range:this._$.range};break;case 75:this.$={type:"Map",value:null,query:o[a-1],range:this._$.range};break;case 76:this.$={type:"Filter",value:null,query:o[a-1],range:this._$.range};break;case 77:this.$={type:"MapRecursive",value:null,query:{type:"GetProperty",value:null,property:o[a]},range:this._$.range};break;case 78:this.$={type:"MapRecursive",value:null,query:{type:"MethodCall",value:null,method:o[a]},range:this._$.range};break;case 79:this.$={type:"MapRecursive",value:null,query:o[a-1],range:this._$.range};break;case 80:this.$={type:"Pipeline",left:null,right:o[a],range:this._$.range};break;case 81:this.$={type:"Pipeline",left:null,right:{type:"Block",definitions:o[a-1],body:o[a]},range:this._$.range};break;case 82:this.$={type:"Pick",value:o[a-2],getter:null,range:this._$.range};break;case 83:this.$={type:"Pick",value:o[a-3],getter:o[a-1],range:this._$.range};break;case 84:this.$={type:"SliceNotation",value:o[a-3],arguments:o[a-1],range:this._$.range};break;case 85:this.$={type:"GetProperty",value:o[a-2],property:o[a],range:this._$.range};break;case 86:this.$={type:"MethodCall",value:o[a-2],method:o[a],range:this._$.range};break;case 87:this.$={type:"Map",value:o[a-3],query:o[a-1],range:this._$.range};break;case 88:this.$={type:"Filter",value:o[a-3],query:o[a-1],range:this._$.range};break;case 89:this.$={type:"MapRecursive",value:o[a-2],query:{type:"GetProperty",value:null,property:o[a]},range:this._$.range};break;case 90:this.$={type:"MapRecursive",value:o[a-2],query:{type:"MethodCall",value:null,method:o[a]},range:this._$.range};break;case 91:this.$={type:"MapRecursive",value:o[a-3],query:o[a-1],range:this._$.range};break;case 92:this.$={type:"Method",reference:{type:"Identifier",name:o[a-1],range:[i[a-1].range[0],i[a-1].range[1]-1]},arguments:[],range:this._$.range},this._mn=o[a-1];break;case 93:this.$={type:"Method",reference:{type:"Identifier",name:o[a-2],range:[i[a-2].range[0],i[a-2].range[1]-1]},arguments:o[a-1],range:this._$.range},this._mn=o[a-2];break;case 94:this.$={type:"Method",reference:{type:"Reference",name:{type:"Identifier",name:o[a-1],range:[i[a-1].range[0],i[a-1].range[1]-1]},range:[i[a-1].range[0],i[a-1].range[1]-1]},arguments:[],range:this._$.range},this._mn=o[a-1];break;case 95:this.$={type:"Method",reference:{type:"Reference",name:{type:"Identifier",name:o[a-2],range:[i[a-2].range[0],i[a-2].range[1]-1]},range:[i[a-2].range[0],i[a-2].range[1]-1]},arguments:o[a-1],range:this._$.range},this._mn=o[a-2];break;case 97:case 100:case 118:case 137:case 156:o[a-2].push(o[a]);break;case 102:this.$=[o[a-1],...o[a]];break;case 103:case 158:this.$=[null,o[a]];break;case 104:case 160:this.$=[o[a-1],o[a]];break;case 105:this.$=[null,o[a-1],...o[a]];break;case 106:this.$=[o[a-2],o[a-1],...o[a]];break;case 111:case 114:this.$={type:"Object",properties:[],range:this._$.range};break;case 112:this.$={type:"Object",properties:o[a-1],range:this._$.range};break;case 113:this.$={type:"Object",properties:o[a-2],range:this._$.range};break;case 115:this.$={type:"Block",definitions:o[a-2],body:{type:"Object",properties:o[a-1]},range:this._$.range};break;case 116:this.$={type:"Block",definitions:o[a-3],body:{type:"Object",properties:o[a-2]},range:this._$.range};break;case 122:this.$={type:"ObjectEntry",key:{type:"Current"},value:null,range:this._$.range};break;case 123:this.$={type:"ObjectEntry",key:{type:"Reference",name:o[a]},value:null,range:this._$.range};break;case 124:case 126:this.$={type:"ObjectEntry",key:o[a],value:null,range:this._$.range};break;case 125:this.$={type:"ObjectEntry",key:{type:"Literal",value:this._mn},value:o[a],range:this._$.range};break;case 127:case 128:this.$={type:"ObjectEntry",key:o[a-2],value:o[a],range:this._$.range};break;case 129:this.$={type:"ObjectEntry",key:{type:"Identifier",name:"$"+o[a-2].name,range:i[a-2].range},value:o[a],range:this._$.range};break;case 130:this.$={type:"ObjectEntry",key:o[a-1],value:{type:"Pipeline",left:{type:"Reference",name:o[a-1]},right:o[a]},range:this._$.range};break;case 131:this.$={type:"ObjectEntry",key:o[a-1],value:{type:"Pipeline",left:{type:"GetProperty",value:null,property:o[a-1]},right:o[a]},range:this._$.range};break;case 132:this.$={type:"ObjectEntry",key:{type:"Literal",value:this._mn},value:{type:"Pipeline",left:o[a-1],right:o[a]},range:this._$.range};break;case 133:this.$={type:"ObjectEntry",key:o[a-3],value:o[a],range:this._$.range};break;case 134:this.$={type:"Spread",query:null,array:!1,range:this._$.range};break;case 135:this.$={type:"Spread",query:o[a],array:!1,range:this._$.range};break;case 139:this.$={type:"Spread",query:null,array:!0,range:this._$.range};break;case 140:this.$={type:"Spread",query:o[a],array:!0,range:this._$.range};break;case 141:this.$={type:"Array",elements:[],range:this._$.range};break;case 142:this.$={type:"Array",elements:o[a-1],range:this._$.range};break;case 143:this.$={type:"Array",elements:o[a-2],range:this._$.range};break;case 144:this.$={type:"Assertion",negation:!1,assertion:o[a],range:this._$.range};break;case 145:this.$={type:"Assertion",negation:!0,assertion:o[a],range:this._$.range};break;case 146:this.$={type:"Assertion",negation:!1,assertion:o[a-1],range:this._$.range};break;case 147:this.$={type:"Assertion",negation:!0,assertion:o[a-1],range:this._$.range};break;case 150:this.$={type:"Method",reference:{type:"Reference",name:o[a]},arguments:[],range:this._$.range};break;case 151:this.$={type:"Identifier",name:String(o[a]),range:this._$.range};break;case 153:case 154:o[a-2].push(o[a-1],o[a]);break;case 157:this.$={type:"Compare",query:o[a-1],order:o[a],range:this._$.range};break;case 159:this.$=[null,o[a-1],o[a]];break;case 161:this.$=[o[a-2],o[a-1],o[a]];break}},trace(...t){this.DEBUG&&Jison.print(...t)},parseError(t,e){if(e.recoverable)this.trace(t);else{let r=new Error(t);throw r.hash=e,r}},parse(t,...e){let a=w=>{C.length-=2*w,y.length-=w,d.length-=w},l=()=>{let w=c.lex()||1;return typeof w!="number"&&(w=this.symbols_[w]||w),w},c=Object.create(this.lexer),f=c.options&&c.options.ranges,u={...this.yy,parser:this,lexer:c};c.setInput(t,u),typeof u.parseError=="function"&&(this.parseError=u.parseError),typeof c.yylloc>"u"&&(c.yylloc={});let p=this.table,m={},h=c.yylloc,C=[0],y=[null],d=[h],g=[],b="",S=0,A=0,E=0,T,x;for(;;){let w=C[C.length-1],_;if(this.defaultActions[w]?_=this.defaultActions[w]:((T===null||typeof T>"u")&&(T=l()),_=p[w]&&p[w][T]),!_||!_[0]){let F=function(N){let v=C.length-1,B=0;for(;;){if("2"in p[N])return B;if(N===0||v<2)return!1;v-=2,N=C[v],++B}},O,I="";if(!E){let N=[];for(let v in p[w])v in this.terminals_&&v>2&&N.push("'"+this.terminals_[v]+"'");I=c.showPosition?"Parse error on line "+(S+1)+`:
`+c.showPosition()+`
Expecting `+N.join(", ")+", got '"+(this.terminals_[T]||T)+"'":"Parse error on line "+(S+1)+": Unexpected "+(T===1?"end of input":"'"+(this.terminals_[T]||T)+"'"),this.parseError(I,{text:c.match,token:this.terminals_[T]||T,line:c.yylineno,loc:h,expected:N})}if(E===3){if(T===1||x===1)throw new Error(I||"Parsing halted while starting to recover from another error.");A=c.yyleng,b=c.yytext,S=c.yylineno,h=c.yylloc,T=l()}if(O===!1)throw new Error(I||"Parsing halted. No suitable error recovery rule available.");a(O),x=T==2?null:T,T=2,w=C[C.length-1],_=p[w]&&p[w][2],E=3}if(Array.isArray(_[0])&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+T);switch(_[0]){case 1:C.push(T),y.push(c.yytext),d.push(c.yylloc),C.push(_[1]),T=null,x?(T=x,x=null):(A=c.yyleng,b=c.yytext,S=c.yylineno,h=c.yylloc,E>0&&E--);break;case 2:{let O=this.productions_[_[1]][1],I=d[d.length-(O||1)],F=d[d.length-1];m.$=y[y.length-O],m._$={first_line:I.first_line,last_line:F.last_line,first_column:I.first_column,last_column:F.last_column},f&&(m._$.range=[I.range[0],F.range[1]]);let N=this.performAction.call(m,b,A,S,u,_[1],y,d,...e);if(typeof N<"u")return N;O&&a(O),C.push(this.productions_[_[1]][0]),y.push(m.$),d.push(m._$),C.push(p[C[C.length-2]][C[C.length-1]]);break}case 3:return!0}}}};var bu=function(e){function r(g,b){Object.entries(b).forEach(([S,A])=>g[S]=A(g[S]))}let n=new Map([["EOF",["<end of input>"]],["IDENT",["ident"]],["$IDENT",["$ident"]],["NOT",["'not'"]],["NO",["'no'"]],["IS",["'is'"]],["IN",["'in'"]],["HAS",["'has'"]],["NOTIN",["'not in'"]],["HASNO",["'has no'"]],["AND",["'and'"]],["OR",["'or'"]],["STRING",["string"]],["TPL_START",["template"]],["TEMPLATE",["template"]],["NUMBER",["number"]],["REGEXP",["regexp"]],["LITERAL",["'true'","'false'","'null'","'undefined'","'NaN'","'Infinity'"]],["ORDER",["'asc'","'desc'","'ascN'","'descN'"]],["METHOD(",["'method('"]],["$METHOD(",["'$method('"]]]),s=g=>n.get(g)||`'${g}'`,o=function(g,b={},S){if(b.recoverable)this.trace(g);else{if(Array.isArray(b.inside)){let w=S.lexer.offset-S.lexer.match.length;S.lexer.setMatch(w+b.inside[0],w+b.inside[1])}let A=S.lexer.yylloc,E=[g.split(/\n/)[0],"",S.lexer.showPosition()],T=Array.isArray(b.expected)?[...new Set([].concat(...b.expected.map(w=>s(w.slice(1,-1)))))]:null;T&&E.push("","Expecting "+T.join(", ")+" got "+s(b.token));let x=new SyntaxError(E.join(`
`));throw x.details={rawMessage:g,text:b.text,token:b.token,expected:T,loc:{range:A.range,start:{line:A.first_line,column:A.first_column,offset:A.range[0]},end:{line:A.last_line,column:A.last_column,offset:A.range[1]}}},x}},i=new Set([`
`,"\r","\u2028","\u2029"]),a=new Map([["undefined",void 0],["null",null],["false",!1],["true",!0],["Infinity",1/0],["NaN",NaN]]);Object.assign(e.lexer,{toLiteral:g=>a.get(g),toNumberLiteral(g,b,S=!1){if(b){let A=g.match(S?/(?:^|[^0-9a-fA-F])_|_(?:[^0-9a-fA-F]|$)/:/(?:^|\D)_|_(?:\D|$)/);if(A){let E=A[0],T=A.index+ +(E[1]==="_"),x=E==="__"?"Only one underscore is allowed":"Wrong underscore";this.parseError(x+" as numeric separator",{inside:[T,T+1]})}g=g.replace(/_/g,"")}return S?parseInt(g,16):parseFloat(g)},toStringLiteral(g,b=!1,S=1){let A=g.length-S,E="";for(let T=1;T<A;T++){if(!b&&i.has(g[T])&&this.parseError("Invalid line terminator",{inside:[T,T+1]}),g[T]!=="\\"){E+=g[T];continue}T===A-1&&this.parseError("Invalid backslash",{inside:[T,T+1]});let x=g[++T];switch(x){case"\r":T+=g[T+1]===`
`;break;case`
`:case"\u2028":case"\u2029":break;case"0":E+="\0";break;case"b":E+="\b";break;case"n":E+=`
`;break;case"r":E+="\r";break;case"f":E+="\f";break;case"t":E+="	";break;case"v":E+="\v";break;case"u":{let[w=""]=g.slice(T+1,T+5).match(/^[0-9a-f]*/i)||[];if(w.length===4){E+=String.fromCharCode(parseInt(w,16)),T+=4;break}this.parseError("Invalid Unicode escape sequence",{inside:[T-1,Math.min(T+1+w.length,A)]});break}case"x":{let[w=""]=g.slice(T+1,T+3).match(/^[0-9a-f]*/i)||[];if(w.length===2){E+=String.fromCharCode(parseInt(w,16)),T+=2;break}this.parseError("Invalid hexadecimal escape sequence",{inside:[T-1,Math.min(T+1+w.length,A)]});break}default:E+=x}}return E},toRegExp(g){let b=g.lastIndexOf("/")+1,S=g.substr(b);return S.split("").forEach((A,E,T)=>{let x=T.indexOf(A,E+1);x!==-1&&this.parseError("Duplicate flag in regexp",{inside:[b+x,b+x+1]})}),new RegExp(g.substr(1,g.lastIndexOf("/")-1),S)}}),r(e.lexer,{setInput:g=>function(b,S){let A=[];return S.commentRanges=A,S.buildResult=E=>({ast:E,commentRanges:A}),S.parseError=function(...E){return o.call(this,...E,S)},S.pks=()=>{this.eof()||this.begin("preventKeyword")},S.pps=()=>{this.eof()||this.begin("preventPrimitive")},this.bracketStack=[],this.prevToken=null,this.prevYylloc={first_line:1,last_line:1,first_column:0,last_column:0,range:[0,0]},g.call(this,b,S)}});let l=new e.Parser;l.lexer={...e.lexer},l.yy={...e.yy};let c=["AND","OR","IN","NOTIN","HAS","HASNO","IS"],f=[...c,"NOT","NO","ORDER"],u=["+","-","*","/","%","|","=","!=","~=",">=","<=","<",">"],p=[null,"?",":",";",",",".","..","(",".(","..(","METHOD(","$METHOD(","[",".[","=>",...u,...c,"NOT","NO"],m=[",","?",":",";","EOF","]",")","}","TPL_CONTINUE","TPL_END",...u,...c,"ORDER"],h=new Map(p.map(g=>[g,new Set(m)]));for(let g of[".(","..(","METHOD(","$METHOD("])h.get(g).delete(")");for(let g of["[",".["])h.get(g).delete("]");r(l.lexer,{lex:g=>function(){let S=this.offset,A=g.call(this);if(h.has(this.prevToken)&&h.get(this.prevToken).has(A)){let E={first_line:this.prevYylloc.last_line,last_line:this.yylloc.first_line,first_column:this.prevYylloc.last_column,last_column:this.yylloc.first_column,range:[this.prevYylloc.range[1],this.yylloc.range[0]]};if(this.unput(this.match),this.pushState("preventPrimitive"),this.done=!1,this.yytext="",this.yylloc=this.prevYylloc=E,S!==this.offset&&f.includes(A))switch(this._input[S]){case" ":case"	":E.last_column--,E.range[1]--;break;case`
`:{let T=this._input.lastIndexOf(`
`,S-1);E.last_line--,E.last_column=T===-1?E.last_column-1:S-T,E.range[1]--;break}}return this.prevToken="IDENT"}if(this.prevYylloc=this.yylloc,f.includes(A))switch(this._input[this.offset]){case" ":case"	":this.prevYylloc={...this.prevYylloc,last_column:this.prevYylloc.last_column+1,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break;case`
`:this.prevYylloc={...this.prevYylloc,last_line:this.prevYylloc.last_line+1,last_column:0,range:[this.prevYylloc.range[0],this.prevYylloc.range[1]+1]};break}return this.prevToken=A}});let C=new Map([["(",")"],[".(",")"],["..(",")"],["METHOD(",")"],["$METHOD(",")"],["[","]"],[".[","]"],["{","}"],["TPL_START","TPL_END"]]),y=new Set([")","]","}","TPL_END"]),d=g=>function(){let S=g.call(this);if(y.has(S)){let A=this.bracketStack.pop();A!==S&&this.parseError(`Expected "${A}" got "${S}"`)}return C.has(S)&&this.bracketStack.push(C.get(S)),S};return r(e.lexer,{lex:d}),r(l.lexer,{lex:d}),{parse(g,b){return b?l.parse(g):e.parse(g)},*tokenize(g,b,S){let A=b?l:e,E=Object.create(A.lexer);for(E.setInput(g,{parser:A});!E.done;){let T={type:E.lex(),value:E.match,offset:E.yylloc.range[0]};S&&(T.loc={range:E.yylloc.range,start:{line:E.yylloc.first_line,column:E.yylloc.first_column},end:{line:E.yylloc.last_line,column:E.yylloc.last_column}}),yield T}}}}(new Ur),Nt=bu;var jr={};P(jr,{compile:()=>Cu,stringify:()=>Tu,walk:()=>Au});function Cu(t,e){let r=e.scope.arg1;e.put(typeof r=="string"?r:"undefined")}function Au(){}function Tu(t,e){e.put("$$")}var $r={};P($r,{compile:()=>ku,stringify:()=>xu,suggest:()=>Su,walk:()=>Eu});function Su(t,e){t.elements.length===0&&e.queryRoot(t.range[0]+1,t.range[1]-1)}function ku(t,e){e.put("["),e.list(t.elements,","),e.put("]")}function Eu(t,e){e.list(t.elements)}function xu(t,e){e.put("["),e.list(t.elements,","),e.put("]")}var Vr={};P(Vr,{compile:()=>_u,stringify:()=>Iu,suggest:()=>wu,walk:()=>Pu});function wu(t,e){Array.isArray(t.assertion)||(e.range(t.assertion.range,"var"),e.range(t.assertion.range,"assertion"))}function _u(t,e){if(Array.isArray(t.assertion)){e.put(t.negation?"!(":"(");for(let r=0;r<t.assertion.length;r++)if(r%2===0)e.node(t.assertion[r]);else switch(t.assertion[r]){case"and":e.put("&&");break;case"or":e.put("||");break;default:e.error("Bad conjuction operator in assertion",t)}e.put(")")}else switch(t.negation&&e.put("!"),t.assertion.type){case"Identifier":t.assertion.name?(e.put("!!"),e.tolerant&&e.put("(typeof "),e.put("a["),e.node(t.assertion),e.put("]"),e.tolerant&&(e.put('==="function"?a['),e.node(t.assertion),e.put("]")),e.put(".call(mctx,"),e.nodeOrCurrent(),e.put(")"),e.tolerant&&e.put(":false)"),e.usedAssertions.has(t.assertion.name)?e.usedAssertions.get(t.assertion.name).push(t.assertion.range):e.usedAssertions.set(t.assertion.name,t.assertion.range)):e.put("false");break;case"Method":e.put("!!"),e.node(t.assertion);break;default:e.error('Unknown assertion node type "'+t.assertion.type+'"',t.assertion)}}function Pu(t,e){if(Array.isArray(t.assertion))for(let r=0;r<t.assertion.length;r++)r%2===0&&e.node(t.assertion[r]);else e.node(t.assertion)}function Iu(t,e){if(t.negation&&e.put("not "),Array.isArray(t.assertion)){e.put("(");for(let r=0;r<t.assertion.length;r++)r%2===0?e.node(t.assertion[r]):(e.put(" "),e.put(t.assertion[r]),e.put(" "));e.put(")")}else e.node(t.assertion)}var zr={};P(zr,{compile:()=>Ou,stringify:()=>Ru,suggest:()=>Nu,walk:()=>Mu});var Vs={in:"in","not in":"notIn",has:"has","has no":"hasNo",and:"and",or:"or","??":"nullish","+":"add","-":"sub","*":"mul","/":"div","%":"mod","=":"eq","!=":"ne","<":"lt","<=":"lte",">":"gt",">=":"gte","~=":"match"};function Ot(t,e,r){if(r.type==="Array"){if(r.elements.length===0){t.range([r.range[0]+1,r.range[1]-1],"value-subset",e,!1);return}let n=[];for(let{type:o,range:i,value:a}of r.elements)i&&(o==="Literal"||o==="Identifier")&&n.push(a);let s=n.length?t.literalList(n):!1;for(let{type:o,range:i,value:a}of r.elements)i&&(o==="Literal"||o==="Identifier"||o==="GetProperty"&&a===null)&&t.range(i,"value-subset",e,s)}}function Nu(t,e){switch(t.operator){case"in":e.range(t.left.range,"in-value",t.right,null),Ot(e,t.left,t.right);break;case"not in":Ot(e,t.left,t.right);break;case"has":e.range(t.right.range,"in-value",t.left,null),Ot(e,t.right,t.left);break;case"has no":Ot(e,t.right,t.left);break;case"=":case"!=":e.range(t.right.range,"value",t.left,null);break}}function Ou(t,e){if(!(t.operator in Vs)){e.error('Unknown operator "'+t.operator+'"',t);return}switch(t.operator){case"and":e.put("!");case"or":{let r=e.allocateVar();e.put(`${e.buildinFn("bool")}(${r}=`),e.node(t.left),e.put(`)?${r}:`),e.createScope(()=>e.node(t.right),n=>(e.put(")"),"("+n+","),e.scope.$ref);break}case"??":{let r=e.allocateVar();e.put(`(${r}=`),e.node(t.left),e.put(`,${r}!==null&&${r}!==undefined)?${r}:`),e.createScope(()=>e.node(t.right),n=>(e.put(")"),"("+n+","),e.scope.$ref);break}case"has no":e.put("!");case"has":e.put(e.buildinFn("in")),e.put("("),e.node(t.right),e.put(","),e.node(t.left),e.put(")");break;default:e.put(e.buildinFn(Vs[t.operator])),e.put("("),e.node(t.left),e.put(","),e.node(t.right),e.put(")")}}function Mu(t,e){e.node(t.left),e.node(t.right)}function Ru(t,e){e.node(t.left),/^[a-z]/i.test(t.operator)?(e.put(" "),e.put(t.operator),e.put(" ")):e.put(t.operator),e.node(t.right)}var qr={};P(qr,{compile:()=>vu,stringify:()=>Bu,suggest:()=>Fu,walk:()=>Du});function Fu(t,e){t.body===null&&e.queryRoot(t.range[1])}function vu(t,e){t.definitions.length?(e.put("(()=>{"),e.createScope(()=>{for(let{declarator:r}of t.definitions)r.name&&e.scope.awaitInit.add(e.unescapeName("$"+r.name,r));e.list(t.definitions),e.put("return "),e.nodeOrCurrent(t.body)},r=>r+";",e.scope.$ref),e.put("})()")):t.body&&t.body.type==="Object"?(e.put("("),e.nodeOrCurrent(t.body),e.put(")")):e.nodeOrCurrent(t.body)}function Du(t,e){e.list(t.definitions),e.nodeOrNothing(t.body)}function Bu(t,e){e.list(t.definitions),e.nodeOrNothing(t.body)}var Jr={};P(Jr,{compile:()=>Lu,stringify:()=>ju,walk:()=>Uu});var zs={"":"cmp",N:"cmpNatural",A:"cmpAnalytical",NA:"cmpNaturalAnalytical",AN:"cmpNaturalAnalytical"};function Lu(t,e){let r=t.order.startsWith("desc"),n=zs[t.order.slice(r?4:3)]||zs[""];r&&e.put("-"),e.put(e.buildinFn(n)),e.put("((_q=$=>("),e.createScope(()=>e.node(t.query),s=>s+","),e.put("))(_a),_q(_b))")}function Uu(t,e){e.node(t.query)}function ju(t,e){e.node(t.query),e.put(" "),e.put(t.order)}var Gr={};P(Gr,{compile:()=>$u,stringify:()=>zu,walk:()=>Vu});function $u(t,e){e.put("(_a, _b)=>{let _q;return "),e.list(t.compares,"||"),e.put("||0}")}function Vu(t,e){e.list(t.compares)}function zu(t,e){e.list(t.compares,",")}var Hr={};P(Hr,{compile:()=>qu,stringify:()=>Gu,walk:()=>Ju});function qu(t,e){e.put(e.buildinFn("bool")),e.put("("),e.nodeOrCurrent(t.test),e.put(")?"),e.createScope(()=>e.nodeOrCurrent(t.consequent),r=>(e.put(")"),"("+r+","),e.scope.$ref),e.put(":"),e.createScope(()=>{t.alternate?t.alternate.type==="Placeholder"?(e.put("("),e.node(t.alternate),e.put(",undefined)")):e.node(t.alternate):e.put("undefined")},r=>(e.put(")"),"("+r+","),e.scope.$ref)}function Ju(t,e){e.nodeOrNothing(t.test),e.nodeOrNothing(t.consequent),e.nodeOrNothing(t.alternate)}function Gu(t,e){e.nodeOrNothing(t.test),e.put("?"),e.nodeOrNothing(t.consequent),t.alternate&&(e.put(":"),e.node(t.alternate))}var Wr={};P(Wr,{compile:()=>Hu,stringify:()=>Yu,walk:()=>Wu});function Hu(t,e){e.put("context")}function Wu(){}function Yu(t,e){e.put("#")}var Yr={};P(Yr,{compile:()=>Xu,stringify:()=>Qu,suggest:()=>Ku,walk:()=>Zu});function Ku(t,e){t.range&&e.range(t.range,"var")}function Xu(t,e){e.put(e.scope.$ref)}function Zu(){}function Qu(t,e){e.put("$")}var Kr={};P(Kr,{compile:()=>ef,stringify:()=>rf,walk:()=>tf});function ef(t,e){e.put("data")}function tf(){}function rf(t,e){e.put("@")}var Xr={};P(Xr,{compile:()=>nf,stringify:()=>sf,walk:()=>of});function nf(t,e){t.name&&e.putIdent("$"+e.unescapeName(t.name,t),t)}function of(){}function sf(t,e){e.put(t.name?"$"+t.name:"$")}var Zr={};P(Zr,{compile:()=>cf,stringify:()=>ff,suggest:()=>lf,walk:()=>uf});function qe(t,e){return{type:"GetProperty",value:t,property:e}}function Mt(t){return{type:"Identifier",name:t}}var af=["$data","$context","$ctx","$array","$idx","$index"];function lf(t,e){t.value===null&&e.range(t.declarator.range,"path")}function cf(t,e){let r=t.declarator.name,n=r&&e.unescapeName("$"+r,t);if(n===null){e.node(t.declarator),e.nodeOrCurrent(t.value),e.put(";");return}if(e.scope.own.has(n)){e.error(`Identifier "${n}" has already been declared`,t.declarator);return}if(af.includes(n)){e.error(`Identifier "${n}" is reserved for future use`,t.declarator);return}e.put("const "),e.node(t.declarator),e.put("="),e.node(t.value||qe(null,Mt(r))),e.put(";"),e.scope.add(n),e.scope.own.add(n),e.scope.awaitInit.delete(n)}function uf(t,e){e.node(t.declarator),e.nodeOrNothing(t.value)}function ff(t,e){e.node(t.declarator),t.value!==null&&(e.put(":"),e.node(t.value)),e.put(";")}var Qr={};P(Qr,{compile:()=>pf,stringify:()=>df,walk:()=>mf});function pf(t,e){e.put(e.buildinFn("filter")),e.put("("),e.nodeOrCurrent(t.value),e.put(",$=>"),e.createScope(()=>e.node(t.query),r=>(e.put(")"),"("+r+",")),e.put(")")}function mf(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function df(t,e){e.nodeOrNothing(t.value),e.put(".["),e.node(t.query),e.put("]")}var en={};P(en,{compile:()=>hf,stringify:()=>yf,walk:()=>gf});function hf(t,e){let r=t.arguments.map(s=>e.unescapeName("$"+s.name,s)),n=t.arguments.find((s,o)=>o>0&&r.lastIndexOf("$"+s.name,o-1)!==-1);n&&e.error('Duplicate parameter name "$'+n.name+'" is not allowed',n),e.put("function("),e.put(String(r)||"$"),e.put("){return "),e.createScope(()=>{e.scope.arg1=r[1]||"arguments[1]",e.scope.$ref=r[0]||"$";for(let s of r)e.scope.add(s);e.node(t.body)},s=>s+","),e.put("}")}function gf(t,e){e.node(t.body)}function yf(t,e){e.put("=>"),e.node(t.body)}var tn={};P(tn,{compile:()=>Cf,stringify:()=>Tf,suggest:()=>bf,walk:()=>Af});function bf(t,e){e.range(t.property.range,"path",t.value||void 0,!t.value),t.value===null&&e.range(t.property.range,"var"),t.range&&t.value===null&&t.property.range[0]!==t.range[0]&&e.queryRoot(t.range[0])}function Cf(t,e){e.put(e.buildinFn("map")),e.put("("),e.nodeOrCurrent(t.value),e.put(","),e.node(t.property),e.put(")")}function Af(t,e){e.nodeOrNothing(t.value),e.node(t.property)}function Tf(t,e){e.nodeOrNothing(t.value)&&e.put("."),e.node(t.property)}var rn={};P(rn,{compile:()=>Sf,stringify:()=>Ef,walk:()=>kf});function Sf(t,e){e.put(JSON.stringify(e.unescapeName(t.name,t,!1)))}function kf(){}function Ef(t,e){e.put(t.name)}var nn={};P(nn,{compile:()=>xf,stringify:()=>_f,walk:()=>wf});function xf(t,e){e.put(typeof t.value=="string"?JSON.stringify(t.value):String(t.value))}function wf(){}function _f(t,e){e.put(typeof t.value=="string"?JSON.stringify(t.value):String(t.value))}var on={};P(on,{compile:()=>Pf,stringify:()=>Nf,walk:()=>If});function Pf(t,e){e.put(e.buildinFn("map")),e.put("("),e.nodeOrCurrent(t.value),e.put(",$=>"),e.createScope(()=>e.node(t.query),r=>(e.put(")"),"("+r+",")),e.put(")")}function If(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function Nf(t,e){e.nodeOrNothing(t.value),e.put(".("),e.node(t.query),e.put(")")}var sn={};P(sn,{compile:()=>Of,stringify:()=>Rf,walk:()=>Mf});function Of(t,e){e.put(e.buildinFn("mapRecursive")),e.put("("),e.nodeOrCurrent(t.value),e.put(",$=>"),e.createScope(()=>e.node(t.query),r=>(e.put(")"),"("+r+",")),e.put(")")}function Mf(t,e){e.nodeOrNothing(t.value),e.node(t.query)}function Rf(t,e){e.nodeOrNothing(t.value),e.put(".."),e.isSimpleGetPropertyQuery(t.query)||e.isSimpleMethodCallQuery(t.query)?e.node(t.query):(e.put("("),e.node(t.query),e.put(")"))}var an={};P(an,{compile:()=>vf,stringify:()=>Bf,suggest:()=>Ff,walk:()=>Df});function Ff(t,e){t.arguments.length===0&&e.queryRoot(t.range[1]-1)}function vf(t,e,r){let n=t.reference.type==="Identifier";e.tolerant&&e.put("(typeof "),n?(e.usedMethods.has(t.reference.name)?e.usedMethods.get(t.reference.name).push(t.reference.range):e.usedMethods.set(t.reference.name,[t.reference.range]),e.put("m["),e.node(t.reference),e.put("]")):e.node(t.reference),e.tolerant&&(e.put('==="function"?'),n?(e.put("m["),e.node(t.reference),e.put("]")):e.node(t.reference)),e.put(n?".call(mctx,":"("),e.nodeOrCurrent(r),t.arguments.length&&(e.put(","),e.list(t.arguments,",")),e.put(")"),e.tolerant&&e.put(":undefined)")}function Df(t,e){e.node(t.reference),e.list(t.arguments)}function Bf(t,e){e.node(t.reference),e.put("("),e.list(t.arguments,","),e.put(")")}var ln={};P(ln,{compile:()=>Lf,stringify:()=>jf,walk:()=>Uf});function Lf(t,e){e.node(t.method,t.value)}function Uf(t,e){e.nodeOrNothing(t.value),e.node(t.method)}function jf(t,e){e.nodeOrNothing(t.value)&&e.put("."),e.node(t.method)}var cn={};P(cn,{compile:()=>Vf,stringify:()=>qf,suggest:()=>$f,walk:()=>zf});function $f(t,e){t.properties.length===0&&e.queryRoot(t.range[0]+1,t.range[1]-1)}function Vf(t,e){e.put("{"),e.list(t.properties,","),e.put("}")}function zf(t,e){e.list(t.properties)}function qf(t,e){e.put("{"),e.list(t.properties,","),e.put("}")}var un={};P(un,{compile:()=>Hf,stringify:()=>Yf,suggest:()=>Gf,walk:()=>Wf});var Jf=new Set(["Literal","Identifier","Reference","Current"]);function Gf(t,e){if(t.value===null)switch(t.key.type){case"Literal":case"Identifier":e.range(t.range,"path"),e.range(t.range,"var");break;case"Current":case"Reference":e.range(t.range,"var");break}}function Hf(t,e){let r=t.value;switch(t.key.type){case"Current":e.put("...null");return;case"Literal":e.node(t.key),r=r||qe(null,Mt(String(t.key.value)));break;case"Identifier":e.node(t.key),r=r||qe(null,t.key);break;case"Reference":e.node(t.key.name),r=r||t.key;break;default:e.put("["),e.node(t.key),e.put("]")}e.put(":"),e.node(r)}function Wf(t,e){e.node(t.key),e.nodeOrNothing(t.value)}function Yf(t,e){if(Jf.has(t.key.type)){if(e.node(t.key),t.value===null)return}else e.put("["),e.node(t.key),e.put("]");e.put(":"),e.node(t.value)}var fn={};P(fn,{compile:()=>Kf,stringify:()=>Zf,walk:()=>Xf});function Kf(t,e){e.put("("),e.node(t.body),e.put(")")}function Xf(t,e){e.node(t.body)}function Zf(t,e){e.put("("),e.node(t.body),e.put(")")}var pn={};P(pn,{compile:()=>ep,stringify:()=>rp,suggest:()=>Qf,walk:()=>tp});function Qf(t,e){if(t.getter===null){let r=t.range[1]-1;e.range([r,r],"key",t.value,!1),e.queryRoot(r)}else(t.getter.type==="GetProperty"||t.getter.type==="Reference"||t.getter.type==="Literal"&&typeof t.getter.value=="string")&&e.range(t.getter.range,"key",t.value,!1)}function ep(t,e){e.put(e.buildinFn("pick")),e.put("("),e.node(t.value),t.getter&&(e.put(","),e.node(t.getter)),e.put(")")}function tp(t,e){e.node(t.value),t.getter!==null&&e.node(t.getter)}function rp(t,e){e.node(t.value),e.put("["),t.getter!==null&&e.node(t.getter),e.put("]")}var mn={};P(mn,{compile:()=>np,stringify:()=>sp,walk:()=>op});function np(t,e){e.put("($=>("),e.createScope(()=>e.node(t.right),r=>r+","),e.put("))"),e.put("("),e.nodeOrCurrent(t.left),e.put(")")}function op(t,e){e.node(t.left),e.node(t.right)}function sp(t,e){e.node(t.left),e.put("|"),e.node(t.right)}var dn={};P(dn,{compile:()=>ap,stringify:()=>cp,suggest:()=>ip,walk:()=>lp});function ip(t,e){e.queryRoot(t.range[1])}function ap(t,e){e.put(e.scope.$ref)}function lp(){}function cp(){}var hn={};P(hn,{compile:()=>up,stringify:()=>pp,walk:()=>fp});function up(t,e){if(t.operator&&t.operator.type){e.put("($=>("),e.createScope(()=>e.node(t.operator),r=>r+","),e.put("))"),e.put("("),e.node(t.argument),e.put(")");return}e.error('Unknown operator "'+t.operator+'"',t)}function fp(t,e){e.node(t.argument),t.operator&&t.operator.type&&e.node(t.operator)}function pp(t,e){e.node(t.argument),e.put(" "),e.node(t.operator)}var gn={};P(gn,{compile:()=>mp,stringify:()=>hp,walk:()=>dp});function mp(t,e){switch(t.operator){case"no":case"not":e.put("!"),e.put(e.buildinFn("bool")),e.put("("),e.node(t.argument),e.put(")");break;case"+":case"-":e.put(t.operator),e.node(t.argument);break;case"is":e.put("!!("),e.node(t.argument),e.put(")");break;default:e.error('Unknown operator "'+t.operator+'"',t)}}function dp(t,e){e.node(t.argument),t.operator&&t.operator.type&&e.node(t.operator)}function hp(t,e){e.put(t.operator),t.operator!=="-"&&t.operator!=="+"&&e.put(" "),e.node(t.argument)}var yn={};P(yn,{compile:()=>yp,stringify:()=>Cp,suggest:()=>gp,walk:()=>bp});function gp(t,e){t.range&&e.range(t.range,"var")}function yp(t,e){let r=t.name,n=e.unescapeName("$"+r.name,r),s=e.scope.has(n),o=e.scope.awaitInit.has(n);if(!s||o){o?(e.put("f.awaitInitRef(()=>"),e.putIdent(n,r),e.tolerant||(e.put(","),e.put(JSON.stringify(n)),e.put(","),e.put(JSON.stringify(r.range))),e.put(")")):e.tolerant?e.put("undefined"):(e.putIdent(n,t),e.error(`${n} is not defined`,t));return}e.putIdent(n,r)}function bp(t,e){e.node(t.name)}function Cp(t,e){e.put("$"),e.node(t.name)}var bn={};P(bn,{compile:()=>Ap,stringify:()=>Sp,walk:()=>Tp});function Ap(t,e){e.put(e.buildinFn("slice")),e.put("("),e.nodeOrCurrent(t.value),t.arguments.slice(0,3).forEach(r=>{e.put(","),r?e.node(r):e.put("undefined")}),e.put(")")}function Tp(t,e){e.nodeOrNothing(t.value);for(let r of t.arguments.slice(0,3))r&&e.node(r)}function Sp(t,e){let[r,n,s]=t.arguments;e.nodeOrNothing(t.value),e.put("["),r&&e.node(r),e.put(":"),n&&e.node(n),s&&(e.put(":"),e.node(s)),e.put("]")}var Cn={};P(Cn,{compile:()=>Ep,stringify:()=>wp,suggest:()=>kp,walk:()=>xp});function kp(t,e){t.query===null&&e.queryRoot(t.range[1])}function Ep(t,e){if(t.array){e.put("..."),e.put(e.buildinFn("ensureArray")),e.put("("),e.nodeOrCurrent(t.query),e.put(")");return}e.put("..."),e.nodeOrCurrent(t.query)}function xp(t,e){e.nodeOrNothing(t.query)}function wp(t,e){e.put("..."),e.nodeOrNothing(t.query)}var An={};P(An,{compile:()=>Pp,stringify:()=>Np,suggest:()=>_p,walk:()=>Ip});function _p(t,e){for(let[r,n]of Object.entries(t.values))n===null&&e.queryRoot(t.values[Number(r)-1].range[1])}function Pp(t,e){for(let[r,n]of Object.entries(t.values)){let s=Number(r);n!==null&&(s!==0&&e.put("+"),s%2===0?e.put('"'+qs(n.value,Op)+'"'):(e.put("("),e.node(n),e.put(")")))}}function Ip(t,e){for(let r of t.values)r!==null&&e.node(r)}function Np(t,e){let r=t.values.length-1;for(let[n,s]of Object.entries(t.values)){let o=Number(n);o%2===0?(e.put(o===0?"`":"}"),e.put(qs(s.value,Mp)),e.put(o===r?"`":"${")):s!==null&&e.node(s)}}var Op=new Map([["\b","\\b"],[`
`,"\\n"],["\r","\\r"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\u2028","\\u2028"],["\u2029","\\u2029"],["\\","\\\\"],['"','\\"']]),Mp=new Map([["\b","\\b"],["\f","\\f"],["	","\\t"],["\v","\\v"],["\\","\\\\"],["$","\\$"]]);function qs(t,e){let r="";for(let n=0;n<t.length;n++)r+=e.get(t[n])||t[n];return r}var Rp={Arg1:jr,Array:$r,Assertion:Vr,Binary:zr,Block:qr,Compare:Jr,Conditional:Hr,Context:Wr,Current:Yr,Data:Kr,Declarator:Xr,Definition:Zr,Filter:Qr,Function:en,GetProperty:tn,Identifier:rn,Literal:nn,Map:on,MapRecursive:sn,Method:an,MethodCall:ln,Object:cn,ObjectEntry:un,Parentheses:fn,Pick:pn,Pipeline:mn,Placeholder:dn,Postfix:hn,Prefix:gn,Reference:yn,SliceNotation:bn,CompareFunction:Gr,Spread:Cn,Template:An},Je=t=>new Map(Object.entries(Rp).map(([e,r])=>[e,r[t]]).filter(([,e])=>typeof e=="function")),Fp={};Je("build").forEach((t,e)=>Fp[e]=t);var Tn=Je("compile"),Sn=Je("walk"),kn=Je("stringify"),En=Je("suggest");function Ge(t,e){function r(i){if(Sn.has(i.type))s(i),Sn.get(i.type)(i,n),o(i);else throw new Error('Unknown node type "'+i.type+'"')}let n={node:r,nodeOrNothing(i){i!==null&&r(i)},list(i){i.forEach(r)}},s=()=>{},o=()=>{};typeof e=="function"&&(e={enter:e}),e&&(typeof e.enter=="function"&&(s=e.enter),typeof e.leave=="function"&&(o=e.leave)),r(t)}function Js(t,e){return e>=0&&e<t.length&&/[a-zA-Z_$0-9]/.test(t[e])}function xn(t,e){let r=t.charCodeAt(e);return r===9||r===10||r===13||r===32}function vp(t,e,r){for(;e<r;e++)if(!xn(t,e))return!1;return!0}function Dp(t,e,r,n,s){let o=[];for(let i=0;i<n.length;i++){let[a,l]=n[i];if(a>=e)break;a<t||(o.push(t,a),t=l)}return(t!==r.length||!s)&&o.push(t,e),o}function Bp(t,e,r,n){let s=[];for(let o=0;o<t.length;o++){let[i,a,l,c]=t[o];if(vp(e,i,a)){for(;i>=0&&xn(e,i-1);)i--;for(;a<e.length&&xn(e,a);)a++;if(Js(e,i-1)){if(i===a)continue;i++}if(Js(e,a)){if(i===a)continue;a--}}let f=Dp(i,a,e,r,n);for(let u=0;u<f.length;u+=2)s.push([f[u],f[u+1],l,c])}return s}function Lp(t){let e=null,r=[],n=Object.assign(new Map,{literalList:r}),s=(i,a)=>{n.has(i)?n.get(i).push(a):n.set(i,[a])},o={range(i,a,l=e,c=!0){s(l,[...i,a,c])},literalList(i){let a="l"+r.length;return r.push([a,i]),a},queryRoot(i,a=i){s(e,[i,a,"var",!0]),s(e,[i,a,"path",!0])}};return Ge(t,i=>{if(En.has(i.type)){let a=e;e=i,En.get(i.type)(i,o),e=a}}),n}function Rt(t,{ast:e,commentRanges:r}){let n=Lp(e),s=r.length&&r[r.length-1][1]===t.length&&!/[\r\n]$/.test(t);for(let[o,i]of n)n.set(o,Bp(i,t,r,s));return n}function Up(t){return t.type==="GetProperty"}function jp(t){return t.type==="MethodCall"}function Ft(t){function e(s){if(kn.has(s.type))kn.get(s.type)(s,n);else throw new Error('Unknown node type "'+s.type+'"')}let r=[],n={isSimpleGetPropertyQuery:Up,isSimpleMethodCallQuery:jp,put(s){r.push(s)},node:e,nodeOrNothing(s){if(s!==null)return e(s),!0},list(s,o){if(!o){s.forEach(e);return}s.forEach((i,a)=>{a>0&&n.put(o),e(i)})}};return e(t),r.join("")}function wn(t,e,r){let n=Object.assign(Object.create(SyntaxError.prototype),r),s=new Error;return n.name=t,n.message=e,Object.defineProperty(n,"stack",{get:function(){return(s.stack||"").replace(/^(.+\n){1,3}/,t+": "+e+`
`)}}),n}var $p=/^[\p{ID_Start}$_]$/u,Vp=/^[\p{ID_Continue}$]$/u;function Pn(t,e,r){return Gs(t,"query",e,r)}function In(t,e,r){return Gs(t,"method",e,r)}var _n=class t extends Set{constructor(e,r=[],n=!1,s="$"){super(e),this.own=new Set,this.awaitInit=new Set(r),this.firstCurrent=null,this.captureCurrent=[],this.arg1=n,this.$ref=s}spawn(e,r){return new t(this,this.awaitInit,e,r)}};function Gs(t,e,r=!1,n=null){function s(d){let g="s"+c.length;return c.push(d?[g,d]:[g]),g}function o(d){let g=f.get(d);return g||f.set(d,g=s()),g}function i(d,g,b,S,A){let E=[d,g,JSON.stringify(b)];if(b==="var"){if(!y.scope.size)return;E.push(JSON.stringify([...y.scope]))}else S||(S=s()),E.push(S),A&&E.push(typeof A=="string"?A:o(A));return p.push(E),S}function a(d,g,b="$"){let S=y.scope,A=m.length-1,E=S.arg1||e==="method"&&"arguments[1]";if(y.scope=S.spawn(E,b),d(),y.scope.captureCurrent.length){let x="stat("+y.scope.captureCurrent.reduce((w,_)=>i(..._,w),void 0)+","+y.scope.$ref+")";y.scope.firstCurrent?m[y.scope.firstCurrent]=x:m[A]+=g(x)}y.scope=S}function l(d,g){let b=!1;if(n!==null){if(n.has(d))for(let[S,A,E,T]of n.get(d))E==="var"?i(S,A,E):T===!0?y.scope.captureCurrent.push([S,A,E]):(b||(b=o(d),m.push("stat("+b+",")),E&&i(S,A,E,b,T));d.type==="Current"&&y.scope.firstCurrent===null&&(y.scope.firstCurrent=m.length)}if(Tn.has(d.type))Tn.get(d.type)(d,y,g);else throw new Error('Unknown node type "'+d.type+'"');b&&m.push(")")}let c=[],f=new WeakMap,u=[],p=[],m=[{toString(){if(e==="query")return["((data,context)=>{",...y.usedMethods.size||y.usedAssertions.size?["const method = (name,...args)=>m[name].apply(mctx,args);","const assertion = (name,...args)=>a[name].apply(mctx,args);","const mctx = Object.freeze({context,method,assertion});"]:[]].join(`
`)+`
`;if(e==="method")return["(function(data){","const mctx = this;","const context = mctx.context;"].join(`
`)+`
`;throw new Error("Unknown kind: "+e)}},{toString(){return u.length>0?"let "+u+`;
`:""}},{toString(){return c.length>0?[`const stat=(s,v)=>(s.add(v),v);
`,"const "+c.map(([d,g])=>d+"=new Set("+(g?JSON.stringify(g):"")+")")+`;
`].join(""):""}},{toString(){let d=n&&Array.isArray(n.literalList)&&n.literalList.map(([g,b])=>g+"="+JSON.stringify(b));return d&&d.length?"const "+d+`;
`:""}},n===null?"return ":`return{
value: `],h={},C=new Set,y={tolerant:r,usedAssertions:new Map,usedMethods:new Map,suggestions:n!==null,buildinFn(d){return C.add(d),"f."+d},scope:new _n,createScope:a,error(d,g){let b=new SyntaxError(d);if(g&&g.range&&(b.details={loc:{range:g.range}}),!r)throw b;return b},allocateVar(){let d="tmp"+u.length;return u.push(d),d},unescapeName(d,g,b=!0){return d.replace(/\\u[0-9a-fA-F]{4}/g,(S,A)=>{let E=String.fromCharCode(parseInt(S.slice(2),16)),T=A===0?$p:Vp;return b&&!T.test(E)&&this.error(`Bad escape sequence in indentifier name (expected ${T})`,g&&{range:[g.range[0]+A,g.range[0]+A+6]}),E})},put:d=>m.push(d),putIdent(d,g){if(!/^[\p{ID_Start}$_][\p{ID_Continue}$]*$/u.test(d))throw this.error("Bad identifier name "+JSON.stringify(d),g);this.put(d)},node:l,nodeOrCurrent(d,g){l(d||{type:"Current"},g)},list(d,g,b){d.forEach((S,A)=>{A>0&&m.push(g),l(S,b)})}};if(a(()=>l(t),d=>(m.push(")"),"("+d+","),"data"),!r){let{usedMethods:d,usedAssertions:g}=y;g.size&&(m.unshift(" this.assertAssertions(a)||"),h.assertAssertions=function(b){for(let[S,A]of g.entries())if(!$(b,S))return()=>{throw Object.assign(new Error(`Assertion "${S}" is not defined`),{details:{loc:{range:A}}})}}),d.size&&(m.unshift(" this.assertMethods(m)||"),h.assertMethods=function(b){for(let[S,A]of d.entries())if(!$(b,S))return()=>{throw Object.assign(new Error(`Method "${S}" is not defined. If that's a custom method make sure you added it with "methods" section in options`),{details:{loc:{range:A[0]}}})}})}return n!==null&&m.push(`,
stats: [`+p.map(d=>"["+d+"]")+`],
methods: m,
assertions: a
}`),zp(h,"return"+m.join("")+"})")}function zp(t,e){try{let r=new Function("f,m,a",e);return Object.assign(r.bind(t),{toString(){return r.toString().replace(/^(\S+\s+)anonymous([^)\s]+)\s*\)/,"$1query$2)")}})}catch(r){throw wn("SyntaxError","Jora query compilation error",{compiledSource:`function(f,m,a){
${e}
}`,details:r})}}var Hs=t=>typeof t=="number"||typeof t=="string",W=(t,e)=>e<t.length?t.charCodeAt(e):0,He=t=>t===43||t===45,Z=t=>t>=48&&t<=57,Nn=t=>t===9||t===10||t===12||t===13||t===32,On=t=>t>32&&t<256&&(t<65||t>90)&&(t<97||t>122)&&!Z(t)&&!He(t)||t===8470,qp=t=>t&&!Nn(t)&&!On(t)&&!Z(t),Jp=(t,e,r)=>He(t)?Z(e)?2:e===46&&Z(r)?3:0:Z(t)?1:0,ke=(t,e,r)=>{for(;r(W(t,++e)););return e},Gp=(t,e,r)=>{let n=W(t,e);if(He(n)&&(n=W(t,e+=1)),Z(n)&&(e=ke(t,e,Z),n=W(t,e)),n===46&&Z(W(t,e+1))){if(r)return e;let s=ke(t,e+1,Z);if(n=W(t,s),n===46)return e;e=s}if(n===69||n===101){let s=1;n=W(t,e+1),He(n)&&(s=2,n=W(t,e+2)),Z(n)&&(e=ke(t,e+s,Z))}return e},Ws=(t,e,r,n)=>{if(e>=t.length)return 0;let s=W(t,e);return Nn(s)?1|ke(t,e,Nn)-e<<4:On(s)||n&&He(s)?2|ke(t,e,On)-e<<4:Jp(s,W(t,e+1),W(t,e+2))?4|Gp(t,e,r)-e<<4:8|ke(t,e,qp)-e<<4},Hp=(t,e,r)=>{let n=0,s=0,o=!1,i=!1,a=0,l=0,c=!0;for(;;){let f=Ws(t,n,o,i),u=Ws(e,s,o,i),p=f&15,m=f>>4,h=u&15,C=u>>4;if(p!==h){if(c&&p&3&&h&12){a=1,l=p,n+=m;continue}if(c&&h&3&&p&12){a=-1,l=h,s+=C;continue}return p-h}if(p===0)return a;c=!1,o=!1,i=!1;let y=m<C?m:C,d=m-C,g="",b="";for(let S=0;S<y;S++)if(g=t[n+S],b=e[s+S],g!==b){d=g<b?-1:1;break}if(p&3)o=t[n+m-1]===".",d!==0&&p>l&&(l=p,a=d);else if(p&4){if(i=!0,d!==0){let S=t.substr(n,m)-e.substr(s,C);if(S!==0)return r?-S:S;if(p>l){let A=W(t,n),E=W(e,s),T=A===45?-1:1;l=p,a=A!==E&&(A===45||E===43)?-1:A!==E&&(A===43||E===45)?1:(m-C||d)<0?-T:T,r&&(a=-a)}}}else if(d!==0){if(g!==b){let S=t.substr(n,m),A=e.substr(s,C),E=S.toLowerCase(),T=A.toLowerCase();return E!==T?E<T?-1:1:S<A?-1:1}return d}n+=m,s+=C}},Ys=t=>(e,r)=>Hs(e)&&Hs(r)?Math.sign(Hp(String(e),String(r),t)):0,Ks=Ys(!1),Xs=Ys(!0);var Wp=1,Yp=2,Ee=3,We=4,Kp=5,Xp=6,Zp=7,Qp=8;function oe(t){switch(typeof t){case"boolean":return Wp;case"number":return t!==t?Yp:Ee;case"string":return We;case"object":return t===null?Kp:Xp;case"undefined":return Qp;default:return Zp}}function xe(t,e){let r=oe(t),n=oe(e);return r!==n?r<n?-1:1:t<e?-1:t>e?1:0}function Zs(t,e){let r=oe(t),n=oe(e);return r!==n?r<n?-1:1:r===Ee?e-t:t<e?-1:t>e?1:0}function ue(t,e){let r=oe(t),n=oe(e);return(r===Ee||r===We)&&(n===Ee||n===We)?Ks(t,e):r!==n?r<n?-1:1:t<e?-1:t>e?1:0}function Qs(t,e){let r=oe(t),n=oe(e);return(r===Ee||r===We)&&(n===Ee||n===We)?Xs(t,e,!0):r!==n?r<n?-1:1:t<e?-1:t>e?1:0}function Mn(t,e){return t.length===1?(r,n)=>e(t(r),t(n)):t}var G=Object.freeze({awaitInitRef:em,ensureArray:tm,bool:H,and:(t,e)=>H(t)?e:t,or:(t,e)=>H(t)?t:e,add:rm,sub:nm,mul:om,div:sm,mod:im,eq:am,ne:lm,lt:cm,lte:um,gt:fm,gte:pm,in:vt,notIn:(t,e)=>!vt(t,e),has:(t,e)=>vt(e,t),hasNo:(t,e)=>!vt(e,t),cmp:xe,cmpAnalytical:Zs,cmpNatural:ue,cmpNaturalAnalytical:Qs,match:mm,pick:dm,indexOf:hm,lastIndexOf:gm,map:Rn,mapRecursive:bm,some:Fn,filter:Cm,slice:Am});function em(t,e,r){try{return t()}catch{if(e)throw Object.assign(new ReferenceError(`Cannot access ${e} before initialization`),{details:{name:e,loc:{range:r}}})}}function tm(t){return M(t)?t:[t]}function rm(t,e){return M(t)||M(e)?[...new Set([...M(t)?t:[t],...M(e)?e:[e]])]:t+e}function nm(t,e){if(M(t)){let r=new Set(t);return M(e)?e.forEach(n=>r.delete(n)):r.delete(e),[...r]}return t-e}function om(t,e){return t*e}function sm(t,e){return t/e}function im(t,e){return t%e}function am(t,e){return Object.is(t,e)}function lm(t,e){return!Object.is(t,e)}function cm(t,e){return t<e}function um(t,e){return t<=e}function fm(t,e){return t>e}function pm(t,e){return t>=e}function vt(t,e){return X(e)?$(e,t):e?ei(e,t)!==-1:!1}function mm(t,e){return typeof e=="function"?Fn(t,e):ne(e)?Fn(t,e.test.bind(e)):e==null}function dm(t,e=()=>!0){if(t){if(typeof e=="function"){if(M(t)||typeof t=="string"){for(let r=0;r<t.length;r++)if(H(e(t[r],r)))return t[r]}for(let r in t)if($(t,r)&&H(e(t[r],r)))return t[r];return}return M(t)||typeof t=="string"?isFinite(e)?t[e<0?t.length+Number(e):Number(e)||0]:void 0:$(t,e)?t[e]:void 0}}function hm(t,e,r){return t?ei(t,e,r):-1}function ei(t,e,r=0){if(Number.isNaN(e)&&te(t)){for(let n=ce(r,0);n<t.length;n++)if(Number.isNaN(t[n]))return n}return typeof t.indexOf=="function"?t.indexOf(e,r):-1}function gm(t,e,r){return t?ym(t,e,r):-1}function ym(t,e,r){if(Number.isNaN(e)&&te(t)){for(let n=ce(r,t.length-1);n>=0;n--)if(Number.isNaN(t[n]))return n}return typeof t.lastIndexOf=="function"?t.lastIndexOf(e,ce(r,t.length-1)):-1}function Rn(t,e){let r=typeof e=="function"?e:n=>$s(n,e);return M(t)?[...t.reduce((n,s)=>Se(n,r(s)),new Set)]:t!==void 0?r(t):t}function bm(t,e){let r=new Set;return Se(r,Rn(t,e)),r.forEach(n=>Se(r,Rn(n,e))),[...r]}function Fn(t,e){return M(t)?t.some(r=>H(e(r))):H(e(t))}function Cm(t,e){return M(t)?t.filter(r=>H(e(r))):H(e(t))?t:void 0}function Am(t,e,r,n=1){if(!te(t))return[];if(e=ce(e,0),r=ce(r,t.length),n=ce(n,1)||1,e=e<0?Math.max(0,t.length+e):Math.min(t.length,e),r=r<0?Math.max(0,t.length+r):Math.min(t.length,r),e>=0&&r>=0&&e<=r&&n===1)return typeof t=="string"?t.slice(e,r):Array.prototype.slice.call(t,e,r);e>r&&([e,r]=[r,e],n=-n);let s=[];if(n>0)for(let o=e;o<r;o+=n)s.push(t[o]);else for(let o=r-1;o>=e;o+=n)s.push(t[o]);return typeof t=="string"?s.join(""):s}var Tm=ti(20)?1/0:ti(10)?10:0;function ti(t){return Array.from({length:t},(e,r)=>({idx:r})).sort((e,r)=>e.idx%2-r.idx%2).every((e,r)=>r<t/2?e.idx>>1===r:Math.ceil(t/2)+(e.idx>>1)===r)}function ri(t,e){return t.length<=Tm?t.slice().sort(e):t.map((r,n)=>({value:r,idx:n})).sort((r,n)=>(r.value===void 0?n.value!==void 0:n.value===void 0?-1:e(r.value,n.value))||r.idx-n.idx).map(r=>r.value)}var Sm=(t,e)=>t-e,km=(t,e)=>e-t,Dt=class{constructor(e,r,n,s=!1){this.maxSize=e||1/0,this.compare=r||km,this.accept=n||null,this.values=[],this.valuesSet=s?new Set:null}add(e){this.accept!==null&&!this.accept(e)||this.valuesSet!==null&&this.valuesSet.has(e)||(this.values.length<this.maxSize?(this.valuesSet!==null&&this.valuesSet.add(e),this.values.push(e),this.heapifyUp(this.values.length-1)):this.compare(this.values[0],e)>0&&(this.valuesSet!==null&&(this.valuesSet.delete(this.values[0]),this.valuesSet.add(e)),this.values[0]=e,this.heapifyDown()))}addArray(e){for(let r=0;r<e.length;r++)this.add(e[r])}extract(){let e=this.values[0],r=this.values.pop();return this.values.length>0&&(this.values[0]=r,this.heapifyDown()),this.valuesSet!==null&&this.valuesSet.delete(e),e}heapifyUp(e){let r=this.values,n=r[e];for(;e>0;){let s=e-1>>1,o=r[s];if(this.compare(o,n)>0)break;r[s]=n,r[e]=o,e=s}}heapifyDown(){let e=this.values,r=e.length,n=r>>1,s=0,o=e[s],i=s,a=o;for(;s<n;){let l=2*s+1,c=e[l],f=l+1;if(this.compare(c,o)>0&&(i=l,a=c),f<r){let u=e[f];this.compare(u,a)>0&&(i=f,a=u)}if(i===s)break;e[s]=a,e[i]=o,s=i,a=o}}[Symbol.iterator](){return this.values.slice().sort(this.compare)[Symbol.iterator]()}},se=class extends Dt{},Bt=class extends Dt{constructor(e,r,n,s){super(e,r?(o,i)=>-r(o,i):Sm,n,s)}};var Em=t=>t;function xm(t){return t!==null&&typeof t=="object"?NaN:Number(t)}function we(t,e,r){if(te(t)){typeof e!="function"&&(e=Em);for(let n of t){let s=e(n);s!==void 0&&r(xm(s))}}}function ni(t,e,r,n){if(t.length===0||!isFinite(e)||e<0||e>100)return;let s=0,o=e*(t.length-1)/100,i=Math.floor(o),a=Math.ceil(o),l=!1,c=e<50?new Bt(a+1,n):new se(t.length-i,n);if(we(t,r,f=>{Number.isNaN(f)&&(l=!0),c.add(f),s++}),l)return NaN;if(t.length!==s){if(s===0)return;o=e*(s-1)/100,i=Math.floor(o),a=Math.ceil(o);let f=e<50?a+1:s-i;for(let u=c.values.length;u>f;u--)c.extract()}if(i!==a){let f=c.extract(),u=c.values[0];return f<=u?f+(u-f)*(o-i):u+(f-u)*(o-i)}return c.values[0]}var wm=t=>t;function oi(t,e){let r,n=0,s=0;return we(t,e,o=>{if(s++,r===void 0)r=o;else{let i=r,a=Math.abs(i),l=Math.abs(o);r+=o,a!==1/0&&l!==1/0&&(a>=l?n+=i-r+o:n+=o-r+i)}}),r!==void 0&&(r+=n),{sum:r,count:s}}function si(t,e){let r=[];return we(t,e,r.push.bind(r)),r}function ii(t,e){let r=0;if(te(t)){typeof e!="function"&&(e=wm);for(let n of t)e(n)!==void 0&&r++}return r}function ai(t,e){return oi(t,e).sum}function li(t,e){let{sum:r,count:n}=oi(t,e);if(n>0)return r/n}function vn(t,e){let r=0,n=0,s=0;if(we(t,e,o=>{r+=1;let i=o-n;n+=i/r,s+=i*(o-n)}),r>0)return s/r}function ci(t,e){let r=vn(t,e);if(r!==void 0)return Math.sqrt(r)}function ui(t,e=ue){let r;if(t&&isFinite(t.length)&&typeof e=="function"){e=Mn(e,ue);for(let n=0;n<t.length;n++){let s=t[n];(r===void 0||e(s,r)<0)&&e(s,void 0)!==0&&(r=s)}}return r}function fi(t,e=ue){let r;if(t&&isFinite(t.length)&&typeof e=="function"){e=Mn(e,ue);for(let n=0;n<t.length;n++){let s=t[n];(r===void 0||e(s,r)>=0)&&e(s,void 0)!==0&&(r=s)}}return r}function Lt(t,e,r){if(te(t))return ni(t,e,r)}function pi(t,e){return Lt(t,50,e)}function _m(){}function Pm(t){return t}function mi(t){return t===null?null:{matched:t.slice(),start:t.index,end:t.index+t[0].length,input:t.input,groups:t.groups||null}}function Im(t){let e=t.pop(),r=typeof e=="string"?null:e,n=r===null?e:t.pop(),s=t.pop();return{matched:t,start:s,end:s+t[0].length,input:n,groups:r}}var Nm=String.prototype.replaceAll||function(t,e){return ne(t)?this.replace(t,e):this.split(t).join(String(e))},Ye=Object.freeze({bool:G.bool,filter:G.filter,map:G.map,pick:G.pick,indexOf:G.indexOf,lastIndexOf:G.lastIndexOf,keys(t){return Object.keys(t||{})},values(t){let e=new Set;for(let r in t)$(t,r)&&Se(e,t[r]);return[...e]},entries(t){let e=[];for(let r in t)$(t,r)&&e.push({key:r,value:t[r]});return e},fromEntries(t){let e=Object.create(null);if(Array.isArray(t))for(let r of t)r&&(e[r.key]=r.value);return e},size(t){return X(t)?Object.keys(t).length:t&&t.length||0},sort(t,e=xe){if(!M(t))return t;if(typeof e=="function"&&e.length!==2){let r=e;e=(n,s)=>{if(n=r(n),s=r(s),Array.isArray(n)&&Array.isArray(s)){if(n.length!==s.length)return n.length<s.length?-1:1;for(let o=0;o<n.length;o++){let i=xe(n[o],s[o]);if(i!==0)return i}return 0}return xe(n,s)}}return ri(t,e)},reverse(t){return M(t)?t.slice().reverse():t},slice(t,e,r){return typeof t=="string"||M(t)?t.slice(e,r):Array.prototype.slice.call(t,e,r)},group(t,e,r){let n=new Map,s=[];typeof e!="function"&&(e=_m),typeof r!="function"&&(r=Pm),M(t)||(t=[t]);for(let o of t){let i=e(o);if(M(i))if(i.length>0){let a=r(o);for(let l of i)It(n,l,a)}else It(n,void 0,r(o));else It(n,i,r(o))}for(let[o,i]of n)s.push({key:o,value:[...i]});return s},join(t,e){return M(t)?t.join(e):String(t)},match(t,e,r){let n=String(t),s=ne(e)?e.flags:"";if(r||s.includes("g")){let o=[],i=new RegExp(e,(s||"").replace(/g|$/,"g")),a;for(;a=i.exec(n);)o.push(mi(a));return o}return mi(n.match(e))},reduce(t,e,r=void 0){return M(t)?r!==void 0?t.reduce((n,s)=>e(s,n),r):t.reduce((n,s)=>e(s,n)):e(t,r)},split(t,e){if(M(t)){let r=typeof e=="function"?e:Object.is.bind(null,e),n=[],s=0,o=0;for(;o<t.length;o++)r(t[o])&&(n.push(t.slice(s,o)),s=o+1);return n.push(t.slice(s,o)),n}return String(t).split(e)},replace(t,e,r){if(M(t)){let n=typeof e=="function"?e:Object.is.bind(null,e),s=[...t];for(let o=0;o<s.length;o++){let i=s[o];n(i)&&(s[o]=typeof r=="function"?r(i):r)}return s}return ne(e)&&!e.flags.includes("g")&&(e=new RegExp(e,e.flags+"g")),Nm.call(String(t),e,typeof r=="function"?(...n)=>r(Im(n)):r)},toLowerCase(t,e){return String(t).toLocaleLowerCase(e)},toUpperCase(t,e){return String(t).toLocaleUpperCase(e)},trim(t){return String(t).trim()},...["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","hypot","imul","log10","log2","pow","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].reduce((t,e)=>(t[e]=Math[e],t),{}),ln:Math.log,ln1p:Math.log1p,numbers:si,count:ii,sum:ai,avg:li,variance:vn,stdev:ci,min:ui,max:fi,percentile:Lt,p:Lt,median:pi});var Ke=Object.freeze({function:t=>typeof t=="function",symbol:t=>typeof t=="symbol",primitive:t=>t===null||typeof t!="object"&&typeof t!="function",string:t=>typeof t=="string",number:t=>typeof t=="number",int:Number.isInteger,finite:t=>Number.isFinite(t),nan:t=>Number.isNaN(t),infinity:t=>t===1/0||t===-1/0,boolean:t=>t===!0||t===!1,null:t=>t===null,undefined:t=>t===void 0,nullish:t=>t==null,object:X,array:M,regexp:ne,truthy:H,falsy:t=>!H(t)});var Om={path:"property",key:"value",value:"value","in-value":"value","value-subset":"value",var:"variable",assertion:"assertion"};function Ut(t,e){Object.keys(t).forEach(e.add,e)}function Mm(t,e,r,n=new Set){let s=o=>{switch(typeof o){case"string":case"number":n.add(o);break}};switch(t){case"path":{let o=new Set;for(let i of e)if(Array.isArray(i))for(let a of i)X(a)&&Ut(a,o);else X(i)&&Ut(i,o);o.forEach(n.add,n);break}case"key":{let o=new Set;for(let i of e)i!==null&&typeof i=="object"&&!Array.isArray(i)&&Ut(i,o);o.forEach(n.add,n);break}case"value":for(let o of e)s(o);break;case"in-value":{let o=new Set;for(let i of e)M(i)?i.forEach(s):X(i)&&Ut(i,o);o.forEach(n.add,n);break}case"var":for(let o of e)n.add(o);break;case"value-subset":{let o=new Set(r);for(let i of e)o.has(i)||s(i);break}}return n}function di(t,e,r,n=!1){let s=[];for(let[o,i,a,l,c=null]of r)if(e>=o&&e<=i&&(n||l.size||l.length)){let f=t.substring(o,i);/\S/.test(f)||(o=i=e,f=""),s.push({context:a,from:o,to:i,text:f,values:l,related:c})}return s}function hi(t,e){return typeof t=="function"?t:t===!0?e:!1}function gi(t){if(/^(["']).*\1$/.test(t))try{return t[0]==="'"&&(t=`"${t.slice(1,-1).replace(/\\.|"/g,e=>e==="\\'"?"'":e==='"'?'\\"':e)}"`),JSON.parse(t)}catch{}return t}function Rm(t){return e=>(typeof e=="string"?e:String(e)).toLowerCase().indexOf(t)!==-1}var Dn=(t,{value:e,stats:r,assertions:n})=>({get value(){return e},stat(s,o){return di(t,s,r,o)},suggestion(s,o){let{limit:i=1/0,sort:a,filter:l}=o||{};a=hi(a,G.cmp),l=hi(l,Rm);let c=a&&isFinite(i)?se:Set,f=di(t,s,r,!0),u=new Map,p=[];for(let m of f){let{context:h,text:C,from:y,to:d,values:g,related:b}=m,S=Om[h];if(!u.has(S)){let E;switch(c){case se:E=new se(i,a,l&&l(gi(C)),!0);break;case Set:E=new Set;break}u.set(S,{type:S,from:y,to:d,text:C,suggestions:E})}let{suggestions:A}=u.get(S);switch(h){case"assertion":if(A.size===0||A.values&&A.values.length===0)for(let E of Object.keys(n))A.add(E);break;default:Mm(h,g,b,A)}}if(c===Set)for(let m of u.values()){let{suggestions:h}=m;if(a&&(h=[...h].sort(a)),l||isFinite(i)){let C=[],y=l?l(gi(m.text)):()=>!0;for(let d of h)if(y(d)&&C.push(d)>=i)break;h=C}m.suggestions=h}for(let m of u.values())m.suggestions=Array.isArray(m.suggestions)?m.suggestions:[...m.suggestions],m.suggestions.length&&p.push(m);return p.length?p:null}});var Fm=new Map,vm=new Map,Dm=new Map,Bm=new Map;function yi(t,e,r,n,s){typeof r=="string"?Object.defineProperty(t,e,{configurable:!0,get(){let i=Bn(r,"method")(G,n,s);return Object.defineProperty(t,e,{enumerable:!0,value:i}),i}}):typeof r=="function"&&Object.defineProperty(t,e,{enumerable:!0,value:r})}function bi(t,e){if(!t&&!e)return{queryMethods:Ye,queryAssertions:Ke};let r={...Ye},n={...Ke};for(let[s,o]of Object.entries(t||{})){if($(Ye,s))throw new Error(`Builtin method "${s}" can't be overridden`);yi(r,s,o,r,n)}for(let[s,o]of Object.entries(e||{})){if($(Ke,s))throw new Error(`Builtin assertion "${s}" can't be overridden`);yi(n,s,o,r,n)}return{queryMethods:r,queryAssertions:n}}function Lm(t,e){console.log(`[${t}]`),typeof e=="string"?console.log(e):e!==void 0&&console.dir(e,{depth:null}),console.log()}function Bn(t,e,r,n,s){s=typeof s=="function"?s:s?Lm:!1,s&&(s("========================="),s("Compile query from source",t));let o=Nt.parse(t,n);s&&(s("AST",o.ast),s("Restored source",Ft(o.ast)));let i=r?Rt(t,o):null;if(s&&i){let l=p=>JSON.stringify(p).slice(1,-1),c=[].concat(...[...i.entries()].map(([p,m])=>m.map(h=>[p,...h]))),f=[],u=null;s("Stat/suggestion ranges",c.sort((p,m)=>p[1]-m[1]).map(([p,...m])=>{let[h,C,y,d]=m,g;if(h===f[0]&&C===f[1])g=" ".repeat(u.length);else{let b=l(t.slice(0,h)).length,S=l(t.substring(h,C)).length;f=m,u=" ".repeat(b)+(S?"~".repeat(S):"\\")+" "+h+":"+C,g=l(t)+`
`+u}return g+" ["+y+"] on "+p.type+(d===!0?" (current)":d&&d.type?" & "+d.type:"")}).join(`
`))}let a=e==="method"?In(o.ast,n,i):Pn(o.ast,n,i);return s&&s("Compiled code",a.toString()),a}function Um(t,e){e=e||{};let r=!!e.stat,n=!!e.tolerant,s=r?n?Bm:vm:n?Dm:Fm,{methods:o,assertions:i}=e||{},{queryMethods:a,queryAssertions:l}=bi(o,i),c;return t=String(t),s.has(t)&&!e.debug?c=s.get(t):(c=Bn(t,"query",r,n,e.debug),s.set(t,c)),c=c(G,a,l),r?Object.assign((f,u)=>Dn(t,c(f,u)),{query:c}):c}function jm(t){let e=new Map,r=new Map,n=new Map,s=new Map,{methods:o,assertions:i}=t||{},{queryMethods:a,queryAssertions:l}=bi(o,i);return function(f,u){u=u||{};let p=!!u.stat,m=!!u.tolerant,h=p?m?s:r:m?n:e,C;if(f=String(f),h.has(f)&&!u.debug)C=h.get(f);else{let y=Bn(f,"query",p,m,u.debug)(G,a,l);C=p?Object.assign((d,g)=>Dn(f,y(d,g)),{query:y}):y,h.set(f,C)}return C}}var z=Object.assign(Um,{version:js,buildin:G,methods:Ye,assertions:Ke,setup:jm,syntax:{tokenize:Nt.tokenize,parse:Nt.parse,suggest:Rt,walk:Ge,stringify:Ft,compile:Pn,compileMethod:In}});function $m(t){if(t==="<unknown>"?t="":t[0]==="["&&t[t.length-1]==="]"&&(t=t.slice(1,-1)),t!==""){let e=t.match(/^([a-z\-]+):/i)?.[1]||"";if(e.length===1&&e>="A"&&e<="Z"&&(e="",t=t.slice(2)),e===""&&/^[\\/]/.test(t))return"file://"+t.replace(/\\/g,"/")}return t}function Ci(t){return t.map(e=>{if(e===null)return null;let{id:r,url:n,source:s}=e;return{id:r,url:$m(n),source:s}})}function Ln(t){let e=t.match(/\:(\d+)\:(\d+)$/),r=e?e[0]:null,n=e!==null?e[1]==="0"?0:Number(e[1])-1:-1,s=e!==null?Number(e[2])-1:-1;return{loc:r,line:n,column:s}}function Ai(t){return t.trim()}function Vm(t,e=null){if(t.startsWith("wasm-function")&&!t.includes("wasm:")&&(e="wasm://wasm/unknown-script",t+=" "+e),e===""||e==="<unknown>"){let{loc:l,line:c,column:f}=Ln(t);return{functionName:Ai(l!==null?t.slice(0,-l.length):t),scriptUrl:"",line:c,column:f}}if(e!==null){let[l,c=""]=t.split(e),{line:f,column:u}=Ln(c);return{functionName:Ai(l),scriptUrl:e,line:f,column:u}}let r=t.match(/^((?:get |set )?[#.<>\[\]_$a-zA-Z\xA0-\uFFFF][#.<>\[\]\-_$a-zA-Z0-9\xA0-\uFFFF]*) /),n=r!==null?r[1]:"",s=r!==null?t.slice(r[0].length):t[0]===" "?t.slice(1):t,{loc:o,line:i,column:a}=Ln(s);return{functionName:n,scriptUrl:o!==null?s.slice(0,-o.length):s,line:i,column:a}}function Ti(t,e,r){let n=new Map,s=(c,f)=>{if(!c||typeof f!="number"||f===0)return null;let u=n.get(c);if(u===void 0){let p=f;o[p]?u=o[p]:(u={id:p,url:c,source:""},o.length<=p&&o.push(...Array.from({length:p-o.length+1},()=>null)),o[p]=u),n.set(c,u)}return u},o=r.slice(),i=new Map,a=[],l=new Uint32Array(t.length);for(let c=0;c<t.length;c++){let f=t[c],u=e[f.codes[0]].source,p=(u&&r[u.script])??null,{functionName:m,scriptUrl:h,line:C,column:y}=Vm(f.name,p?.url),d=p||s(h,u?.script),g=C===0&&y===0,b=g&&i.get(d)||-1,S=b;b===-1&&(S=a.push({scriptId:d?.id||0,name:m,start:u?.start??-1,end:u?.end??-1,line:C,column:y})-1,g&&i.set(d,S)),l[c]=S}return{scripts:Ci(o),functions:a,functionIndexMap:l}}var jt=["js","garbage collector","parser","bytecode compiler","compiler","other","external","atomics wait","idle","logging"];function Si(t,e,r){let n=[];for(let s=e;s<t.length;s++){if(n.length===0){if(t[s]===r)return s}else if(n[n.length-1]===t[s]){n.pop();continue}switch(t[s]){case"<":n.push(">");break;case"(":n.push(")");break;case"[":n.push("]");break}}return t.length}function zm(t){t=t.replace(/::\(.+?\)/g,"");for(let r=0;r<t.length;r++)switch(t[r]){case"<":t=t.slice(0,r)+t.slice(Si(t,r+1,">")+1),r--;break;case"(":t=t.slice(0,r)+t.slice(Si(t,r+1,")")+1),r--;break}let e=t.lastIndexOf(" ");return t=e!==-1?t.slice(e+1):t,t}function qm(t){if(!t||!t.type)return"(unknown)";if(t.type==="JS")throw new Error("Wrong code type: JS");let e=t.name,r=!1;switch(t.type){case"CPP":{e[1]===" "&&(e=zm(e.slice(2))),e="(CPP) "+e;break}case"SHARED_LIB":{e="(LIB) "+e,r=!0;break}case"CODE":{switch(t.kind){case"RegExp":e="RegExp: "+e;break;case"Builtin":/IC/.test(e)?(e="(IC) "+e,r=!0):(e="(builtin) "+e,r=!0);break;case"BytecodeHandler":e="(bytecode) "+e,r=!0;break;case"Stub":e="(stub) "+e,r=!0;break;case"LoadIC":case"StoreIC":case"KeyedStoreIC":case"KeyedLoadIC":case"LoadGlobalIC":case"Handler":e="(IC) "+e,r=!0;break}break}default:e=`(${t.type}) ${e}`}return r?null:e}function Xe(t,e=0,r=-1,n=-1,s=-1,o=-1,i=""){return{scriptId:e,functionName:t,url:i,lineNumber:r,columnNumber:n,start:s,end:o}}function Jm(t){let e=new Uint32Array(jt.length),r=t.push(Xe("(program)"))-1;for(let n=0;n<jt.length;n++){let s=jt[n];s!=="js"&&(e[n]=s=="other"||s==="external"?r:t.push(Xe(`(${s})`))-1)}return e}function Gm(t,e,r=null){let n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let o=e[s];n[s]=t.push(Xe(o.name,o.scriptId,o.line,o.column,o.start,o.end))-1}return r!==null?r.map(s=>n[s]):n}function Hm(t,e,r=null){let n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let o=e[s],i=o.func;if(i!==void 0&&r!==null)n[s]=r[i];else{let a=qm(o);a!==null&&(n[s]=t.push(Xe(a))-1)}}return n}function ki(t,e,r=null){let n=[Xe("(root)")],s=Jm(n),o=Gm(n,e,r),i=Hm(n,t,o);return{callFrames:n,callFrameIndexByVmState:s,callFrameIndexByV8logFunction:o,callFrameIndexByCode:i}}var Ym=1048576,Un=8;function xi(t,e,r=0){return{id:t,callFrame:e,parentScriptOffset:r,children:[]}}function Km(t){if(t.length>1)for(let e=1,r=t[0].tm;e<t.length;e++){let{tm:n}=t[e];if(r>n)return t.slice().sort((s,o)=>s.tm-o.tm);r=n}return t}function wi(t,e,r,n){let s=e[8],o=r.length-1,i=xi(1,0),a=[i],l=new Map,c=new Array(t.length),f=new Array(t.length),u=new Array(t.length),p=Km(t),m=0;for(let g=0;g<p.length;g++){let b=p[g],S=b.s,A=b.vm,E=e[A],T=i,x=-1;if(A!==1&&A!==8)for(let w=S.length-2;w>=0;w-=2){let _=S[w];if(_<0||_>o)continue;let O=r[_];if(O===0)continue;T=C(T,O,x);let I=n[_];if(I!==null){let F=dt(I.positions,S[w+1]-(w>0&&I.pcOnNextInstruction?1:0));if(x=I.positions[F+1],I.inlined!==null){let N=I.positions[F+2];N!==-1&&(T=d(T,I.inlined,N))}}else x=-1}E===0&&T===i&&(E=s),E!==0&&(T=C(T,E,x),x=-1),c[g]=T.id,f[g]=b.tm-m,u[g]=x,m=b.tm}return{firstTimestamp:p[0].tm,lastTimestamp:m,nodes:a,samples:c,timeDeltas:f,samplePositions:u};function h(g,b){return g+b*Ym}function C(g,b,S){let A=g.children.length;if(A===0)return y(g,b,S);if(A<Un){for(let E of g.children){let T=a[E-1];if(T.callFrame===b&&T.parentScriptOffset===S)return T}return y(g,b,S)}return l.get(g).get(h(b,S))||y(g,b,S)}function y(g,b,S){let A=xi(a.length+1,b,S),E=g.children.push(A.id);return a.push(A),E>=Un&&(E===Un?l.set(g,new Map(g.children.map(T=>{let x=a[T-1];return[h(x.callFrame,x.parentScriptOffset),x]}))):l.get(g).set(h(b,S),A)),A}function d(g,b,S){let A=b[S*3],E=b[S*3+1],T=b[S*3+2],x=T!==-1?d(g,b,T):g;return C(x,A,E)}}function $t(t){let e=t;return Array.isArray(e.code)&&Array.isArray(e.functions)&&Array.isArray(e.ticks)}function Xm(t,e){for(let r of t)r.scriptId!==0&&(r.url=e[r.scriptId]?.url||"")}function Zm(t,e,r){let n=[],s=new Int32Array(t.length),o=i=>{let a=s[i];return a===0&&(a=n.length,s[i]=a,n.push(t[i])),a};for(let i of e)i.callFrame=o(i.callFrame);for(let i of r){i.callFrame=o(i.callFrame);for(let a of i.codes)for(let l=0;l<a.fns.length;l++)a.fns[l]=o(a.fns[l])}return n}function _i(t){let{functions:e,functionIndexMap:r,scripts:n}=Ti(t.functions,t.code,t.scripts),{callFrames:s,callFrameIndexByVmState:o,callFrameIndexByCode:i,callFrameIndexByV8logFunction:a}=ki(t.code,e,r),l=Ho(t.code,a),c=Go(t.code,i,l),{nodes:f,samples:u,timeDeltas:p,samplePositions:m,lastTimestamp:h}=wi(t.ticks,o,i,l),C=Zm(s,f,c),y=z.methods.median(p);return Xm(C,n),{startTime:0,endTime:h+y,nodes:f,samples:u,timeDeltas:p,_samplesInterval:y,_samplePositions:m,_scripts:n.filter(d=>d!==null),_callFrames:C,_callFrameCodes:c,_heap:t.heap}}var Pi=["* [V8 log](https://v8.dev/docs/profile) (.log)","* [V8 log preprocessed](https://v8.dev/docs/profile#web-ui-for---prof) with --preprocess (.json)","* [V8 CPU profile](https://nodejs.org/docs/latest/api/cli.html#--cpu-prof) (.cpuprofile)","* [Chromium Performance Profile](https://developer.chrome.com/docs/devtools/performance/reference#save) (.json)","* [Edge Enhanced Performance Traces](https://learn.microsoft.com/en-us/microsoft-edge/devtools-guide-chromium/experimental-features/share-traces) (.devtools)"],IA=Pi.map(t=>t.replace(/\[(.+?)\]\(.*?\)/g,"$1"));function Ii(t,e){let r={},n=null;if(t=t||{},Bs(t)){let{traceEvents:o,runtime:i,scripts:a,executionContexts:l}=Ls(t);t=o,r={_runtime:i,_scripts:a,_executionContexts:l}}if(Lr(t))n=Us(t);else if(Array.isArray(t)){let o=t.map(i=>"profile"in i&&i.profile?i.profile:i);($t(o[0])||Pt(o[0]))&&(n={profiles:o})}else if($t(t)||Pt(t))n={profiles:[t]};else throw e("Unknown format"),new Error("Unknown format");let s={indexToView:n?.indexToView||0,profiles:[]};for(let o of n?.profiles||[])if($t(o))s.profiles.push(_i(o));else if(Pt(o))o=Fs(o),o=Ds(o),Ms(o),Object.assign(o,r),s.profiles.push(o);else throw e("Bad format",{view:"md",source:["CPUpro supports the following formats:",...Pi]}),new Error("Bad format");return s.profiles.length===0&&e("CPU profiles not found"),So?s:{...s,profiles:s.profiles.slice(0,1)}}function Qm(t,e){let r=e.split(/\//);r.pop();let n=t!==null?t.slice(0,Math.min(t.length,r.length)):r;r=r.slice(0,n.length);for(let s=n.length-1;s>=0;s--)n[s]!==r[s]&&n.pop();return n}function Ni(t,e,r){let n=new Map;for(let o=0;o<t.length;o++){let i=t[o],a=i.length>0?i[0]:"",l=n.get(a);l!==void 0?(l.packages.push(e[o]),l.paths.push(i.slice(1))):n.set(a,{packages:[e[o]],paths:[i.slice(1)]})}let s=[];for(let[o,{packages:i,paths:a}]of n)if(r&&(i.length===1||o===""))s.push([`${o&&o+"."}${r}`,i]);else{let l=`${o}${r&&"."+r}`,c=Ni(a,i,l);c.length===1&&r?s.push([l,i]):s.push(...c)}return s}function ed(t){let e=[],r=[];for(let n of t)n.path&&/^https?:/.test(n.path)&&e.push(n);for(let n of e)r.push(n.name.split(".").reverse());for(let[n,s]of Ni(r,e,""))for(let o of s)o.shortName=n}function Oi(t,e){ed(t);let r=["script","devtools"],n=Object.create(null);for(let s of r)n[s]=Object.create(null);for(let s of e.values()){let o=s.path||"";if(o){let i=s.package;r.includes(i.type)&&i.path&&i.path.includes(":")&&!/^https?:/.test(i.path)&&(n[i.type][i.path]=Qm(n[i.type][i.path]||null,o))}}for(let[s,o]of Object.entries(n))for(let[i,a]of Object.entries(o))if(a!==null&&a.length>0){let l=a.join("/");for(let c of t.values())c.type===s&&c.path===i&&(c.path=l)}for(let s of e.values()){let o=s.path||"";s.package.path&&o.startsWith(s.package.path)&&(s.packageRelPath=o.slice(s.package.path.length).replace(/^[\/\\]+/,""))}}function td(t){if(!t.name){switch(t.package.registry){case"npm":t.name=`${t.package.name}/${t.packageRelPath}`;return}switch(t.package.type){case"script":case"wasm":case"node":t.name=t.packageRelPath;break;case"webpack/runtime":t.name=t.path;break}}}function Mi(t){for(let e of t)td(e)}var _e=class{dict;scriptById;#e;byUrl;#t;constructor(e,r){this.dict=e,this.scriptById=new Map,this.#e=new Map,this.byUrl=new Map,this.#t=new Map;for(let n of e.scripts){let{url:s}=n,o=this.#t.get(s||"");o===void 0?(o=[n],this.#t.set(s||"",o)):o.push(n)}this.#r(r)}#r(e){if(Array.isArray(e))for(let{id:r,url:n,source:s}of e)this.set(r,this.resolveScript(r,n,s))}get(e){return this.scriptById.get(e)}has(e){return this.scriptById.has(e)}set(e,r){return this.scriptById.set(e,r),this}entries(){return this.scriptById.entries()}#n(e,r){let n=this.byUrl.get(r),s=-1;return n===void 0?(s=0,n=[e],this.byUrl.set(r,n)):(s=n.indexOf(e),s===-1&&(s=n.push(e)-1)),s}resolveScript(e,r,n){if(e===0)return null;let s=this.get(e);if(s===void 0){r||="";let o=this.#n(e,r),i=this.#t.get(r);i===void 0&&(i=[],this.#t.set(r,i)),o<i.length?s=i[o]:(s=rd(this.dict.scripts.length+1,r,n),s.module=this.dict.resolveModule(s),i.push(s),this.dict.scripts.push(s)),this.set(e,s)}return s}normalizeScriptId(e){if(typeof e=="string")if(/^\d+$/.test(e))e=Number(e);else{let r=this.#e.get(e);r===void 0&&this.#e.set(e,r=/^:\d+$/.test(e)?Number(e.slice(1)):-this.#e.size-1),e=r}return e}};function Ri(t,e,r){if(t===0||t==="0")return null;let n=r.get(t);if(n===void 0){let s=r.normalizeScriptId(t);if(s===0)return null;n=r.resolveScript(s,e),r.set(t,n),r.set(s,n)}return n}function rd(t,e,r=null){return{id:t,url:e,source:r,module:null,callFrames:[]}}var nd=[["(builtin) ","builtin"],["(IC) ","ic"],["(bytecode) ","bytecode"],["(LIB) ","lib"],["(CPP) ","cpp"]],zt=class{callFrames;scripts;modules;packages;categories;#e;#t;#r;#n;#o=1;#i;#s;constructor(){this.scripts=[],this.callFrames=Object.assign([],{wellKnownIndex:Object.create(null)}),this.modules=[],this.packages=[],this.categories=[],this.#e=new Map,this.#t=new Map,this.#r=new Map,this.#n=new Map,this.#i=new Map,this.#s=new Map([...Object.entries(wo)]);for(let e of xo)this.resolveCategory(e);for(let[e,r]of Eo)this.callFrames.wellKnownIndex[r]=this.resolveCallFrameIndex({scriptId:0,url:"",functionName:e,lineNumber:-1,columnNumber:-1},null)}callFrameToModule(e){return e.module}moduleToScript(e){return e.script}moduleToPackage(e){return e.package}packageToCategory(e){return e.category}setPackageNameForOrigin(e,r){let n=this.#s.get(e);n===void 0?this.#s.set(e,r):n!==r&&console.warn(`Package name for origin "${e}" already set "${n}", new name "${r}" ignored`)}resolveCallFrameIndex(e,r){let n=e.functionName||"",s=e.url||null,o=Ri(e.scriptId,s,r),i=o!==null?Vt(e.lineNumber):-1,a=o!==null?Vt(e.columnNumber):-1,l=this.#n.get(o);l===void 0&&this.#n.set(o,l=new Map);let c=l.get(n);c===void 0&&l.set(n,c=new Map);let f=c.get(i);f===void 0&&c.set(i,f=new Map);let u=f.get(a);if(u===void 0){let p=Vt(e.start),m=Vt(e.end),h=this.resolveModule(o,n),{name:C,kind:y,regexp:d}=this.#l(n,i,a),g={id:this.callFrames.length+1,script:o,kind:y||ad(o,C,d),name:C,origName:n,line:i,column:a,loc:id(i,a),start:p,end:m,regexp:d,category:h.category,package:h.package,module:h};u=this.callFrames.push(g)-1,f.set(a,u),o?.callFrames.push(g)}return u}resolveCallFrame(e,r){return this.callFrames[this.resolveCallFrameIndex(e,r)]}resolveScript(e,r,n=null,s=null){return e.resolveScript(r,n,s)}resolveCategory(e){let r=e==="webpack/runtime"?"script":e,n=this.#r.get(r);return n===void 0&&(n={id:this.#r.size+1,name:r},this.#r.set(r,n),this.categories.push(n)),n}resolvePackage(e,r){let n=`${e}/${r}`,s=this.#t.get(n);if(s!==void 0)return s;let o="unknown",i="unknown",a="(unknown)",l=null,c=null,f=null,u=null;switch(r=r||"",e){case"script":case"bundle":{let p=sd(r);if(p!==null&&(o=p.path,i=p.type,a=p.name,l=p.path,c=p.version,f=p.registry,u=p.cdn),o==="unknown")if(i="script",/^https?:/.test(r)){let{origin:m,host:h}=new URL(r);o=m,a=this.#s.get(h)||h,l=m}else if(r){let h=(r.match(/^[a-z\d]{2,}:/i)||["file:"])[0];h!=="file:"?(o=`(${h}script)`,a=o,l=h):od(r)?(i="devtools",o="vscode-js-debug",a=o,l=r.slice(0,r.indexOf(":")+1)):(o="(script)",a=o,l=r.slice(0,r.indexOf(":")+1))}else o="(compiled script)",a="(compiled script)";break}case"regexp":{o="(regexp)",i="regexp",a="(regexp)",l="";break}case"node":{o="(node)",i="node",a="(node.js modules)",l="node:";break}case"deno":{o="(deno)",i="deno",a="(deno modules)",l="ext:";break}case"v8":{o=`(${e})`,i="internals",a=`(${e} modules)`,l=`${e}/`;break}case"webpack/runtime":case"electron":{o=`(${e})`,i=e,a=`(${e} modules)`,l=`${e}/`;break}case"wasm":{o="(wasm)",i="wasm",a="(wasm)",l=r.startsWith("wasm://wasm/")?"wasm://wasm/":null;break}case"chrome-extension":{let{origin:p,host:m}=new URL(r);o=p,i="chrome-extension",a=this.#s.get(m)||m,l=p;break}case"root":case"program":case"gc":case"idle":case"internals":case"compilation":case"logging":case"blocking":o=e,i=e,a=e!=="gc"?`(${e})`:"(garbage collector)";break}return s=this.#t.get(o),s===void 0&&(s={id:this.packages.length+1,type:i,name:a,shortName:a,path:l,version:c,registry:f,cdn:u,category:this.resolveCategory(i)},this.#t.set(n,s),this.#t.set(o,s),this.packages.push(s)),s}#a(e,r,n=null,s=null){let o=s??r,i=this.#e.get(o);if(i===void 0){let a=this.resolvePackage(e,n);i={id:this.#e.size+1,type:e,name:r,path:n,script:s,category:a.category,package:a,packageRelPath:null},this.#e.set(o,i),this.modules.push(i)}return i}resolveNoScriptModuleByFunctionName(e){let r=ar.get(e)||null,n="unknown",s="unknown";return r!==null?(n=r,s=e):e.startsWith("RegExp: ")?(n="regexp",s="(regexp)"):(n="internals",s="(internals)"),this.#a(n,s)}resolveModuleByScript(e){let r=e.url,n="unknown",s=null,o=null;if(r==="extensions::SafeBuiltins"&&(r=""),!r||r.startsWith("evalmachine.")){let i=this.#i.get(e);i===void 0&&this.#i.set(e,i=`(anonymous module #${this.#i.size+1})`),n="script",s=i}else if(r.startsWith("v8/"))n="v8",o=r;else if(r.startsWith("node:electron/")||r.startsWith("electron/"))n="electron",o=r;else if(r.startsWith("webpack/runtime/"))n="webpack/runtime",o=r;else{let i=(r.match(/^([a-z\-]+):/i)||[])[1]||"";switch(i.length===1&&/[A-Z]/.test(i)&&(i="",r=r.slice(2).replace(/\\/g,"/")),i){case"":n="script",o="file://"+r;break;case"file":case"http":case"https":n="script",o=r;break;case"webpack":case"webpack-internal":n="bundle",o=r.replace(/\?$/,"");break;case"node":case"chrome-extension":case"wasm":n=i,o=r;break;case"ext":if(/^ext:(core|cli|runtime|deno)/.test(r)){n="deno",o=r;break}default:n=`protocol-${i}`,s=r}}return this.#a(n,s,o,e)}resolveModule(e,r=null){return e===null?this.resolveNoScriptModuleByFunctionName(r||""):this.resolveModuleByScript(e)}#l(e,r,n){let s=null,o=null,i=e;if(e.startsWith("RegExp: "))s=e.slice(8),i=s.length<=ir?s:`${s.slice(0,ir-1)}\u2026`;else{for(let[a,l]of nd)if(e.startsWith(a)){o=l,i=e.slice(a.length);break}!o&&!i&&(i=r===0&&n===0?"(script)":`(anonymous function #${this.#o++})`)}return{name:i,kind:o,regexp:s}}};function od(t){return t.includes("bootloader.")&&/[\\\/](?:ms-vscode\.js-debug|vscode-js-debug-)/.test(t)&&/[\\\/](?:vscode-js-debug-)?bootloader\.(?:bundle\.)?js$/.test(t)}function sd(t){let e=/^https?:\/\//.test(t)?new URL(t):null;if(e!==null&&Object.hasOwn(lr,e.origin)){let r=lr[e.origin],n=e.pathname;for(let s of r.endpoints){let o=n.match(s.pattern);if(o!==null){let i=o.groups?.pkg||"?",a=o.groups?.version||null,l=o.indices?.groups?.path?.[0]??n.length;return{type:"script",name:i,path:e.origin+(l!==void 0?n.slice(0,l):n),version:a,registry:s.registry,cdn:r.cdn}}}}if(/\/node_modules\//.test(t)){let r=t.split(/\/node_modules\//),s=(r.pop()||"").match(/(?:@[^/]+\/)?[^/]+/);if(s!==null){let o=s[0],i=[...r,o].join("/node_modules/");return{type:"script",name:o,path:i,version:null,registry:"npm",cdn:null}}}return null}function id(t,e){return t!==-1&&e!==-1?`:${t}:${e}`:null}function Vt(t){return typeof t=="number"&&t>=0?t:-1}function ad(t,e,r){if(t===null){if(e==="(root)")return"root";if(ar.has(e))return"vm-state"}return r!==null?"regexp":e==="(script)"?"script":"function"}function Fi(t,e,r){let n=new Uint32Array(t.length).fill(1),s=1;if(r!==null)for(let o=1;o<t.length;o++)t[o]!==t[o-1]||r[o]!==r[o-1]?(e[s]=e[o],t[s]=t[o],r[s]=r[o],s++):(e[s-1]+=e[o],n[s-1]++);else for(let o=1;o<t.length;o++)t[o]!==t[o-1]?(e[s]=e[o],t[s]=t[o],s++):(e[s-1]+=e[o],n[s-1]++);return s!==t.length?{samples:t.slice(0,s),sampleCounts:n.slice(0,s),samplePositions:r!==null?r.slice(0,s):r,timeDeltas:e.slice(0,s)}:{samples:t,sampleCounts:n,samplePositions:r,timeDeltas:e}}function ld(t,e){let r=new Uint32Array(e.length),n=[],s=0;for(let o=0;o<t.length;o++){let i=t[o],a=r[i];a===0?(n.push(e[i]),r[i]=++s,t[o]=s-1):t[o]=a-1}return Me(n)}function vi(t,e,...r){let n=ld(t,e);for(let s of r)s.sampleIdToNode=n.map(o=>s.sourceIdToNode[o]),n=s.sampleIdToNode}function Di(t,e,r,n,s,o,i){let a=Date.now(),l=i?["callFramePositions","callFrames","modules","packages","categories"]:["callFrames","modules","packages","categories"],{recomputeTimings:c,samplesTimings:f,samplesTimingsFiltered:u,treeTimings:p,treeTimestamps:m,treeTimingsFiltered:h,dictionaryTimings:C,dictionaryTimingsFiltered:y}=Uo(t,e,[i,r,n,s,o].filter(g=>g!==null)),d={recomputeTimings:c,samplesTimings:f,samplesTimingsFiltered:u,callFramePositionsTimings:null,callFramePositionsTreeTimings:null,callFramePositionsTimingsFiltered:null,callFramePositionsTreeTimingsFiltered:null,callFramePositionsTreeTimestamps:null};return C.forEach((g,b)=>d[`${l[b]}Timings`]=g),p.forEach((g,b)=>d[`${l[b]}TreeTimings`]=g),y.forEach((g,b)=>d[`${l[b]}TimingsFiltered`]=g),h.forEach((g,b)=>d[`${l[b]}TreeTimingsFiltered`]=g),m.forEach((g,b)=>d[`${l[b]}TreeTimestamps`]=g),ae&&console.log("Compute timings:",Date.now()-a),d}var cd="no-samples";function Li(t,e,r,n,s,o){ud(r,n,s);let i=ge(r);typeof o!="number"&&(o=r.slice().sort()[r.length>>1]),t||(t=0);let a=t+i;(!e||e<a)&&(e=a+o);let l=r[0],c=e-t-l;r.copyWithin(0,1),i-=l;let f=Math.max(0,c-i),u=f>2.5*o?o:f;r[r.length-1]=u,i+=u;let p=i,m=c-p;return{startTime:t,startNoSamplesTime:l,endTime:e,endNoSamplesTime:m,totalTime:p,samplesInterval:o}}function ud(t,e,r){for(let n=0;n<t.length;n++){let s=t[n];s<0&&(n<t.length-1&&(t[n+1]+=s),t[n]=n===0?0:-s,n>0&&(t[n-1]+=s,Bi(e,n,n-1),Array.isArray(r)&&Bi(r,n,n-1),n-=2))}}function Bi(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}function Ui(t,e,r,n=null,s){let a=t*1.5,l=t*1.2,c=0;for(let f=0;f<e.length;f++)e[f]>a&&c++;if(c>0){let f=s.nodeIdSeed++,u=e.length;s.noSamplesNodeId=f,s.callFrames.push(s.dict.callFrames.wellKnownIndex[cd]),s.nodeParentId.push(1),s.parentScriptOffsets.push(-1),e.length+=c,r.length+=c,n!==null&&(n.length+=c);for(let p=u+c-1,m=u-1;p>=0;p--,m--){let h=e[m];h>a?(e[p-1]=l,e[p]=h-l,r[p-1]=r[m],r[p]=f,n!==null&&(n[p-1]=n[m],n[p]=-1),p--):(e[p]=h,r[p]=r[m],n!==null&&(n[p]=n[m]))}}}function jn(t){let e=t.filter(a=>!a.disabled&&a.type==="memory");if(e.length<2)return;let{_callFramesStable:r,_samplesStable:n,_uniqueValuesArray:s}=e[0],o=s.length,i=4294967295;r.fill(0),n.fill(i);for(let a of e){let{samples:l,timeDeltas:c,_samplesAll:f,_uniqueValuesMap:u,_callFramesMap:p}=a,{sampleIdToNode:m,nodes:h,dictionary:C}=a.callFramesTree,y=new Uint32Array(r.length);f.fill(0);for(let d=0;d<l.length;d++){let g=l[d],b=c[d],S=u.get(b)||0,A=h[m[g]],E=C[A],T=p.get(E)||0;f[T*o+S]++,y[T]+=b}for(let d=0;d<f.length;d++)f[d]<n[d]&&(n[d]=f[d])}for(let a=0;a<r.length;a++)for(let l=0;l<o;l++){let c=n[a*o+l];c!==i&&(r[a]+=c*s[l])}for(let a of e){let{_samplesAll:l,_callFramesVariance:c}=a;c.fill(0);for(let f=0;f<c.length;f++)for(let u=0;u<o;u++){let p=f*o+u;n[p]!==i&&(c[f]+=(l[p]-n[p])*s[u])}}}function ji(t,e){let r=ge(t);return typeof e!="number"&&(e=go(t)),{startTime:0,startNoSamplesTime:0,endTime:r,endNoSamplesTime:0,totalTime:r,samplesInterval:e}}function $i(t,e){let r=e.filter(p=>p.type==="memory"),n=new Set;if(r.length===0)return;for(let p of r){let m=Object.create(null);for(let h of p.timeDeltas)n.add(h),m[h]=(m[h]||0)+1;p._sampleSizeCounts=Object.fromEntries(Object.entries(m).sort((h,C)=>Number(h[0])-Number(C[0])))}let s=[...n].sort(),o=new Map(s.map((p,m)=>[p,m])),i=s.length,a=t.callFrames.length,l=new Map(t.callFrames.map((p,m)=>[p,m])),c=new Uint32Array(a),f=new Uint32Array(a*i),u=fd(t,r);for(let p of r)Object.assign(p,{_commonTree:u,_uniqueValuesMap:o,_uniqueValuesArray:s,_callFramesMap:l,_callFramesVariance:new Uint32Array(a),_callFramesStable:c,_samplesStable:f,_samplesAll:new Uint32Array(a*i)});jn(r)}function fd(t,e){let r=t.callFrames,n=r.length,s=[0],o=new Map([[0,0]]),i=[0],a=[];for(let f of e){let{callFramesTree:{nodes:u,parent:p}}=f,m=new Uint32Array(u.length);a.push(m);for(let h=1;h<u.length;h++){let C=m[p[h]],y=C*n+u[h],d=o.get(y);d===void 0&&(d=s.push(u[h])-1,i.push(C),o.set(y,d)),m[h]=d}}let l=Int32Array.from({length:s.length},(f,u)=>u);return Re(new Uint32Array(i),l,new Uint32Array(s),r)}function Vi(t,e,r,n,s){let o=r!==null?md(t,r):dd(t);o!==-1&&pd(o,e,n)}function pd(t,e,r){let n=new Map,{nodeParentId:s,noSamplesNodeId:o,parentScriptOffsets:i,callFrames:a,dict:l}=e,c=l.callFrames.wellKnownIndex.gc;for(let f=1,u=r[0];f<r.length;f++){let p=r[f];if(p===t){if(u===t)r[f]=r[f-1];else if(u!==o){let m=n.get(u);m===void 0&&(m=e.nodeIdSeed++,n.set(u,m),a.push(c),s.push(u),i.push(-1)),r[f]=m}}u=p}}function md(t,e){let r=new Set(t[0].children);for(let n of t){let s=n.callFrame,o=typeof s=="number"?e[s]:s;if(o.scriptId===0&&o.functionName==="(garbage collector)"&&r.has(n.id))return n.id}return-1}function dd(t){let e=new Set(t[0].children);for(let r of t){let n=r.callFrame;if(n.scriptId===0&&n.functionName==="(garbage collector)"&&e.has(r.id))return r.id}return-1}function zi(t,e,r,n,s=null){let o=s?.count||0,i=new Uint32Array(e.length+o);for(let a=0;a<e.length;a++){let{callFrame:l}=e[a],c=typeof l=="number"?r[l]:t.resolveCallFrameIndex(l,n);i[a]=c}return i.set(s?.callFrames||[],e.length),i}function hd(t,e=null){let r=Co(t),n=e?.count||0,s=new Int32Array(r+1+n).fill(-1);for(let o=0;o<t.length;o++)s[t[o].id]=o;for(let o=t.length,i=r+1;o<s.length;o++,i++)s[i]=o;return s}function gd(t,e=null){let r=e?.parentScriptOffsets||[],n=new Int32Array(t.length+r.length).fill(-1);for(let s=0;s<t.length;s++){let{parentScriptOffset:o}=t[s];typeof o=="number"&&(n[s]=o)}return n.set(r,t.length),n}function yd(t,e,r=null){let n=r?.nodeParentId||[],s=new Uint32Array(t.length+n.length);for(let o=0;o<t.length;o++){let{children:i}=t[o];if(Array.isArray(i)&&i.length>0)for(let a of i)s[e[a]]=o}for(let o=0,i=t.length;o<n.length;o++,i++)s[i]=e[n[o]];return s}function qi(t,e=null){let r=hd(t,e),n=yd(t,r,e),s=gd(t,e);return{nodeIndexById:r,nodeParent:n,nodePositions:s}}function Ji(t,e,r,n=new _e(t),s){let o=bd(t,n,r),i=zi(t,e,o,n,s);return{callFrameByIndex:o,callFrameByNodeIndex:i}}function bd(t,e,r){let n=new Uint32Array(r?.length||0);if(Array.isArray(r)){for(let s=0;s<r.length;s++)n[s]=t.resolveCallFrameIndex(r[s],e);n.length!==r.length&&console.warn("Merged call frames:",r.length-n.length)}return n}function Gi(t=[],e,r,n=0,s=n){let o=[],i=new Map,a=Array.from(t,({callFrame:l,codes:c})=>({callFrame:r[e[l]],topTierWeight:-1,topTier:"Unknown",hotness:"cold",codes:new Array(c.length)}));for(let l=0;l<a.length;l++){let c=a[l],{callFrame:f}=c,{codes:u}=t[l],p=-1,m="Unknown",h=null,C=n,y=f.script;if(y!==null){let d=i.get(y);d===void 0&&i.set(y,d={script:y,compilation:null,callFrameCodes:[]}),f.start===0&&f.end===y.source?.length?d.compilation=c:d.callFrameCodes.push(c)}else console.warn("Script function has no script",c);for(let d=0;d<u.length;d++){let g=u[d],b=g.tier,S=lt.indexOf(b),A=g.deopt?g.deopt.tm-g.tm:d!==u.length-1?u[d+1].tm-g.tm:s>n?s-g.tm:0,E={...g,tm:g.tm-n,fns:g.fns.map(T=>r[e[T]]),duration:A,segments:null,callFrameCodes:c,callFrame:f};h!==null&&g.tm>C&&(h.segments===null&&(h.segments=[{tm:h.tm,duration:h.duration}]),h.segments.push({tm:C,duration:g.tm-C}),h.duration+=g.tm-C),g.deopt||(h=E),C=g.tm+A,c.codes[d]=E,o.push(E),S>p&&(p=S,m=b)}c.topTierWeight=p,c.topTier=m,c.hotness=ct[m]}return o.sort((l,c)=>l.tm-c.tm),{codes:o,codesByCallFrame:a,codesByScript:[...i.values()]}}function Hi(t,e){return e*16777216+t}function Cd(t,e){return e*16777216+t}function Wi(t,e,r,n,s,o,i){if(i===null)return{positionsTreeSource:null};let a=new Map,l=new Map,c=[],f=new Uint32Array(e.length),u=[],p=[];for(let g=0;g<r.length;g++){let b=s[e[g]],S=r[g],A=Hi(b,S),E=a.get(A);E===void 0&&a.set(A,E=c.push({callFrame:n[b],scriptOffset:S})-1),f[g]=E}if(i!==null)for(let g=0;g<o.length;g++){let b=t[o[g]],S=s[b]||0,A=i[g],E=Hi(S,A),T=a.get(E);T===void 0&&a.set(E,T=c.push({callFrame:n[S],scriptOffset:A})-1);let x=Cd(b,A),w=l.get(x);w===void 0&&(w=f.length+l.size,l.set(x,w),u.push(T),p.push(b)),o[g]=w-f.length}let m=f.length+u.length,h=new Uint32Array(m),C=new Uint32Array(m);h.set(f),h.set(u,f.length),C.set(e),C.set(p,f.length);let y=new Int32Array(l.values()),d=Re(C,y,h,c);return{samplePositions:i,positionsTreeSource:d}}var Ad={chromium:"Chromium",deno:"Deno",edge:"Edge",electron:"Electron",nodejs:"Node.js",unknown:"Unknown"};function Yi(t,e,r){let n=new Set(t.map(o=>o.name)),s=r||(n.has("electron")?"electron":n.has("deno")?"deno":n.has("node")?"nodejs":n.has("chrome-extension")||e.find(o=>o.path&&/^https?:/.test(o.path))?"chromium":"unknown");return{engine:"V8",code:s,name:Ad[s]}}var Jt=class{callFrames;scripts;modules;packages;categories;callFrameToModule;moduleToScript;moduleToPackage;packageToCategory;constructor(e,r){let n=new Uint8Array(e.callFrames.length);for(let s=0;s<r.length;s++)n[r[s]]=1;for(let s=0;s<n.length;s++)if(n[s]===0){let{kind:o}=e.callFrames[s];n[s]=+(o==="function"||o==="script"||o==="regexp")}this.callFrames=e.callFrames.filter((s,o)=>n[o]),[this.modules,this.callFrameToModule]=qt(e.modules,this.callFrames,e.callFrameToModule),[this.scripts,this.moduleToScript]=qt(e.scripts,this.modules,e.moduleToScript),[this.packages,this.moduleToPackage]=qt(e.packages,this.modules,e.moduleToPackage),[this.categories,this.packageToCategory]=qt(e.categories,this.packages,e.packageToCategory)}};function qt(t,e,r){let n=new Set(e.map(r).filter(Boolean)),s=new Uint32Array(n.size),o=new Array(n.size);for(let i=0,a=0;i<t.length;i++){let l=t[i];n.has(l)&&(s[a]=i,o[a]=l,a++)}return[o,s]}function $n(t,e){e.fill(0);for(let r of t){let n=r.callFramesTimings.samplesCount;for(let s=0;s<n.length;s++)n[s]>0&&e[s]++}for(let r of t){let{timeDeltasByProfile:n,sampleCountsByProfile:s}=r,{samplesCount:o,selfTimes:i}=r.callFramesTimings;n.fill(0),s.fill(0);for(let a=0;a<o.length;a++){let l=e[a]-1;n[l]+=i[a],s[l]+=o[a]}}for(let r=0;r<e.length;r++)e[r]/=t.length}var Td=!1;async function Ki(t,e,{work:r}){let n=t.nodes.length,s=t.samples.length,o=t._type==="memory"?"memory":"time",i=o==="memory"||!To,a={dict:e,nodeIdSeed:t.nodes.length+1,noSamplesNodeId:-1,callFrames:[],nodeParentId:[],parentScriptOffsets:[],get count(){return this.nodeParentId.length}},{startTime:l,startNoSamplesTime:c,endTime:f,endNoSamplesTime:u,totalTime:p,samplesInterval:m}=o==="time"?await r("process time deltas",()=>Li(t.startTime,t.endTime,t.timeDeltas,t.samples,t._samplePositions,t._samplesInterval)):await r("process memory allocations",()=>ji(t.timeDeltas,t._samplesInterval));Td&&o==="time"&&await r("process time deltas",()=>Ui(m,t.timeDeltas,t.samples,t._samplePositions,a));let{rawSamples:h,rawTimeDeltas:C,rawSamplePositions:y}=await r("convert samples & timeDeltas into TypedArrays",()=>({rawSamples:Me(t.samples),rawTimeDeltas:Me(t.timeDeltas),rawSamplePositions:Array.isArray(t._samplePositions)?yo(t._samplePositions):null})),{samples:d,sampleCounts:g,samplePositions:b,timeDeltas:S}=await r("process samples",()=>i?{samples:h,sampleCounts:new Uint32Array(h.length).fill(1),samplePositions:y,timeDeltas:C}:Fi(h,C,y));await r("reparent GC samples",()=>Vi(t.nodes,a,t._callFrames||null,d,b));let{callFrameByIndex:A,callFrameByNodeIndex:E}=await r("extract call frames",()=>Ji(e,t.nodes,t._callFrames,new _e(e,t._scripts),a)),{codes:T,codesByCallFrame:x,codesByScript:w}=await r("process function codes",()=>Gi(t._callFrameCodes,A,e.callFrames,l,f)),_=await r("usage",()=>new Jt(e,E)),{nodeIndexById:O,nodeParent:I,nodePositions:F}=await r("process nodes",()=>qi(t.nodes,a)),{positionsTreeSource:N}=await r("process call frame positions",()=>Wi(O,I,F,e.callFrames,E,d,b)),{treeSource:v,callFramePositionsTree:B,callFramesTree:K,modulesTree:J,packagesTree:L,categoriesTree:he}=await r("build trees",()=>Mo(e,I,O,E,N,_)),Ga=[B,K,J,L,he].filter(Al=>Al!==null);await r("remap samples",()=>vi(d,N?.sourceIdToNode||v.sourceIdToNode,...Ga));let{recomputeTimings:Ha,samplesTimings:or,samplesTimingsFiltered:Wa,callFramePositionsTimings:Ya,callFramePositionsTimingsFiltered:Ka,callFramePositionsTreeTimings:Xa,callFramePositionsTreeTimingsFiltered:Za,callFramePositionsTreeTimestamps:Qa,callFramesTimings:el,callFramesTimingsFiltered:tl,callFramesTreeTimings:rl,callFramesTreeTimingsFiltered:nl,callFramesTreeTimestamps:ol,modulesTimings:sl,modulesTimingsFiltered:il,modulesTreeTimings:al,modulesTreeTimingsFiltered:ll,modulesTreeTimestamps:cl,packagesTimings:ul,packagesTimingsFiltered:fl,packagesTreeTimings:pl,packagesTreeTimingsFiltered:ml,packagesTreeTimestamps:dl,categoriesTimings:hl,categoriesTimingsFiltered:gl,categoriesTreeTimings:yl,categoriesTreeTimingsFiltered:bl,categoriesTreeTimestamps:Cl}=await r("process samples",()=>Di(d,S,K,J,L,he,B));return{name:t._name,type:o,disabled:!1,runtime:Yi(_.categories,_.packages,t._runtime),sourceInfo:{nodes:n,samples:s,samplesInterval:m},startTime:l,startNoSamplesTime:c,endTime:f,endNoSamplesTime:u,totalTime:p,_commonTree:null,_uniqueValuesMap:new Map,_uniqueValuesArray:new Array,_callFramesMap:new Map,_callFramesVariance:new Uint32Array,_callFramesStable:new Uint32Array,_samplesAll:new Uint32Array,_samplesStable:new Uint32Array,_sampleSizeCounts:{},_memoryType:t._memoryType?new Uint8Array(t._memoryType):null,_memoryTypeNames:t._memoryTypeNames||[],_memoryGc:t._memoryGc?new Uint8Array(t._memoryGc):null,_memoryGcNames:t._memoryGcNames||[],_memorySpace:t._memorySpace?new Uint8Array(t._memorySpace):null,_memorySpaceNames:t._memorySpaceNames||[],samples:or.samples,sampleCounts:g,sampleCountsByProfile:new Uint32Array,samplePositions:b,samplesTimings:or,samplesTimingsFiltered:Wa,timeDeltas:or.timeDeltas,timeDeltasByProfile:new Uint32Array,recomputeTimings:Ha,..._,codes:T,codesByCallFrame:x,codesByScript:w,positionsTreeSource:N,callFramePositionsTimings:Ya,callFramePositionsTimingsFiltered:Ka,callFramePositionsTree:B,callFramePositionsTreeTimings:Xa,callFramePositionsTreeTimingsFiltered:Za,callFramePositionsTreeTimestamps:Qa,callFramesTimings:el,callFramesTimingsFiltered:tl,callFramesTree:K,callFramesTreeTimings:rl,callFramesTreeTimingsFiltered:nl,callFramesTreeTimestamps:ol,modulesTimings:sl,modulesTimingsFiltered:il,modulesTree:J,modulesTreeTimings:al,modulesTreeTimingsFiltered:ll,modulesTreeTimestamps:cl,packagesTimings:ul,packagesTimingsFiltered:fl,packagesTree:L,packagesTreeTimings:pl,packagesTreeTimingsFiltered:ml,packagesTreeTimestamps:dl,categoriesTimings:hl,categoriesTimingsFiltered:gl,categoriesTree:he,categoriesTreeTimings:yl,categoriesTreeTimingsFiltered:bl,categoriesTreeTimestamps:Cl,heap:t._heap||null}}var Xi=async function(t,{rejectData:e,markers:r,setWorkTitle:n}){let s=async function(u,p){await n(u);let m=Date.now();try{return p()}finally{ae&&console.info(">",u,Date.now()-m)}},o=await s("extract profile data",()=>Ii(t,e)),i=new zt,a=[];for(let u=0;u<o.profiles.length;u++){let p=o.profiles[u];for(let{origin:h,name:C}of p._executionContexts||[])i.setPackageNameForOrigin(new URL(h).host,C);let m=await Ki(p,i,{work:o.profiles.length>1?(h,C)=>s(`Profile ${u+1}/${o.profiles.length} \u2014 ${h}`,C):s});m.name===void 0&&(m.name="Profile #"+(u+1)),m.callFramePositionsTree?.dictionary.forEach(r["call-frame-position"]),m.codesByCallFrame.forEach(r["call-frame-codes"]),a.push(m)}for(let u of a)u.timeDeltasByProfile=new Uint32Array(a.length),u.sampleCountsByProfile=new Uint32Array(a.length);let l=new Float32Array(i.callFrames.length);await s("cross-profile usage",()=>{$n(a,l)}),a.some(u=>u.type==="memory")&&await s("compute stable memory allocations",()=>$i(i,a)),await s("process module paths",()=>Oi(i.packages,i.modules)),await s("process display names",()=>Mi(i.modules)),await s("mark objects",()=>{i.callFrames.forEach(r["call-frame"]),i.modules.forEach(r.module),i.packages.forEach(r.package),i.categories.forEach(r.category),i.scripts.forEach(r.script)});let c=a[o.indexToView||0]||a[0];return{totalTime:a.reduce((u,p)=>Math.max(p.totalTime,u),0),shared:{scripts:i.scripts,callFrames:i.callFrames,modules:i.modules,packages:i.packages,categories:i.categories},callFramesProfilePresence:l,currentSamplesConvolutionRule:null,currentProfile:c,profiles:a}};var Vn=function({defineObjectMarker:t,addQueryMethods:e,setPrepare:r}){t("call-frame",{ref:"id",title:"name",page:"call-frame"}),t("call-frame-position",{title:"scriptOffset"}),t("module",{ref:"id",title:n=>n.name||n.path,page:"module"}),t("package",{ref:"id",title:"name",page:"package"}),t("category",{ref:"name",title:"name",page:"category"}),t("script",{ref:"id",title:"url"}),t("call-frame-codes",{title:n=>n.callFrame.name}),e(ws),r(Xi)};var oa=[(na(),xl(ra))];function Pd(t,e){for(;e<t.length;e++){let r=t.charCodeAt(e);if(r===10||r===13)return e}return-1}async function*Id(t){let e=new TextDecoder,r="",n=0,s=-1,o=!1,i=!0;for await(let a of t){let l=[],c=typeof a=="string"?a:e.decode(a,{stream:!0});n=0,i&&!o&&(o=typeof a=="string"?a.includes("\r"):a.includes(13));do{if(s=o?Pd(c,n):c.indexOf(`
`,n),s===-1)break;r!==""?(l.push(r+c.slice(n,s)),r=""):n<s&&l.push(c.slice(n,s)),n=s+1,i=!1}while(!0);r+=c.slice(n),yield l}r!==""&&(yield[r],r="")}async function*sa(t){for await(let e of Id(t))for(let r of e)yield r}function Gn(t,e,r=0,n=e.length){let s=e.indexOf(t,r);return s!==-1&&s<n?s:n}function Ze(t,e,r=t.length){let n=[];for(;e<=r;){let s=Gn(",",t,e,r);n.push(t.slice(e,s)),e=s+1}return n}function V(t,e,r,n){let s=Ze(e,r,n),o=s;for(let i=0;i<t.length&&i<s.length;i++)o[i]=t[i](s[i]);return o}function U(...t){return t}var j=parseInt;function ia(t){switch(t){case"":return"Builtin";case"~":return"Unopt";case"^":return"Sparkplug";case"+":case"+'":return"Maglev";case"*":case"*'":return"Opt";default:return"Unknown"}}function Hn(t){switch(t){case"X":return"NoFeedback";case"0":return"Uninitialized";case"1":return"Monomorphic";case"^":return"RecomputeHandler";case"P":return"Polymorphic";case"N":return"Megamorphic";case"D":return"Megadom";case"G":return"Generic";default:return"Unknown"}}var Nd=Object.create(null);function Gt(t){return t===""?"":(t in Nd,t)}function R(t){if(t===""||t.indexOf("\\")===-1)return Gt(t);let e=t.length,r="";for(let n=0;n<e;n++){let s=t.indexOf("\\",n);if(s===-1){r+=t.slice(n);break}if(s!==n&&(r+=t.slice(n,s),n=s),n===e-1){console.error("Invalid backslash",{inside:[n,n+1]});break}let o=t[++n];switch(o){case"0":r+="\0";break;case"b":r+="\b";break;case"n":r+=`
`;break;case"r":r+="\r";break;case"f":r+="\f";break;case"t":r+="	";break;case"v":r+="\v";break;case"u":{let[i=""]=t.slice(n+1,n+5).match(/^[0-9a-f]*/i)||[];if(i.length===4){r+=String.fromCharCode(parseInt(i,16)),n+=4;break}console.error("Invalid Unicode escape sequence",{inside:[n-1,Math.min(n+1+i.length,e)]});break}case"x":{let[i=""]=t.slice(n+1,n+3).match(/^[0-9a-f]*/i)||[];if(i.length===2){r+=String.fromCharCode(parseInt(i,16)),n+=2;break}console.error("Invalid hexadecimal escape sequence",{inside:[n-1,Math.min(n+1+i.length,e)]});break}default:r+=o}}return/^/.test(r),r}var Od=14,Ht=1<<Od;function aa(t,e,r=!1){let n=0,s=e.length-1;for(;n<=s;){let o=n+s>>1,i=e[o];if(t<i.start)s=o-1;else if(t>i.end)n=o+1;else return o}return r&&n<e.length?n:-1}function Md(t,e){let{start:r}=e;if(t.length===0||r>t[t.length-1].end){t.push(e);return}let n=r+e.size-1;if(n<t[0].start){t.unshift(e);return}let s=aa(r,t,!0),o=t[s];if(n>o.start){let i=s;for(;i+1<t.length&&!(t[i+1].start>n);i++);t.splice(s,i-s+1,e)}else t.splice(s,0,e)}var Qe=class t{id;start;end;size;code;constructor(e,r,n,s){this.id=e,this.start=r,this.end=r+n-1,this.size=n,this.code=s}contains(e){return e===this.start||e>this.start&&e<=this.end}clone(e){return new t(this.id,e,this.size,this.code)}},Wn=class{start;size;end;codeEntry;constructor(e,r,n){this.start=e,this.size=r,this.end=e+r-1,this.codeEntry=n}},Wt=class{codeMemoryBuckets;lastCodeEntry;constructor(){this.codeMemoryBuckets=new Map,this.lastCodeEntry=null}add(e){let{start:r,size:n}=e;for(this.lastCodeEntry=e;n>0;){let s=r%Ht,o=Math.min(n,Ht-s),i=r-s,a=new Wn(s,o,e);if(o===Ht)this.codeMemoryBuckets.set(i,[a]);else{let l=this.codeMemoryBuckets.get(i);l===void 0&&this.codeMemoryBuckets.set(i,l=[]),Md(l,a)}r+=o,n-=o}}findByAddress(e,r=!1){let n=this.lastCodeEntry;if(n!==null&&n.contains(e))return n;let s=e%Ht,o=e-s,i=this.codeMemoryBuckets.get(o);if(i===void 0)return null;let a=aa(s,i,r);return a!==-1?i[a].codeEntry:null}resolveStack(e,r,n){let s=n.length>0&&n[0]==="overflow"?1:0,o=new Array(2*(n.length-s+(r?2:1))),i=0,a=l=>{let c=this.findByAddress(l);c!==null?(o[i++]=c.id,o[i++]=l-c.start):(o[i++]=-1,o[i++]=l)};a(e),r&&a(r);for(let l=s;l<n.length;l++){let c=n[l];if(typeof c=="number")a(c);else switch(c.charCodeAt(0)){case 43:case 45:a(e+=parseInt(c));break;default:a(parseInt(c))}}return o}};var Rd=!1,fe=!1,la=[],pe=U(R,parseInt,parseInt,parseInt,R,R,R,R,R,R),q={profiler:U(R,parseInt),"heap-capacity":U(parseInt),"heap-available":U(parseInt),new:U(R,R,parseInt),delete:U(R,R),"script-source":U(parseInt,R,R),"shared-library":U(R,j,j,j),"code-creation":U(R,parseInt,parseInt,j,j,R),"code-move":U(j,j),"code-deopt":U(parseInt,parseInt,j,parseInt,parseInt,R,R,R),"sfi-move":U(R,R),"code-delete":U(j),"code-source-info":U(j,parseInt,parseInt,parseInt,R,R,R),"code-disassemble":U(j,R,R),tick:U(j,parseInt,parseInt,j,parseInt),LoadIC:pe,StoreIC:pe,KeyedLoadIC:pe,KeyedStoreIC:pe,LoadGlobalIC:pe,StoreGlobalIC:pe,StoreInArrayLiteralIC:pe};function ee(...t){Rd&&console.warn(...t.map(Gt))}async function ca(t){let e={},r=[],n=[],s=new Wt,o=new Map,i=[],a=new Map,l=0,c=[],f=new Map,u=[],p={events:u},m=new Set,h=[],C=[],y=b=>{for(let S=u.length-1;S>=0&&u[S].tm===0;S--)u[S].tm=b},d=b=>{if(b.length===0)return;let S=Gn(",",b),A=b.slice(0,S),E=S+1;switch(A){case"tick":{let[T,x,w,_,O,...I]=V(q[A],b,E),F=T,N=_;if(w)F=N,N=0;else if(N){let B=s.findByAddress(N);(B===null||B.code.type!=="JS")&&(N=0)}let v=s.resolveStack(F,N,I);y(x),c.push({tm:x,vm:O,s:v});break}case"code-creation":{let T=Ze(b,E),x=T[0],w=parseInt(T[2]),_=j(T[3]),O=j(T[4]),I=R(T[5]),F,N="";for(let L=6;L<T.length;L++){let he=T[L];if(he.startsWith("0x")){F=he,N=T[L+1];break}I+=","+R(T[L])}I=Gt(I);let v=N?ia(N):x==="JS"?"Builtin":x,B;if(F!==void 0&&(B=o.get(F),B===void 0||B.name!==I)){let L=[];o.set(F,B={id:i.length,name:I,codes:L}),i.push({name:I,codes:L})}let K;B?(B.codes.push(r.length),K={name:I,type:"JS",kind:v,size:O,func:B.id,tm:w}):K={name:I,timestamp:w,type:"CODE",kind:v,size:O};let J=new Qe(r.length,_,O,K);s.add(J),r.push(K),y(w),fe&&n.push({op:A,address:_,size:O,type:x,kindNum:T[1],kind:v,timestamp:w,nameAndLocation:I,sfiAddress:F});break}case"code-source-info":{let[T,x,w,_,O,I,F=""]=V(q[A],b,E),N=s.findByAddress(T);N!==null?N.code.type==="JS"?N.code.source={script:x,start:w,end:_,positions:O,inlined:I,fns:F!==""?(F.match(/[^S]+/g)||la).map(v=>{let B=o.get(v);return B!==void 0?B.id:(ee("(code-source-info) No SFI found"),-1)}):la}:ee("(code-source-info) Not a JavaScript code"):ee(`(code-source-info) Code with address ${T} is not found`),fe&&n.push({op:A,address:T,scriptId:x,start:w,end:_,positions:O,inlinedPositions:I,inlinedFunctions:F});break}case"script-source":{let[T,x,w]=V(q[A],b,E);l=Math.max(T,l),a.set(T,{id:T,url:x,source:w});break}case"new":{let[T,x,w]=V(q[A],b,E);f.set(x,w),u.push({tm:0,event:A,type:T,address:x,size:w});break}case"delete":{let[T,x]=V(q[A],b,E),w=f.get(x);w===void 0?ee(`(delete) Unknown memory chunk ${T} @ ${x}`):w===-1||(f.set(x,-1),u.push({tm:0,event:A,type:T,address:x,size:w}));break}case"LoadIC":case"StoreIC":case"KeyedLoadIC":case"KeyedStoreIC":case"LoadGlobalIC":case"StoreGlobalIC":case"StoreInArrayLiteralIC":{let[T,x,w,_,O,I,F,N,v,B]=V(q[A],b,E),K=j(T),J=s.findByAddress(K),L={tm:x,type:A,offset:J!==null?K-J.start:-1,oldState:Hn(O),newState:Hn(I),map:F,key:N,modifier:v,slowReason:B};J!==null?J.code.type==="JS"?Array.isArray(J.code.ic)?J.code.ic.push(L):J.code.ic=[L]:ee(`(${A}) Code is not JS kind`,{codeEntry:J,icEntry:L}):(C.push(L),ee(`(${A}) No code ${T} found for ${A}`));break}case"code-deopt":{let[T,x,w,_,O,I,F,N]=V(q[A],b,E),v=s.findByAddress(w);v?.code.type==="JS"&&(v.code.deopt||(v.code.deopt={tm:T,inliningId:_,scriptOffset:O,posText:F,reason:N,bailoutType:I}));break}case"code-move":{let[T,x]=V(q[A],b,E),w=s.findByAddress(T);w!==null?s.add(w.clone(x)):ee("(code-move) No code found"),fe&&n.push({op:A,address:T,destAddress:x});break}case"sfi-move":{let[T,x]=V(q[A],b,E),w=o.get(T);w!==void 0?(o.delete(T),o.set(x,w)):ee("(sfi-move) SFI not found, on moving SFI",T,"->",x),fe&&n.push({op:A,address:T,destAddress:x});break}case"code-delete":{if(fe){let[T]=V(q[A],b,E);n.push({op:A,address:T})}break}case"code-disassemble":{let[T,x,w]=V(q[A],b,E),_=s.findByAddress(T)?.code||null;_!==null?_.type==="JS"||_.type==="CODE"?_.disassemble=w:ee("(code-disassemble) Code is not JS or CODE type"):ee("(code-disassemble) No code found"),fe&&n.push({op:A,address:T,kind:x,disassemble:w});break}case"v8-version":{e.version=Ze(b,E).join(".");break}case"v8-platform":{e.platform=Ze(b,E).join("/");break}case"profiler":{let[T,x]=V(q[A],b,E);T==="start"&&(e.samplesInterval=x);break}case"heap-capacity":{let[T]=V(q[A],b,E);p.capacity=T;break}case"heap-available":{let[T]=V(q[A],b,E);p.available=T;break}case"shared-library":{let[T,x,w,_]=V(q[A],b,E),O={name:T,type:"SHARED_LIB"};s.add(new Qe(r.length,x,w-x,O)),r.push(O),fe&&n.push({op:A,address:x,size:w-x,name:T,aslrSlide:_});break}case"shared-library-end":break;default:m.add(A),h.push({op:A,line:b})}};for await(let b of t)d(b);return{meta:e,code:r,functions:i,ticks:c,scripts:Array.from({length:l+1},(b,S)=>a.get(S)||null),unattributedICEntries:C,heap:p,ignoredOps:[...m],ignoredEntries:h}}function ua(t){return ca(sa(t))}var fa=new TextEncoder().encode("v8-version,"),pa=[{name:"v8log",test:t=>t.subarray(0,fa.length).every((e,r)=>e===fa[r]),streaming:!0,decode:ua}];var Yn=[...pa];var Pe=class{listeners;constructor(){this.listeners=Object.create(null)}on(e,r){return this.listeners[e]={callback:r,next:this.listeners[e]||null},this}once(e,r){return this.on(e,function n(...s){r.apply(this,s),this.off(e,n)})}off(e,r){let n=this.listeners[e]||null,s=null;for(;n!==null;){if(n.callback===r){n.callback=null,s?s.next=n.next:this.listeners[e]=n.next;break}s=n,n=n.next}return this}emit(e,...r){let n=this.listeners[e]||null,s=!1;for(;n!==null;)typeof n.callback=="function"&&n.callback.apply(this,r),s=!0,n=n.next;return s}};var ie=class extends Pe{#e;#t;static define(e,r,n){return e.#e.set(r,n),e.emit("define",r,n),n}constructor(e){super(),this.#e=new Map,this.#t=!!e}revoke(e){if(!this.#t)throw new Error("Entry revoking is not allowed");this.#e.delete(e),this.emit("revoke",e)}isDefined(e){return this.#e.has(e)}has(e){return this.#e.has(e)}get(e){return this.#e.get(e)}get names(){return[...this.#e.keys()]}get keys(){return this.#e.keys()}get values(){return this.#e.values()}get entries(){return this.#e.entries()}};function ma(t,e){let{ast:r}=z.syntax.parse(e),n={view:t};if(r.type!=="Block")throw new SyntaxError('[Discovery] ViewModel#queryToConfig(): query root must be a "Block"');if(r.body.type!=="Object")throw new SyntaxError('[Discovery] ViewModel#queryToConfig(): query root must return an "Object"');for(let s of r.body.properties){if(s.type!=="ObjectEntry")throw new SyntaxError('[Discovery] ViewModel#queryToConfig(): unsupported object entry type "'+s.type+'"');let o,i=s.value;switch(s.key.type){case"Literal":o=s.key.value;break;case"Identifier":o=s.key.name,i||=s.key;break;case"Reference":o=s.key.name.name,i||=s.key;break;default:throw new SyntaxError('[Discovery] ViewModel#queryToConfig(): unsupported object key type "'+s.key.type+'"')}if(o==="view"||o==="postRender")throw new SyntaxError('[Discovery] ViewModel#queryToConfig(): set a value for "'+o+'" property in shorthand notation is prohibited');o==="when"||o==="data"||o==="whenData"?n[o]=i.type==="Literal"&&typeof i.value!="string"?i.value:z.syntax.stringify(i):n[o]=i.type==="Literal"&&(typeof i.value!="string"||i.value[0]!=="=")?i.value:"="+z.syntax.stringify(i)}return n}var Aa=Object.freeze({type:void 0}),Ta=Object.freeze({view:""}),Sa=new WeakMap,da=new WeakMap,Fd=new Set(["view","when","context","data","whenData","postRender"]);function vd(t){return typeof t=="string"||Array.isArray(t)||t!==null&&typeof t=="object"&&typeof t.view=="string"}function me(t,e){return Sa.set(t,e),t}function Dd(){return{name:"config-error",options:Aa,render(t,e){t.appendText(`[Error: ${e.reason}]`),"config"in e}}}function ha(t,e,r,n,s,o,i,a){return!D(r,t)||r[t]===void 0||e.host.queryBool(r[t]===!0?"":r[t],n,s)?!0:(e.viewEls.set(a,{skipped:t,config:r,inputData:o,inputDataIndex:i,data:n,context:s}),!1)}var Y=class t{type;children;border;constructor(e="inline",r){if(this.type=e,this.children=[],this.border=null,Array.isArray(r))for(let n of r)this.append(n)}appendText(e){this.append(new Yt(e))}appendInlineBlock(){let e=new t("inline-block");return this.append(e),e}appendBlock(){let e=new t("block");return this.append(e),e}appendLine(){let e=new t("line");return this.append(e),e}append(e){return this.children.push(e),this}setBorder(e){if(!e){this.border=null;return}this.border=typeof e=="string"?new tt(e,e,e,e):Array.isArray(e)?new tt(...e):new tt(e.top||null,e.right||null,e.bottom||null,e.left||null)}},Yt=class{value;constructor(e){this.value=String(e)}},rt=class{node;constructor(){this.node=null}setNode(e){this.node=e}};function et(t,e=0,r=t.length-1){let n=t[e].length;for(let s=e+1;s<=r;s++)n=Math.max(n,t[s].length);return n}function ga(t,e){return t.length>e?t.slice(0,e):t}function Bd(t,e=t,r=e,n=t){return(s,o)=>o===1?n:s===0?t:s+1===o?r:e}function ya(t){return Array.isArray(t)?Bd(...t):t}function Ld(t,e=t,r=e){return(n,s,o)=>`${t}${"".padStart(n+s+o-t.length-r.length,e)}${r}`}function ba(t){return Array.isArray(t)?Ld(...t):t}var tt=class{top;left;right;bottom;constructor(e=null,r=null,n=e,s=r){this.top=e||null,this.left=s||null,this.right=r||null,this.bottom=n||null}render(e,r,n){let s=ya(this.left),o=ya(this.right),i=ba(this.top),a=ba(this.bottom),l=et(e),c=0,f=0;if(s){if(typeof s=="function"){let u=e.map((p,m)=>String(s(m,e.length)??""));c=et(u),e=e.map((p,m)=>u[m].padEnd(c)+p)}else c=s.length,e=e.map(u=>s+u);if(c>0)for(let u=0;u<e.length;u++)r[u].unshift({length:c,node:n})}if(o)if(typeof o=="function"){let u=e.map((p,m)=>String(o(m,e.length)??""));if(f=et(u),f>0){for(let p=0;p<e.length;p++)r[p].push({length:c+l-e[p].length+f,node:n});e=e.map((p,m)=>p.padEnd(c+l)+u[m].padStart(f))}}else{f=o.length;for(let u=0;u<e.length;u++)r[u].push({length:c+l-e[u].length+f,node:n});e=e.map(u=>u.padEnd(c+l)+o)}if(i||a){let u=l+c+f;if(i){let p=typeof i=="function"?i(l,c,f)||"":"".padStart(u,i);p&&(e.unshift(ga(p,u)),r.unshift([{length:e[0].length,node:n}]))}if(a){let p=typeof a=="function"?a(l,c,f)||"":"".padStart(u,a);p&&(e.push(ga(p,u)),r.push([{length:e[e.length-1].length,node:n}]))}}return{spans:r,lines:e}}};async function ka(t,e,r,n,s,o,i,a,l){let c=new Y(e.options.type||"inline");e.options.border&&c.setBorder(e.options.border),await e.render(c,s,o,i),typeof n.postRender=="function"&&await n.postRender(c,n,o,i);let f={config:n,props:s,inputData:a,inputDataIndex:l,data:o,context:i};return t.viewEls.set(c,f),r.setNode(c),r}function Ca(t,e,r,n){return ka(t,t.defaultRenderErrorRenderer,r,Ta,{type:"render",reason:e,config:n})}function Ud(t,e){return{name:e,normalizeConfig:t.normalizeConfig.bind(t),ensureValidConfig:t.ensureValidConfig.bind(t),composeConfig:t.composeConfig.bind(t),propsFromConfig:t.propsFromConfig.bind(t),render:t.render.bind(t),listLimit:t.listLimit.bind(t),renderList:t.renderList.bind(t)}}async function Ea(t,e,r,n,s,o){if(Array.isArray(r))return Promise.all(r.map(c=>Ea(t,e,c,n,s,o))).then(c=>new Y("inline",c));let i=n&&typeof s=="number"?n[s]:n,a=null;switch(typeof r.view){case"function":a={name:!1,options:Aa,render:r.view};break;case"string":a=t.get(r.view)||null;break}e||(e=new Y);let l=new rt;if(e.append(l),!a){let c=typeof r.view=="string"?"View `"+r.view+"` is not found":"Render is not a function";return t.host.logger.error(c,r),Ca(t,c,l,r)}try{if(ha("when",t,r,i,o,n,s,l)){let c="context"in r?await t.host.query(r.context,i,o):o,f="data"in r?await t.host.query(r.data,i,c):i;if(ha("whenData",t,r,f,c,n,s,l))return await ka(t,a,l,r,t.propsFromConfig(r,f,c),f,c,n,s)}return l}catch(c){return t.host.logger.error("View render error:",c.message),Ca(t,String(c),l,Ta)}}var Kt=class t extends ie{host;defaultRenderErrorRenderer;viewEls;constructor(e){super(),this.host=e,this.defaultRenderErrorRenderer=Dd(),this.viewEls=new WeakMap}define(e,r,n){let s=vd(r)||typeof r=="function"?{...n,render:r}:r,{render:o=[],...i}=s,{type:a,props:l}=i;return t.define(this,e,Object.freeze({name:e,options:Object.freeze({...s,type:typeof a=="string"||a===void 0?a:void 0,props:typeof l=="string"?this.host.queryFn(l):l}),render:typeof o=="function"?o.bind(Ud(this,e)):(c,f,u,p)=>this.render(c,o,u,p)}))}normalizeConfig(e){if(!e)return null;if(Array.isArray(e)){let r=[];for(let n of e){let s=this.normalizeConfig(n);s!==null&&(Array.isArray(s)?r.push(...s):r.push(s))}return r}if(typeof e=="string"){let[,r,n,s]=e.match(/^(\S+?)([:{])((?:.|\s)+)$/)||[];if(r){if(n==="{")try{return me(ma(r,n+s),e)}catch(o){return me(this.badConfig(e,o),e)}return me({view:r,data:s},e)}return me({view:e},e)}else if(typeof e=="function")return me({view:e},e);return e}badConfig(e,r){let n=r?.message||"Unknown error";return this.host.logger.error(n,{config:e,error:r}),{view:this.defaultRenderErrorRenderer.render,type:"config",reason:n,config:e}}ensureValidConfig(e){return Array.isArray(e)?e.map(r=>this.ensureValidConfig(r)).flat():!e||!e.view?this.badConfig(e,new Error(e?"Option `view` is missed":"Config is not a valid value")):e}composeConfig(e,r){return e=this.normalizeConfig(e),r=this.normalizeConfig(r),e&&r?Array.isArray(e)?e.map(n=>me({...n,...r},[n,r])):me({...e,...r},[e,r]):e||r}propsFromConfig(e,r,n,s=this.get(e?.view)?.options.props){let o={};for(let[i,a]of Object.entries(e))Fd.has(i)||(o[i]=typeof a=="string"&&a.startsWith("=")?this.host.query(a.slice(1),r,n):a);if(typeof s=="function"){let i=s(r,{props:o,context:n});i!==null&&typeof i=="object"&&i!==o&&(da.set(i,{props:o,fn:s}),o=i)}return o}textWidth(e){if(e===null)return 0;if(e instanceof Y){let r=0;for(let n of e.children)r+=this.textWidth(n);return r}else return e instanceof rt?this.textWidth(e.node):e.value.length}cleanUpRenderTree(e){if(e===null)return null;if(e instanceof rt)return this.cleanUpRenderTree(e.node);if(e instanceof Y){let r=e.children.map(this.cleanUpRenderTree,this).filter(o=>o!==null);if(r.length===0)return null;let n=this.viewEls.get(e),s=e.border;e=new Y(e.type,r),e.border=s,n&&this.viewEls.set(e,n)}else if(e.value==="")return null;return e}serialize(e){let r=this.cleanUpRenderTree(e),n=[],s="";if(r!==null){let{lines:a,spans:l}=i(r,null),c=0;for(let f of l){for(let u of f)if(u.length>0){let p=c+u.length;n.push({range:[c,p],view:(u.node&&this.viewEls.get(u.node))??null}),c=p}c++}s=a.join(`
`)}return{text:s,ranges:n};function o(a,l,c,f,u){if(l<a.length&&a[l].length<c){let p=a[l],m=p.padEnd(c),C=f[l].at(-1);a[l]=m,C?C.length+=m.length-p.length:f[l].push({length:m.length,node:u})}}function i(a,l){if(a instanceof Yt){let p=a.value.split(/\r\n?|\n/);return{spans:p.map(m=>[{length:m.length,node:l}]),lines:p}}let c=[[]],f=[""],u=0;if(a instanceof Y){let p="none";for(let m of a.children){let h=m instanceof Y?m.type:"inline",{lines:C,spans:y}=i(m,a);if(C.length>0){switch(h){case"block":u=f.length-1,f[u]!==""?(c.push([]),f.push("")):u>0&&f[u]!==""?(c.push([]),f.push("")):u===0&&(c.pop(),f.pop()),c.push(...y),f.push(...C),c.push([]),u=f.push("")-1;break;case"line":p==="block"||f[u]===""&&(c.pop(),f.pop()),c.push(...y),f.push(...C),c.push([]),u=f.push("")-1;break;case"inline-block":{p==="block"?(u=f.push("")-1,c.push([])):(p==="inline"||p==="inline-block")&&o(f,u,et(f,u)+1,c,a);let d=f[u].length;if(c[u].push(...y[0]),f[u]+=C[0],C.length>1){let g=C.length-(f.length-u);for(let b=0;b<g;b++)c.push([]),f.push("");for(let b=1;b<C.length;b++)o(f,u+b,d,c,a),c[u+b].push(...y[b]),f[u+b]+=C[b]}break}case"inline":if(p==="block"?(u=f.push("")-1,c.push([])):p==="inline-block"&&o(f,u,et(f,u)+1,c,a),c[u].push(...y[0]),f[u]+=C[0],C.length>1)for(let d=1;d<C.length;d++)u=f.push(C[d])-1,c[u]=y[d];break}p=h}}for(;p!=="inline"&&f[u]==="";)u--,c.pop(),f.pop();if(a.border)return a.border.render(f,c,a)}return{spans:c,lines:f}}}async render(e,r,n,s,o){return typeof e=="string"?e=new Y(e):e||(e=new Y),await Ea(this,e,this.ensureValidConfig(this.normalizeConfig(r)),n,o,s),e}async renderString(e,r,n,s,o){return this.serialize(await this.render(e,r,n,s,o))}listLimit(e,r){return e===!1?!1:!e||isNaN(e)?r:Math.max(parseInt(e,10),0)||r}renderList(e,r,n,s,o){let{offset:i=0,moreContainer:a,beforeItem:l,afterItem:c,beforeMore:f=l,afterMore:u=c}=o,{limit:p=!1}=o;p===!1&&(p=n.length);let m=Promise.all(n.slice(i,i+p).map((h,C,y)=>{l&&e.appendText(l);let d=this.render(e,r,n,{...s,index:i+C,array:n,sliceIndex:C,slice:y},i+C);return c&&e.appendText(c),d}));return this.maybeMore(a||e,null,n.length,i+p,f,u),m}maybeMore(e,r,n,s,o,i){if(n>s){let a=n-s;e.appendText((o||"")+"("+a+" more\u2026)"+(i||""))}}getViewConfigTransitionTree(e){let r=Sa.get(e)||[];return Array.isArray(r)||(r=[r]),{value:e,deps:r.map(this.getViewConfigTransitionTree,this)}}getViewPropsTransition(e){let r=da.get(e)||null;return r&&{props:r.props,fn:r.fn,query:r.fn.query||null}}};var Zt={};P(Zt,{alert:()=>Kn,badge:()=>Xn,block:()=>Zn,blockquote:()=>Qn,context:()=>eo,headerViews:()=>to,link:()=>ro,listViews:()=>no,source:()=>oo,switchView:()=>so,table:()=>ao,textViews:()=>lo});var Kn={};P(Kn,{default:()=>jd});var xa=t=>({demo:`${t}:"hello world\\nsome text..."`});function jd({textView:t}){t.define("alert",{type:"block",usage:xa,border:{top:["\u2554","\u2550","\u2557"],left:"\u2551 ",right:" \u2551",bottom:["\u255A","\u2550","\u255D"]},render(e,r,n,s){let{content:o="text"}=r;return t.render(e,o,n,s)}})}var Xn={};P(Xn,{default:()=>$d});var wa=(t,e)=>({demo:{view:t,text:"hello world"},examples:[{title:"Variations",demo:e.map(r=>[`${r}:"${r}"`,`${r}:"${r}\\nmulti-line"`,`${r}:"${r}\\nmulti-line\\nmore..."`]).flat()},{title:"Complex content",highlightProps:["content"],demo:{view:t,content:['text:"text"','link:"#example"','text:"text"']}}]});function $d({textView:t}){let e={type:"inline-block",usage:wa,props:`is not array? | {
            text: #.props has no 'content' ? is (string or number or boolean) ?: text,
            content: undefined,
            prefix,
            postfix
        } | overrideProps()`,render(r,n,s,o){let{text:i,content:a,prefix:l,postfix:c}=n,f;return l&&r.appendText(String(l)+" "),a?f=this.render(r,a,s,o):r.appendText(String(i)),c&&r.appendText(" "+String(c)),f}};t.define("badge",{...e,border:{left:["\u23A1","\u23A2","\u23A3","["],right:["\u23A4","\u23A5","\u23A6","]"]}}),t.define("pill-badge",{...e,border:{left:["\u23A7","\u23AA","\u23A9","("],right:["\u23AB","\u23AA","\u23AD",")"]}})}var Zn={};P(Zn,{default:()=>Vd});var nt=(t,e)=>({demo:`${t}:'just a text'`,examples:[{title:"Variations",demo:e.map(r=>[`header:"${r}"`,'text:"\u2026text\u2026"',`${r}:"\u23A1${r}\u23A6"`,'text:"\u2026text\u2026"',`${r}:"\u23A1${r}\\nmulti-line\u23A6"`,'text:"\u2026text\u2026"',`${r}:"\u23A1${r}\\nmulti-line\\nmore and more\u2026\u23A6"`,'text:"\u2026text\u2026"']).flat()},{title:"Variations with border",demo:e.map(r=>[`header:"${r}"`,'text:"\u2026text\u2026"',`${r}{ border: [null, " |", null, "| "], data:"\u23A1${r}\u23A6" }`,'text:"\u2026text\u2026"',`${r}{ border: [null, " |", null, "| "], data:"\u23A1${r}\\nmulti-line\u23A6" }`,'text:"\u2026text\u2026"',`${r}{ border: [null, " |", null, "| "], data:"\u23A1${r}\\nmulti-line\\nmore and more\u2026\u23A6" }`,'text:"\u2026text\u2026"']).flat()}]});function Vd({textView:t}){function e(r,n,s,o){let{content:i="text",border:a}=n;return a&&r.setBorder(a),t.render(r,i,s,o)}t.define("inline",{type:"inline",usage:nt,render:e}),t.define("inline-block",{type:"inline-block",usage:nt,render:e}),t.define("block",{type:"block",usage:nt,render:e}),t.define("line",{type:"line",usage:nt,render:e})}var Qn={};P(Qn,{default:()=>zd});var _a=t=>({demo:{view:t,content:['text:"Blockquote text..."','blockquote:"Nested blockquote\\nmulti-line text..."']},examples:[{title:"Variations",demoData:"Blockquote text...",demo:[{kind:"",text:"Default blockquote without any kind."},{kind:"note",text:"Useful information that users should know, even when skimming content."},{kind:"tip",text:"Helpful advice for doing things better or more easily."},{kind:"important",text:"Key information users need to know to achieve their goal."},{kind:"warning",text:"Urgent info that needs immediate user attention to avoid problems."},{kind:"caution",text:"Advises about risks or negative outcomes of certain actions."}].map(({kind:e,text:r})=>e?`${t}{ kind: "${e}", data: ${JSON.stringify(r)} }`:`${t}:${JSON.stringify(r)}`)}]});var Pa=_a;function zd({textView:t}){t.define("blockquote",function(e,r,n,s){let{content:o="text",kind:i}=r;return typeof i=="string"&&/\S/.test(i)&&e.appendLine().appendText(`[!${i.trim().toUpperCase()}]`),t.render(e,o,n,s)},{type:"block",usage:Pa,border:{left:"> "}})}var eo={};P(eo,{default:()=>qd});var Ia={beforeDemo:['md:"A non-visual view used to group views, manage their visibility, or explicitly define data and context for nested views. In the example, the `context` view sets up specific data and context, allowing nested views (`content`) to utilize these shared definitions directly:"'],demo:{view:"context",data:{name:"World",age:"1000 years"},context:'{ ...#, greeting: "Hello" }',content:["text:`${#.greeting}, ${name}!`","table"]}};function qd({textView:t}){t.define("context",function(e,r,n,s){let{content:o=[]}=r;return t.render(e,o,n,s)},{usage:Ia})}var to={};P(to,{default:()=>Jd});var de=(t,e)=>({demo:`${t}:"Header \\"${t}\\""`,examples:[{title:"Variations",view:e.map(r=>`${r}:"Header \\"${r}\\""`)},{title:"Complex content",demo:{view:t,content:['text:"Text "','link:{ text: "Link" }']}},{title:"Using anchor",demo:[{view:t,anchor:"foo",content:'text:"Explicit value for an anchor"'},{view:t,anchor:!0,content:'text:"Auto generated anchor based on text content of header"'}]}]});function Jd({textView:t}){function e(r){let n="#".repeat(r)+" ";return async function(o,i,a,l){let{content:c}=i;return o.appendText(n),t.render(o,c||"text",a,l)}}t.define("header",e(1),{type:"block",usage:de}),t.define("h1",e(1),{type:"block",usage:de}),t.define("h2",e(2),{type:"block",usage:de}),t.define("h3",e(3),{type:"block",usage:de}),t.define("h4",e(4),{type:"block",usage:de}),t.define("h5",e(5),{type:"block",usage:de})}var ro={};P(ro,{default:()=>Hd});var Na={demo:{view:"link",text:"I am a link",href:"#example"},examples:[{title:"Infering text \u21FF href",highlightProps:["text","href","data"],beforeDemo:['md:"When `text` is omitted but `href` is specified, or vice versa, the opposite component is inferred from the specified one"'],demo:[{view:"link",text:"http://example1.com"},{view:"link",href:"http://example2.com"},{view:"link",data:'"http://example3.com"'}]}]};var Gd=`is not array? | {
    text: #.props.content is undefined ? is string ?: text,
    content: undefined,
    href
} | overrideProps() | {
    $text; $href;
    ...,
    text: $text | is not undefined or no $href ?: $href,
    href: $href | is not undefined or no $text ?: $text
}`;function Hd({textView:t}){t.define("link",async function(e,r,n,s){let{text:o,content:i,href:a}=r;a&&e.appendText("["),i?await t.render(e,i,n,s):e.appendText(o),a&&e.appendText(`](${a})`)},{type:"inline-block",props:Gd,usage:Na})}var no={};P(no,{default:()=>Wd});var Ie=(t,e)=>({demo:{view:t,data:["one","two","three","four"]},examples:[{title:"Variations",demoData:["foo","bar","baz"],demo:e.map(r=>[`header:'view: \\"${r}\\"'`,r]).flat()},{title:"Variations long lists",demoData:Array.from({length:100},(r,n)=>"item#"+n),demo:e.map(r=>[`header:'view: \\"${r}\\"'`,{view:r,limit:3}]).flat()},{title:"Configure item's content",demo:[{view:t,data:["one","two","three","four"],item:['text:"<item> "',{view:"link",data:'{ href: "#" + $ }'}]}]}]});function Wd({textView:t}){t.define("list",e("line",""),{type:"block",usage:Ie}),t.define("inline-list",e("inline-block"),{type:"inline-block",usage:Ie}),t.define("comma-list",e("inline-block","",","),{type:"inline-block",usage:Ie}),t.define("ol",e("line",r=>1+r.index+". "),{type:"block",usage:Ie}),t.define("ul",e("line","- "),{type:"block",usage:Ie}),t.define("list-item",function(r,n,s,o){let{content:i="text",bullet:a,delim:l,renderType:c="line"}=n,f=typeof a=="function"?a:a?()=>a:null,u=typeof l=="function"?l:l?()=>l:null;return r.type=c,(f||u)&&r.setBorder({left:f?p=>p===0?f(o):"":null,right:u?p=>p===0&&o.index!==o.array.length-1?u(o):"":null}),t.render(r,i,s,o)});function e(r,n,s){return async function(i,a,l,c){let{item:f,itemConfig:u,limit:p,emptyText:m}=a,h;return!Array.isArray(l)&&l&&(l=[l]),Array.isArray(l)&&l.length>0?h=t.renderList(i,this.composeConfig({view:"list-item",content:f,bullet:n,delim:s,renderType:r},u),l,c,{limit:t.listLimit(p,25)}):i.appendText(String(m||"<empty list>")),h}}}var oo={};P(oo,{default:()=>Xd});var Xt='let name = "world";\n\nconsole.log(`Hello, ${name}!`);',Yd=Function("return num => num + 5")(),Oa={demo:{view:"source",syntax:"js",source:Xt},examples:[{title:"Custom line numbers",highlightProps:["lineNum"],demo:[{view:"source",source:Xt,syntax:"js",lineNum:Yd},{view:"source",source:Xt,syntax:"js",lineNum:"==> $ + 12345"}]},{title:"Hide line numbers",highlightProps:["lineNum"],beforeDemo:['md:"Pass falsy value to `lineNum` option to hide line numbers:"'],demo:{view:"source",source:Xt,syntax:"js",lineNum:!1}},{title:"Marks",highlightProps:["marks"],beforeDemo:{view:"md",source:["The `marks` option allows injecting text marks at specific points in the source text. The `marks` value must be an array of objects with the following fields:",`
`,"- `offset` (required) - the offset in the source where the mark is injected.","- `content` - view config for content (e.g., `'text:\"hello\"'` or `{ view: 'name', ... }`)","- `prefix` - text to display before the content of mark","- `postfix` - text to display after the content of mark"]},demo:{view:"source",source:`let demo = "mark";

if (expr) {
  // do something
}`,syntax:"js",marks:[{offset:4},{offset:4,content:'text:"mark"'},{offset:24,prefix:"self: ",content:'text:"123"',postfix:"ms"}]}}]};var Kd=`is not array? | {
    source: #.props has no 'source' ? is string ?: content is string ? content : source,
    syntax,
    lineNum is function ?: is not undefined ? bool() : true,
    marks is array ?: null
} | overrideProps()`;function Xd(t){t.textView.define("source",{type:"block",props:Kd,usage:Oa,async render(e,r,n,s){let o=[],{source:i,syntax:a,lineNum:l=!0,marks:c}=r,f={...s,sourceViewProps:{source:i,syntax:a,lineNum:l,marks:c}};if(typeof i!="string")return;let u=typeof l=="function"?l:C=>C+1,p=l?i.split(/\r\n?|\n/g).map((C,y)=>String(u(y))):[];if(p.length>2){let C=p.reduce((y,d)=>Math.max(y,d.length),3);for(let y=0;y<p.length;y++)p[y].length<C&&(p[y]=p[y].padStart(C))}if(e.appendLine().appendText(`\`\`\`${a||""}`),e.appendText(m()),Array.isArray(c)){for(let y of c){if(!y||typeof y!="object"){t.logger.warn('Bad value for an entry in "source" view props.mark, must be an object',{props:r,mark:y});return}let d=typeof y.offset=="number"&&isFinite(y.offset)?Math.max(0,Math.round(y.offset)):void 0;if(typeof d!="number"){t.logger.warn('Bad "offset" value for an entry in "source" view props.marks',{props:r,mark:y});return}o.push({...y,offset:Math.max(0,Math.min(d,i.length))})}o.sort((y,d)=>y.offset-d.offset);let C=0;for(let y of o){let{offset:d,content:g=[],prefix:b="",postfix:S=""}=y;d>C&&(h(i.slice(C,d)),C=d),e.appendText("/* "+b),await this.render(e,g,y,f),e.appendText(S+" */")}C<i.length&&h(i.slice(C))}else h(i);e.appendLine().appendText("```");function m(){let C=p.shift();return typeof C=="string"?C+" \u2502 ":""}function h(C){let y=C.split(/\r\n?|\n/);e.appendText(y[0]);for(let d=1;d<y.length;d++)e.appendText(`
`+m()+y[d])}}})}var so={};P(so,{default:()=>Zd});var Ma={demo:{view:"switch",content:[{when:"expr",content:'text:"Renders when `expr` is truthy"'},{content:'text:"Renders when all other `when` conditions are falsy"'}]}};function Zd(t){t.textView.define("switch",function(e,r,n,s){let{content:o}=r,i='text:"<switch: no case choosen>"';if(Array.isArray(o)){for(let a of o)if(a&&t.queryBool(a.when||!0,n,s)){i="data"in a?{view:"context",data:a.data,content:a.content}:a.content;break}}return t.textView.render(e,i,n,s)},{usage:Ma})}var ao={};P(ao,{default:()=>th});var Qd=[{name:"Alice",age:34,occupation:"Engineer"},{name:"Bob",age:42,occupation:"Doctor"},{name:"Charlie",age:9,occupation:"Student"},{name:"David",age:50,occupation:"Doctor"},{name:"Eve",age:15,occupation:"Engineer"}],Ra={demoData:Qd,demo:{view:"table",limit:2,cols:{age:{footer:"text:sum(=>age)"},occupation:{footer:{}}}}};function io(t,e){return{header:t,view:"table-cell",data:e}}function eh(t,e,r){return typeof e=="string"&&(e={content:e}),D(e,"content")||D(e,"data")?{header:t,view:"table-cell",...e}:{...io(t,r),...e}}function th(t){let e=t.queryFn("is not object");t.textView.define("table",async function(r,n,s,o){let{rows:i,cols:a,valueCol:l=!1,headerWhen:c=!0,footerWhen:f=!0,limit:u=25}=n,p=0;"rows"in n||(i=s),br(i)&&(i=[...i]),yr(i)||(i=i?[i]:[]),u!==!1&&i.length>u&&(p=i.length-u,i=i.slice(0,u));let m=[];if(Array.isArray(a))a=a.map((A,E)=>typeof A=="string"?io(A,t.pathToQuery([A])):{header:"col"+E,view:"table-cell",...A});else{let A=new Set,E=a&&typeof a=="object"?a:{};a=[];for(let T of i)if(e(T))l=!0;else for(let x of Object.keys(T))A.add(x);for(let T of Object.keys(E))E[T]?A.add(T):A.delete(T);for(let T of A)a.push(D(E,T)?eh(T,E[T],t.pathToQuery([T])):io(T,t.pathToQuery([T])))}if(l&&a.unshift({header:"[value]",view:"table-cell",details:!1}),a=a.filter(A=>!D(A,"colWhen")||t.queryBool(A.colWhen,s,o)),!a.length)return r.appendText(`
<empty table>
`);let h=t.query(c,s,o),C=t.query(f,s,o),y=Array.from(i,()=>[]),d=[],g=[];for(let A of a){let E=String(A.header).trim(),T=0;if(h){let x=await this.render(null,"text",E),w=t.textView.textWidth(x);T=Math.max(T,w),m.push({width:w,content:x})}for(let x=0;x<i.length;x++){let w=await this.render(null,A,i[x],o),_=t.textView.textWidth(w);T=Math.max(T,_),y[x].push({width:_,align:A.align,content:w})}if(C&&A.footer){let x=typeof A.footer=="object"&&A.footer!==null&&!D(A.footer,"view")?A.footer:{content:A.footer},{align:w,..._}=x,O=await this.render(null,this.composeConfig("block",_),s,o),I=t.textView.textWidth(O);T=Math.max(T,I),g.push({width:I,align:w,content:O})}else g.push(null);d.push(T)}b(d,"\u250C","\u252C","\u2510"),h&&(S(d,m),b(d,"\u251C","\u253C","\u2524"));for(let A of y)S(d,A);if(p>0){let A=d.reduce((x,w)=>x+w+3,0)+1,E=` ${p} more rows\u2026 `,T=Math.max(1,A-E.length);r.appendLine().appendText(`${"~".repeat(Math.floor(1))}${E}${"~".repeat(Math.ceil(T-1))}`),C&&g.some(x=>x!==null)&&(b(d,"\u251C","\u253C","\u2524"),S(d,g),b(d,"\u2514","\u2534","\u2518"))}else C&&g.some(A=>A!==null)&&(b(d,"\u251C","\u253C","\u2524"),S(d,g)),b(d,"\u2514","\u2534","\u2518");function b(A,E,T,x){let w=E+"\u2500".repeat((A[0]||0)+2);for(let _=1;_<A.length;_++)w+=T+"\u2500".repeat(A[_]+2);r.appendLine().appendText(w+x)}function S(A,E){let T=r.appendLine();for(let x=0;x<E.length;x++){let{width:w=0,align:_,content:O=""}=E[x]||{},I=A[x]-w+1;I>0&&_!=="right"?T.appendText("\u2502 "):T.appendText("\u2502"+" ".repeat(I)),T.append(O),I>0&&_==="right"?T.appendText(" "):T.appendText(" ".repeat(I))}T.appendText("\u2502")}},{type:"block",usage:Ra}),t.textView.define("table-cell",function(r,n,s,o){let{content:i,contentWhen:a=!0}=n,l=!i&&s!==null&&(Array.isArray(s)?s.length>0:typeof s=="object")&&!(s instanceof RegExp);if(t.queryBool(a,s,o)){if(i)return t.textView.render(r,i,s,o);r.appendText(rh(s,l))}})}function rh(t,e){if(Array.isArray(t)||ArrayBuffer.isView(t))return t.length||"";if(e){for(let r in t)if(D(t,r))return"{\u2026}";return"{}"}return t===void 0?"":String(t)}var lo={};P(lo,{default:()=>nh});var Fa={demo:'text:"just a text"'};function nh({textView:t}){t.define("text",{props:"{ text: #.props has no 'text'? } | overrideProps()",usage:Fa,render(e,r){let{text:n}=r;e.appendText(String(n))}})}var Qt=class t extends ie{#e;constructor(){super(!0),this.#e=Object.create(null)}define(e,r){if(typeof r!="function")throw new Error("callback is not a function");return this.#e=Object.freeze({...this.#e,[e]:r}),t.define(this,e,Object.freeze({name:e,callback:r}))}revoke(e){if(this.has(e)){let r={...this.#e};delete r[e],this.#e=Object.freeze(r)}super.revoke(e)}get actionMap(){return this.#e}call(e,...r){let n=this.get(e);if(n===void 0)throw new Error(`action "${e}" doesn't exist`);let{callback:s}=n;return s(...r)}};var ot=new Map,co=null;function oh(t){co=null;for(let[e,r]of ot.entries())t.warn.groupCollapsed(`${e} (${r.length})`,r);ot.clear()}function sh(t,e,...r){co===null&&ot.size===0&&(co=setTimeout(()=>oh(t),1));let n=ot.get(e);n!==void 0?n.push(r):ot.set(e,[r])}function La(t,e,r){switch(typeof e){case"function":return e;case"string":return Object.assign(n=>n&&D(n,e)?n[e]:void 0,{getterFromString:`object[${JSON.stringify(e)}]`});default:throw new Error(`[Discovery] Bad type "${typeof e}" for ${r} in object marker "${t}" config (must be a string or a function)`)}}function va(t,e,r,n){let s=e&&D(e,r)?e[r]:void 0;return s!==void 0?La(t,s,`"${r}" option`):n}function Da(t,e,r){return(Array.isArray(e[r])?e[r]||[]:[]).map(s=>La(t,s,`"${r}" option`))}function Ba(t,e=!1){return t===null?!1:e?typeof t=="object":typeof t=="object"||typeof t=="number"||typeof t=="string"}function ih(t,e){let{name:r,indexRefs:n,lookupRefs:s,annotateScalars:o,page:i,getRef:a,getTitle:l}=e;a!==null&&n.unshift(a),i&&a===null&&t.warn(`Option "ref" for "${r}" marker must be specified when "page" options is defined ("page" option ignored)`),n.length>0&&s.unshift(y=>y);let c=new Set,f=new Map,u=new Map,p=new WeakMap;return{name:r,page:a!==null?i:null,mark:y=>{if(y===null||typeof y!="object"){t.warn(`Invalid value used for "${r}" marker (should be an object)`);return}c.add(y);for(let d of n){let g=d(y);if(Ba(g)){if(!f.has(g)){f.set(g,y);continue}f.get(g)!==y&&sh(t,`The same reference value used for different objects for "${r}" marker`,`Reference value "${g}"`,{refGetter:d.getterFromString||d,ref:g,currentObject:f.get(g),newObject:y})}}},lookup:(y,d=!1)=>{if(!Ba(y,d?!o:!1))return null;let g=typeof y=="object",b=g?p.get(y):u.get(y);if(b!==void 0)return b;let S=null;if(g&&c.has(y))S=y;else for(let x of s){let w=x(y),_=f.get(w);if(_!==void 0){S=_;break}}if(S===null)return null;let A=u.get(S);if(A!==void 0)return A;let E=a!==null?a(S):null,T=Object.freeze({type:r,object:S,ref:E,title:l(S),href:i!==null&&E!==null?`#${encodeURIComponent(i)}:${encodeURIComponent(E)}`:null});return u.set(S,T),y!==S&&(g?p.set(y,T):u.set(y,T)),T},reset:()=>{c.clear(),f.clear(),u.clear(),p=new WeakMap}}}var Ne=class t extends ie{constructor(e){super(),this.logger=e}#e=!1;lock(){this.#e=!0}define(e,r){if(this.#e)throw new Error("Object marker definition is not allowed after setup");if(this.isDefined(e))throw new Error(`Object marker "${e}" is already defined, new definition ignored`);r=r||{};let n=Da(e,r,"refs"),s=Da(e,r,"lookupRefs"),o=!!r.annotateScalars,i=r.page,a=typeof i=="string"?i:null,l=va(e,r,"ref",null),c=va(e,r,"title",l||(()=>null));return t.define(this,e,Object.freeze(ih(this.logger,{name:e,indexRefs:n,lookupRefs:s,annotateScalars:o,page:a,getRef:l,getTitle:c})))}reset(){for(let{reset:e}of this.values)e()}markerMap(){return Object.fromEntries([...this.entries].map(([e,r])=>[e,r.mark]))}lookup(e,r){if(typeof r=="string")return this.get(r)?.lookup(e)||null;for(let{lookup:n}of this.values){let s=n(e);if(s!==null)return s}return null}lookupAll(e){let r=[];for(let{lookup:n}of this.values){let s=n(e);s!==null&&r.push(s)}return r}};var er={overrideProps:ah,jsonInfo:Ue,jsonParse:Er,jsonStringify:xr,imagecontent:Be,imagedatauri:gt,imagesrc:gr};function ah(t,e=this.context.props){if(!e)return t;let r={...t};for(let n of Object.keys(r))D(e,n)&&(r[n]=e[n]);return r}var tr={error:Cr,imagecontent:bt,imagedatauri:ht,imagesrc:yt};function Ua(t,e){return{before(){t.objectMarkers.reset()},contextApi:{markers:t.objectMarkers.markerMap(),setWorkTitle:e?.setPrepareWorkTitle||(()=>Promise.resolve()),rejectData(r,n){throw Object.assign(new Error(r),{renderContent:n})}}}}function uo(t,e){let r=t.objectMarkers,n={setPrepare:t.setPrepare.bind(t),defineObjectMarker:l,addQueryHelpers(f){return t.logger.warn("addQueryHelpers() is deprecated, use addQueryMethods() instead"),i(f)},addQueryMethods:i,addQueryAssertions:a},s={...er,query:t.query.bind(t),pageLink:(f,u,p,m)=>t.encodePageHash(u,f,p,m),marker:r.lookup.bind(r),markerAll:r.lookupAll.bind(r),callAction:c,actionHandler:(f,...u)=>t.action.has(f)?()=>c(f,...u):void 0},o={...tr};typeof e=="function"&&e(n),r.lock(),t.queryFnFromString=z.setup({methods:s,assertions:o});function i(f){s={...s,...f}}function a(f){o={...o,...f}}function l(f,u){let{mark:p,lookup:m}=r.define(f,u);return m?p:()=>{}}function c(f,...u){let p=u[u.length-1],m=null;typeof p=="function"&&(m=p,u.pop());let h=t.action.call(f,...u);return h&&m&&typeof h.then=="function"?h.then(m):m?m(h):h}}function ja(t,e){let r=new Ne(t.logger),n=[],s=[],o={setWorkTitle:e?.setPrepareWorkTitle||(()=>Promise.resolve()),rejectData(y,d){throw Object.assign(new Error(y),{renderContent:d})},defineObjectMarker:u,lookupObjectMarker:p,lookupObjectMarkerAll:m,addValueAnnotation:h,addQueryHelpers(y){return t.logger.warn("addQueryHelpers() is deprecated, use addQueryMethods() instead"),c(y)},addQueryMethods:c,addQueryAssertions:f,query(y,...d){return t.queryFn.call({queryFnFromString:l},y)(...d)}},i={...er,query:t.query.bind(t),pageLink:(y,d,g,b)=>t.encodePageHash(d,y,g,b),marker:p,markerAll:m,callAction:C,actionHandler:(y,...d)=>t.action.has(y)?()=>C(y,...d):void 0},a={...tr},l=z.setup({methods:i,assertions:a});return{contextApi:o,after(y){Object.assign(y,{objectMarkers:r,linkResolvers:n,annotations:s,queryFnFromString:l})}};function c(y){l=z.setup({methods:i={...i,...y}})}function f(y){l=z.setup({assertions:a={...a,...y}})}function u(y,d){let{page:g,mark:b,lookup:S}=r.define(y,d)||{};if(!S)return()=>{};if(g!==null){if(!t.page?.isDefined(g))return t.logger.error(`Page reference "${g}" doesn't exist`),()=>{};n.push(A=>{let E=S(A);return E&&{type:g,text:E.title,href:E.href,entity:E.object}})}return h((A,E)=>{let T=S(A,!0);if(T!==null&&T.object!==E.host)return{place:"before",style:"badge",text:y,href:T.href}}),b}function p(y,d){return r.lookup(y,d)}function m(y){return r.lookupAll(y)}function h(y,d=!1){typeof d=="boolean"&&(d={debug:d}),s.push({query:y,...d})}function C(y,...d){let g=d[d.length-1],b=null;typeof g=="function"&&(b=g,d.pop());let S=t.action.call(y,...d);return S&&b&&typeof S.then=="function"?S.then(b):b?b(S):S}}var $a=new WeakMap,Va=["variable","property","value","assertion","method"],lh=(t,e)=>Va.indexOf(t.type)-Va.indexOf(e.type),ch=t=>{let e=t.toLowerCase();return r=>r!==t&&(typeof r=="string"?r:String(r)).toLowerCase().indexOf(e)!==-1};function uh(t,e){return typeof t!="string"?String(t):(t=JSON.stringify(t),e[0]!=="'"?t:`'${t.slice(1,-1).replace(/\\.|'/g,r=>r==='\\"'?'"':r==="'"?"\\'":r)}'`)}function fh(t,e,r){if(e===r)return!0;let n=t.stat(e)||[],s=t.stat(r)||[];if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++){let i=n[o],a=s[o];for(let l of Object.keys(i))if(i[l]!==a[l])return!1}return!0}function za(t,e,r,n,s){try{let o=$a.get(t);if(!o||o.query!==e||o.data!==n||o.context!==s){let a={tolerant:!0,stat:!0};$a.set(t,o={query:e,data:n,context:s,offset:-1,suggestions:null,api:null}),o.api=t.queryFnFromString(e,a)(n,s)}if(o.api===null)return null;if(o.offset!==-1&&fh(o.api,o.offset,r))return o.suggestions;let i=o.api.suggestion(o.offset=r,{sort:!0,filter:ch,limit:50});if(i){o.suggestions=[];for(let a of i.sort(lh))o.suggestions.push(...a.suggestions.map(l=>({type:a.type,from:a.from,to:a.to,text:a.text,value:a.type==="value"?uh(l,a.text):l})))}else o.suggestions=null;return o.suggestions}catch(o){return t.logger.error("Error while attempting to retrieve suggestions for the query:",o.message),null}}var ph=()=>{},mh="[Discovery]",dh=t=>/^[a-zA-Z_][a-zA-Z_$0-9]*$/.test(t)&&!hh.includes(t),hh=["and","or","in","has","is","not","no","asc","ascN","ascA","ascNA","ascAN","desc","descN","descA","descNA","descAN"],rr=(t,e)=>({...e,encodings:Array.isArray(e?.encodings)?[...e.encodings,...t.encodings]:t.encodings}),st=class extends Pe{options;info;logger;action;objectMarkers;linkResolvers;encodings;datasets;data;#e;prepare;#t;#r;textView;constructor(e){super(),this.options=e||{};let{name:r,version:n,description:s,icon:o,logLevel:i="warn",logger:a=console,extensions:l,encodings:c,context:f,setup:u}=e||{};this.info={name:r||"Untitled model",version:n||null,description:s||null,icon:o||null},this.logger=new ze(mh,i,a),this.action=new Qt,this.objectMarkers=new Ne(this.logger),this.linkResolvers=[],this.datasets=[],this.encodings=At(c),this.data=void 0,this.#e=f,this.prepare=p=>p,this.#t=!0,this.textView=new Kt(this),this.apply(l),typeof u=="function"?(this.#t=!1,uo(this,u)):uo(this,()=>{}),this.apply(Zt);for(let{page:p,lookup:m}of this.objectMarkers.values)p&&this.linkResolvers.push(h=>{let C=m(h);return C&&{type:p,text:C.title,href:C.href,entity:C.object}})}apply(e){Array.isArray(e)?e.forEach(r=>this.apply(r)):typeof e=="function"?e.call(null,this):e&&this.apply(Object.values(e))}log(){this.logger.error("Model#log() is deprecated, use Model#logger interface instead")}get legacyPrepare(){return this.#t}setPrepare(e){if(typeof e!="function")throw new Error("An argument should be a function");this.prepare=e}get context(){return this.#e}set context(e){this.setContext(e,!0)}setContext(e,r=!1){let n=this.#e;if(r)this.#e=e;else{let s={...this.#e,...e};hr(s,n)||(this.#e=s)}Object.is(this.#e,n)||this.emit("context",n,this.#e)}getContext(){return{model:this.info,actions:this.action.actionMap,datasets:this.datasets,data:this.data,...this.context}}setData(e,r){r=r||{};let n=Symbol();this.#r=n;let s=Date.now(),o=()=>{if(this.#r!==n)throw new Error("Prevented by another setData()")},i=this.#t?ja(this,r):Ua(this,r);return Promise.resolve().then(()=>(o(),i.before?.(this),this.prepare.call(null,e,i.contextApi)||e)).then(l=>{o(),this.datasets=[{...r.dataset,data:l}],this.data=l,i.after?.(this),this.emit("data"),this.logger.perf(`Data prepared in ${Date.now()-s}ms`)})}async trackLoadDataProgress(e){let r=Date.now(),n=await e.dataset;return this.logger.perf(`Data loaded in ${Date.now()-r}ms`),this.setData(n.data,{dataset:n})}loadDataFromStream(e,r){return this.trackLoadDataProgress(ds(e,rr(this,r)))}loadDataFromEvent(e,r){return this.trackLoadDataProgress(hs(e,rr(this,r)))}loadDataFromFile(e,r){return this.trackLoadDataProgress(Or(e,rr(this,r)))}loadDataFromUrl(e,r){return this.trackLoadDataProgress(gs(e,rr(this,r)))}unloadData(){this.hasDatasets()&&(this.datasets=[],this.data=void 0,this.emit("unloadData"))}hasDatasets(){return this.datasets.length!==0}getQueryEngineInfo(){return{name:"jora",version:z.version,link:"https://discoveryjs.github.io/jora/#article:jora-syntax"}}queryFnFromString(){return ph}queryFn(e){switch(typeof e){case"function":return e;case"string":return Object.assign(this.queryFnFromString(e),{query:e})}}query(e,r,n){switch(typeof e){case"function":return e(r,n);case"string":return this.queryFn(e)(r,n);default:return e}}queryBool(e,r,n){return z.buildin.bool(this.query(e,r,n))}querySuggestions(e,r,n,s){return za(this,e,r,n,s)}pathToQuery(e){let r="",n=s=>r+=r===""?s[0]==="["?"$"+s:s:s[0]==="["?s:"."+s;for(let s of e)s==="*"?n("values()"):typeof s=="number"?n(`[${s}]`):dh(s)?n(s):n(`["${s}"]`);return r}stripAnchorFromHash(e){return typeof e=="string"?e.replace(/(^|&)!anchor(=[^&]+|(?=&|$))/g,""):e}encodePageHash(e=null,r=null,n,s=null){let o=n;return o&&(typeof o!="string"?(Array.isArray(o)||(o=Object.entries(o)),o=o.filter(([i])=>i!=="!anchor").map(i=>i.map(encodeURIComponent).join("=")).join("&")):o=this.stripAnchorFromHash(o)),`#${e?encodeURIComponent(e):""}${typeof r=="string"&&r||typeof r=="number"?":"+encodeURIComponent(r):""}${o?"&"+o:""}${s?"&!anchor="+encodeURIComponent(s):""}`}decodePageHash(e,r=()=>Object.fromEntries){let n=(e.indexOf("&")+1||e.length+1)-1,[s,o=null]=e.substring(e[0]==="#"?1:0,n).split(":").map(decodeURIComponent),i=[],a=null;for(let l of e.slice(n+1).split("&").filter(Boolean)){let c=l.indexOf("="),f,u;c!==-1?(f=decodeURIComponent(l.slice(0,c)),u=decodeURIComponent(l.slice(c+1))):(f=decodeURIComponent(l),u=!0),f==="!anchor"?a=u&&u!==!0?u:null:i.push([f,u])}return{pageId:s,pageRef:o,pageParams:r(s)(i),pageAnchor:a}}resolveValueLinks(e){let r=[],n=typeof e;if(e&&(n==="object"||n==="string"))for(let s of this.linkResolvers){let o=s(e);o&&r.push(o)}return r.length?r:null}};function it(t,e=t.then()){return Object.assign(Promise.resolve(e),{query(r,n){let s=t.then(async({host:o,data:i,context:a})=>({host:o,data:await o.query(r,i,{...a,args:n}),context:a}));return it(s,s.then(o=>o.data))},context(r,n){let s=t.then(async({host:o,data:i,context:a})=>({host:o,data:i,context:await o.query(r,i,{...a,args:n})}));return it(s,s.then(o=>o.context))},render(r,n){let s=t.then(async({host:o,data:i,context:a})=>{let l=await o.textView.render(null,r,i,{...a,args:n});return await o.textView.serialize(l)});return it(s)},renderToConsole(r,n){let s=t.then(async({host:o,data:i,context:a})=>{let l=await o.textView.render(null,r,i,{...a,args:n}),c=await o.textView.serialize(l);return console.log(c.text),c});return it(s)}})}function qa(t){if(typeof t=="string")try{let e=fo.resolve(process.cwd(),t),r=Ja.statSync(e);return{type:"file",name:fo.basename(e),path:e,size:r.size,createdAt:r.ctime}}catch{}}var nr=class extends st{loadDataFromStream(e,r){return super.loadDataFromStream(gh(e)?yh.toWeb(e):e,typeof e.path=="string"&&!r?.resource?{...r,resource:qa(e.path)}:r)}loadDataFromFile(e,r){let n=fo.resolve(process.cwd(),e);return this.loadDataFromStream(Ja.createReadStream(n),{...r,resource:qa(n)})}queryChain(e=""){return it(Promise.resolve({host:this,data:this.data,context:this.getContext()})).query(e)}},G0=new nr({encodings:Yn,extensions:oa,setup:Vn,context:{model:po.model}}),H0=new nr({encodings:Yn});export{G0 as model,H0 as raw};
